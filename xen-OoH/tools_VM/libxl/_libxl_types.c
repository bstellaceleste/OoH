
/* DO NOT EDIT.
 *
 * This file is autogenerated by
 * "gentypes.py libxl_types.idl __libxl_types.h __libxl_types_private.h __libxl_types_json.h __libxl_types.c"
 */

#include "libxl_osdeps.h"

#include <stdint.h>
#include <stdlib.h>
#include <string.h>

#include "libxl_internal.h"


void libxl_ioport_range_dispose(libxl_ioport_range *p)
{
    if (!p) return;
    memset(p, 0, sizeof(*p));
}

void libxl_iomem_range_dispose(libxl_iomem_range *p)
{
    if (!p) return;
    memset(p, 0, sizeof(*p));
}

void libxl_vga_interface_info_dispose(libxl_vga_interface_info *p)
{
    if (!p) return;
    memset(p, 0, sizeof(*p));
}

void libxl_vnc_info_dispose(libxl_vnc_info *p)
{
    if (!p) return;
    free(p->listen);
    free(p->passwd);
    memset(p, 0, sizeof(*p));
}

void libxl_spice_info_dispose(libxl_spice_info *p)
{
    if (!p) return;
    free(p->host);
    free(p->passwd);
    free(p->image_compression);
    free(p->streaming_video);
    memset(p, 0, sizeof(*p));
}

void libxl_sdl_info_dispose(libxl_sdl_info *p)
{
    if (!p) return;
    free(p->display);
    free(p->xauthority);
    memset(p, 0, sizeof(*p));
}

void libxl_dominfo_dispose(libxl_dominfo *p)
{
    if (!p) return;
    free(p->ssid_label);
    memset(p, 0, sizeof(*p));
}

void libxl_cpupoolinfo_dispose(libxl_cpupoolinfo *p)
{
    if (!p) return;
    free(p->pool_name);
    libxl_bitmap_dispose(&p->cpumap);
    memset(p, 0, sizeof(*p));
}

void libxl_channelinfo_dispose(libxl_channelinfo *p)
{
    if (!p) return;
    free(p->backend);
    free(p->frontend);
    switch (p->connection) {
    case LIBXL_CHANNEL_CONNECTION_UNKNOWN:
        break;
    case LIBXL_CHANNEL_CONNECTION_PTY:
        free(p->u.pty.path);
        break;
    case LIBXL_CHANNEL_CONNECTION_SOCKET:
        break;
    }
    memset(p, 0, sizeof(*p));
}

void libxl_vminfo_dispose(libxl_vminfo *p)
{
    if (!p) return;
    memset(p, 0, sizeof(*p));
}

void libxl_version_info_dispose(libxl_version_info *p)
{
    if (!p) return;
    free(p->xen_version_extra);
    free(p->compiler);
    free(p->compile_by);
    free(p->compile_domain);
    free(p->compile_date);
    free(p->capabilities);
    free(p->changeset);
    free(p->commandline);
    free(p->build_id);
    memset(p, 0, sizeof(*p));
}

void libxl_domain_create_info_dispose(libxl_domain_create_info *p)
{
    if (!p) return;
    free(p->ssid_label);
    free(p->name);
    libxl_key_value_list_dispose(&p->xsdata);
    libxl_key_value_list_dispose(&p->platformdata);
    free(p->pool_name);
    memset(p, 0, sizeof(*p));
}

void libxl_domain_restore_params_dispose(libxl_domain_restore_params *p)
{
    if (!p) return;
    free(p->colo_proxy_script);
    memset(p, 0, sizeof(*p));
}

void libxl_sched_params_dispose(libxl_sched_params *p)
{
    if (!p) return;
    memset(p, 0, sizeof(*p));
}

void libxl_vcpu_sched_params_dispose(libxl_vcpu_sched_params *p)
{
    if (!p) return;
    {
        int i;
        for (i=0; i<p->num_vcpus; i++)
            libxl_sched_params_dispose(&p->vcpus[i]);
        free(p->vcpus);
    }
    memset(p, 0, sizeof(*p));
}

void libxl_domain_sched_params_dispose(libxl_domain_sched_params *p)
{
    if (!p) return;
    memset(p, 0, sizeof(*p));
}

void libxl_vnode_info_dispose(libxl_vnode_info *p)
{
    if (!p) return;
    free(p->distances);
    libxl_bitmap_dispose(&p->vcpus);
    memset(p, 0, sizeof(*p));
}

void libxl_rdm_reserve_dispose(libxl_rdm_reserve *p)
{
    if (!p) return;
    memset(p, 0, sizeof(*p));
}

void libxl_domain_build_info_dispose(libxl_domain_build_info *p)
{
    if (!p) return;
    libxl_bitmap_dispose(&p->avail_vcpus);
    libxl_bitmap_dispose(&p->cpumap);
    libxl_bitmap_dispose(&p->nodemap);
    {
        int i;
        for (i=0; i<p->num_vcpu_hard_affinity; i++)
            libxl_bitmap_dispose(&p->vcpu_hard_affinity[i]);
        free(p->vcpu_hard_affinity);
    }
    {
        int i;
        for (i=0; i<p->num_vcpu_soft_affinity; i++)
            libxl_bitmap_dispose(&p->vcpu_soft_affinity[i]);
        free(p->vcpu_soft_affinity);
    }
    free(p->exec_ssid_label);
    libxl_cpuid_dispose(&p->cpuid);
    free(p->blkdev_start);
    {
        int i;
        for (i=0; i<p->num_vnuma_nodes; i++)
            libxl_vnode_info_dispose(&p->vnuma_nodes[i]);
        free(p->vnuma_nodes);
    }
    free(p->device_model);
    free(p->device_model_ssid_label);
    free(p->device_model_user);
    libxl_string_list_dispose(&p->extra);
    libxl_string_list_dispose(&p->extra_pv);
    libxl_string_list_dispose(&p->extra_hvm);
    libxl_domain_sched_params_dispose(&p->sched_params);
    {
        int i;
        for (i=0; i<p->num_ioports; i++)
            libxl_ioport_range_dispose(&p->ioports[i]);
        free(p->ioports);
    }
    free(p->irqs);
    {
        int i;
        for (i=0; i<p->num_iomem; i++)
            libxl_iomem_range_dispose(&p->iomem[i]);
        free(p->iomem);
    }
    free(p->kernel);
    free(p->cmdline);
    free(p->ramdisk);
    free(p->device_tree);
    free(p->bootloader);
    libxl_string_list_dispose(&p->bootloader_args);
    switch (p->type) {
    case LIBXL_DOMAIN_TYPE_HVM:
        free(p->u.hvm.firmware);
        libxl_bitmap_dispose(&p->u.hvm.viridian_enable);
        libxl_bitmap_dispose(&p->u.hvm.viridian_disable);
        free(p->u.hvm.timeoffset);
        free(p->u.hvm.system_firmware);
        free(p->u.hvm.smbios_firmware);
        free(p->u.hvm.acpi_firmware);
        libxl_vga_interface_info_dispose(&p->u.hvm.vga);
        libxl_vnc_info_dispose(&p->u.hvm.vnc);
        free(p->u.hvm.keymap);
        libxl_sdl_info_dispose(&p->u.hvm.sdl);
        libxl_spice_info_dispose(&p->u.hvm.spice);
        free(p->u.hvm.serial);
        free(p->u.hvm.boot);
        free(p->u.hvm.usbdevice);
        free(p->u.hvm.soundhw);
        libxl_string_list_dispose(&p->u.hvm.usbdevice_list);
        libxl_string_list_dispose(&p->u.hvm.serial_list);
        libxl_rdm_reserve_dispose(&p->u.hvm.rdm);
        break;
    case LIBXL_DOMAIN_TYPE_PV:
        free(p->u.pv.kernel);
        free(p->u.pv.bootloader);
        libxl_string_list_dispose(&p->u.pv.bootloader_args);
        free(p->u.pv.cmdline);
        free(p->u.pv.ramdisk);
        break;
    case LIBXL_DOMAIN_TYPE_PVH:
        break;
    case LIBXL_DOMAIN_TYPE_INVALID:
        break;
    }
    memset(p, 0, sizeof(*p));
}

void libxl_device_vfb_dispose(libxl_device_vfb *p)
{
    if (!p) return;
    free(p->backend_domname);
    libxl_vnc_info_dispose(&p->vnc);
    libxl_sdl_info_dispose(&p->sdl);
    free(p->keymap);
    memset(p, 0, sizeof(*p));
}

void libxl_device_vkb_dispose(libxl_device_vkb *p)
{
    if (!p) return;
    free(p->backend_domname);
    memset(p, 0, sizeof(*p));
}

void libxl_device_disk_dispose(libxl_device_disk *p)
{
    if (!p) return;
    free(p->backend_domname);
    free(p->pdev_path);
    free(p->vdev);
    free(p->script);
    free(p->colo_host);
    free(p->colo_export);
    free(p->active_disk);
    free(p->hidden_disk);
    memset(p, 0, sizeof(*p));
}

void libxl_device_nic_dispose(libxl_device_nic *p)
{
    if (!p) return;
    free(p->backend_domname);
    free(p->model);
    free(p->ip);
    free(p->bridge);
    free(p->ifname);
    free(p->script);
    free(p->gatewaydev);
    free(p->coloft_forwarddev);
    free(p->colo_sock_mirror_id);
    free(p->colo_sock_mirror_ip);
    free(p->colo_sock_mirror_port);
    free(p->colo_sock_compare_pri_in_id);
    free(p->colo_sock_compare_pri_in_ip);
    free(p->colo_sock_compare_pri_in_port);
    free(p->colo_sock_compare_sec_in_id);
    free(p->colo_sock_compare_sec_in_ip);
    free(p->colo_sock_compare_sec_in_port);
    free(p->colo_sock_compare_notify_id);
    free(p->colo_sock_compare_notify_ip);
    free(p->colo_sock_compare_notify_port);
    free(p->colo_sock_redirector0_id);
    free(p->colo_sock_redirector0_ip);
    free(p->colo_sock_redirector0_port);
    free(p->colo_sock_redirector1_id);
    free(p->colo_sock_redirector1_ip);
    free(p->colo_sock_redirector1_port);
    free(p->colo_sock_redirector2_id);
    free(p->colo_sock_redirector2_ip);
    free(p->colo_sock_redirector2_port);
    free(p->colo_filter_mirror_queue);
    free(p->colo_filter_mirror_outdev);
    free(p->colo_filter_redirector0_queue);
    free(p->colo_filter_redirector0_indev);
    free(p->colo_filter_redirector0_outdev);
    free(p->colo_filter_redirector1_queue);
    free(p->colo_filter_redirector1_indev);
    free(p->colo_filter_redirector1_outdev);
    free(p->colo_compare_pri_in);
    free(p->colo_compare_sec_in);
    free(p->colo_compare_out);
    free(p->colo_compare_notify_dev);
    free(p->colo_sock_sec_redirector0_id);
    free(p->colo_sock_sec_redirector0_ip);
    free(p->colo_sock_sec_redirector0_port);
    free(p->colo_sock_sec_redirector1_id);
    free(p->colo_sock_sec_redirector1_ip);
    free(p->colo_sock_sec_redirector1_port);
    free(p->colo_filter_sec_redirector0_queue);
    free(p->colo_filter_sec_redirector0_indev);
    free(p->colo_filter_sec_redirector0_outdev);
    free(p->colo_filter_sec_redirector1_queue);
    free(p->colo_filter_sec_redirector1_indev);
    free(p->colo_filter_sec_redirector1_outdev);
    free(p->colo_filter_sec_rewriter0_queue);
    free(p->colo_checkpoint_host);
    free(p->colo_checkpoint_port);
    memset(p, 0, sizeof(*p));
}

void libxl_device_pci_dispose(libxl_device_pci *p)
{
    if (!p) return;
    memset(p, 0, sizeof(*p));
}

void libxl_device_rdm_dispose(libxl_device_rdm *p)
{
    if (!p) return;
    memset(p, 0, sizeof(*p));
}

void libxl_device_usbctrl_dispose(libxl_device_usbctrl *p)
{
    if (!p) return;
    free(p->backend_domname);
    memset(p, 0, sizeof(*p));
}

void libxl_device_usbdev_dispose(libxl_device_usbdev *p)
{
    if (!p) return;
    switch (p->type) {
    case LIBXL_USBDEV_TYPE_HOSTDEV:
        break;
    }
    memset(p, 0, sizeof(*p));
}

void libxl_device_dtdev_dispose(libxl_device_dtdev *p)
{
    if (!p) return;
    free(p->path);
    memset(p, 0, sizeof(*p));
}

void libxl_device_vtpm_dispose(libxl_device_vtpm *p)
{
    if (!p) return;
    free(p->backend_domname);
    memset(p, 0, sizeof(*p));
}

void libxl_device_p9_dispose(libxl_device_p9 *p)
{
    if (!p) return;
    free(p->backend_domname);
    free(p->tag);
    free(p->path);
    free(p->security_model);
    memset(p, 0, sizeof(*p));
}

void libxl_device_channel_dispose(libxl_device_channel *p)
{
    if (!p) return;
    free(p->backend_domname);
    free(p->name);
    switch (p->connection) {
    case LIBXL_CHANNEL_CONNECTION_UNKNOWN:
        break;
    case LIBXL_CHANNEL_CONNECTION_PTY:
        break;
    case LIBXL_CHANNEL_CONNECTION_SOCKET:
        free(p->u.socket.path);
        break;
    }
    memset(p, 0, sizeof(*p));
}

void libxl_connector_param_dispose(libxl_connector_param *p)
{
    if (!p) return;
    free(p->id);
    memset(p, 0, sizeof(*p));
}

void libxl_device_vdispl_dispose(libxl_device_vdispl *p)
{
    if (!p) return;
    free(p->backend_domname);
    {
        int i;
        for (i=0; i<p->num_connectors; i++)
            libxl_connector_param_dispose(&p->connectors[i]);
        free(p->connectors);
    }
    memset(p, 0, sizeof(*p));
}

void libxl_domain_config_dispose(libxl_domain_config *p)
{
    if (!p) return;
    libxl_domain_create_info_dispose(&p->c_info);
    libxl_domain_build_info_dispose(&p->b_info);
    {
        int i;
        for (i=0; i<p->num_disks; i++)
            libxl_device_disk_dispose(&p->disks[i]);
        free(p->disks);
    }
    {
        int i;
        for (i=0; i<p->num_nics; i++)
            libxl_device_nic_dispose(&p->nics[i]);
        free(p->nics);
    }
    {
        int i;
        for (i=0; i<p->num_pcidevs; i++)
            libxl_device_pci_dispose(&p->pcidevs[i]);
        free(p->pcidevs);
    }
    {
        int i;
        for (i=0; i<p->num_rdms; i++)
            libxl_device_rdm_dispose(&p->rdms[i]);
        free(p->rdms);
    }
    {
        int i;
        for (i=0; i<p->num_dtdevs; i++)
            libxl_device_dtdev_dispose(&p->dtdevs[i]);
        free(p->dtdevs);
    }
    {
        int i;
        for (i=0; i<p->num_vfbs; i++)
            libxl_device_vfb_dispose(&p->vfbs[i]);
        free(p->vfbs);
    }
    {
        int i;
        for (i=0; i<p->num_vkbs; i++)
            libxl_device_vkb_dispose(&p->vkbs[i]);
        free(p->vkbs);
    }
    {
        int i;
        for (i=0; i<p->num_vtpms; i++)
            libxl_device_vtpm_dispose(&p->vtpms[i]);
        free(p->vtpms);
    }
    {
        int i;
        for (i=0; i<p->num_p9s; i++)
            libxl_device_p9_dispose(&p->p9s[i]);
        free(p->p9s);
    }
    {
        int i;
        for (i=0; i<p->num_vdispls; i++)
            libxl_device_vdispl_dispose(&p->vdispls[i]);
        free(p->vdispls);
    }
    {
        int i;
        for (i=0; i<p->num_channels; i++)
            libxl_device_channel_dispose(&p->channels[i]);
        free(p->channels);
    }
    {
        int i;
        for (i=0; i<p->num_usbctrls; i++)
            libxl_device_usbctrl_dispose(&p->usbctrls[i]);
        free(p->usbctrls);
    }
    {
        int i;
        for (i=0; i<p->num_usbdevs; i++)
            libxl_device_usbdev_dispose(&p->usbdevs[i]);
        free(p->usbdevs);
    }
    memset(p, 0, sizeof(*p));
}

void libxl_diskinfo_dispose(libxl_diskinfo *p)
{
    if (!p) return;
    free(p->backend);
    free(p->frontend);
    memset(p, 0, sizeof(*p));
}

void libxl_nicinfo_dispose(libxl_nicinfo *p)
{
    if (!p) return;
    free(p->backend);
    free(p->frontend);
    memset(p, 0, sizeof(*p));
}

void libxl_vtpminfo_dispose(libxl_vtpminfo *p)
{
    if (!p) return;
    free(p->backend);
    free(p->frontend);
    memset(p, 0, sizeof(*p));
}

void libxl_usbctrlinfo_dispose(libxl_usbctrlinfo *p)
{
    if (!p) return;
    free(p->backend);
    free(p->frontend);
    memset(p, 0, sizeof(*p));
}

void libxl_vcpuinfo_dispose(libxl_vcpuinfo *p)
{
    if (!p) return;
    libxl_bitmap_dispose(&p->cpumap);
    libxl_bitmap_dispose(&p->cpumap_soft);
    memset(p, 0, sizeof(*p));
}

void libxl_physinfo_dispose(libxl_physinfo *p)
{
    if (!p) return;
    memset(p, 0, sizeof(*p));
}

void libxl_connectorinfo_dispose(libxl_connectorinfo *p)
{
    if (!p) return;
    free(p->id);
    memset(p, 0, sizeof(*p));
}

void libxl_vdisplinfo_dispose(libxl_vdisplinfo *p)
{
    if (!p) return;
    free(p->backend);
    free(p->frontend);
    {
        int i;
        for (i=0; i<p->num_connectors; i++)
            libxl_connectorinfo_dispose(&p->connectors[i]);
        free(p->connectors);
    }
    memset(p, 0, sizeof(*p));
}

void libxl_numainfo_dispose(libxl_numainfo *p)
{
    if (!p) return;
    free(p->dists);
    memset(p, 0, sizeof(*p));
}

void libxl_cputopology_dispose(libxl_cputopology *p)
{
    if (!p) return;
    memset(p, 0, sizeof(*p));
}

void libxl_pcitopology_dispose(libxl_pcitopology *p)
{
    if (!p) return;
    memset(p, 0, sizeof(*p));
}

void libxl_domain_remus_info_dispose(libxl_domain_remus_info *p)
{
    if (!p) return;
    free(p->netbufscript);
    memset(p, 0, sizeof(*p));
}

void libxl_event_dispose(libxl_event *p)
{
    if (!p) return;
    switch (p->type) {
    case LIBXL_EVENT_TYPE_DOMAIN_SHUTDOWN:
        break;
    case LIBXL_EVENT_TYPE_DOMAIN_DEATH:
        break;
    case LIBXL_EVENT_TYPE_DISK_EJECT:
        free(p->u.disk_eject.vdev);
        libxl_device_disk_dispose(&p->u.disk_eject.disk);
        break;
    case LIBXL_EVENT_TYPE_OPERATION_COMPLETE:
        break;
    case LIBXL_EVENT_TYPE_DOMAIN_CREATE_CONSOLE_AVAILABLE:
        break;
    }
    memset(p, 0, sizeof(*p));
}

void libxl_psr_cat_info_dispose(libxl_psr_cat_info *p)
{
    if (!p) return;
    memset(p, 0, sizeof(*p));
}

void libxl_ioport_range_copy(libxl_ctx *ctx, libxl_ioport_range *dst, const libxl_ioport_range *src)
{
    GC_INIT(ctx);
    dst->first = src->first;
    dst->number = src->number;
    GC_FREE;
}

void libxl_iomem_range_copy(libxl_ctx *ctx, libxl_iomem_range *dst, const libxl_iomem_range *src)
{
    GC_INIT(ctx);
    dst->start = src->start;
    dst->number = src->number;
    dst->gfn = src->gfn;
    GC_FREE;
}

void libxl_vga_interface_info_copy(libxl_ctx *ctx, libxl_vga_interface_info *dst, const libxl_vga_interface_info *src)
{
    GC_INIT(ctx);
    dst->kind = src->kind;
    GC_FREE;
}

void libxl_vnc_info_copy(libxl_ctx *ctx, libxl_vnc_info *dst, const libxl_vnc_info *src)
{
    GC_INIT(ctx);
    dst->enable = src->enable;
    libxl_string_copy(ctx, &dst->listen, &src->listen);
    libxl_string_copy(ctx, &dst->passwd, &src->passwd);
    dst->display = src->display;
    dst->findunused = src->findunused;
    GC_FREE;
}

void libxl_spice_info_copy(libxl_ctx *ctx, libxl_spice_info *dst, const libxl_spice_info *src)
{
    GC_INIT(ctx);
    dst->enable = src->enable;
    dst->port = src->port;
    dst->tls_port = src->tls_port;
    libxl_string_copy(ctx, &dst->host, &src->host);
    dst->disable_ticketing = src->disable_ticketing;
    libxl_string_copy(ctx, &dst->passwd, &src->passwd);
    dst->agent_mouse = src->agent_mouse;
    dst->vdagent = src->vdagent;
    dst->clipboard_sharing = src->clipboard_sharing;
    dst->usbredirection = src->usbredirection;
    libxl_string_copy(ctx, &dst->image_compression, &src->image_compression);
    libxl_string_copy(ctx, &dst->streaming_video, &src->streaming_video);
    GC_FREE;
}

void libxl_sdl_info_copy(libxl_ctx *ctx, libxl_sdl_info *dst, const libxl_sdl_info *src)
{
    GC_INIT(ctx);
    dst->enable = src->enable;
    dst->opengl = src->opengl;
    libxl_string_copy(ctx, &dst->display, &src->display);
    libxl_string_copy(ctx, &dst->xauthority, &src->xauthority);
    GC_FREE;
}

void libxl_dominfo_copy(libxl_ctx *ctx, libxl_dominfo *dst, const libxl_dominfo *src)
{
    GC_INIT(ctx);
    libxl_uuid_copy(ctx, &dst->uuid, &src->uuid);
    dst->domid = src->domid;
    dst->ssidref = src->ssidref;
    libxl_string_copy(ctx, &dst->ssid_label, &src->ssid_label);
    dst->running = src->running;
    dst->blocked = src->blocked;
    dst->paused = src->paused;
    dst->shutdown = src->shutdown;
    dst->dying = src->dying;
    dst->never_stop = src->never_stop;
    dst->shutdown_reason = src->shutdown_reason;
    dst->outstanding_memkb = src->outstanding_memkb;
    dst->current_memkb = src->current_memkb;
    dst->shared_memkb = src->shared_memkb;
    dst->paged_memkb = src->paged_memkb;
    dst->max_memkb = src->max_memkb;
    dst->cpu_time = src->cpu_time;
    dst->vcpu_max_id = src->vcpu_max_id;
    dst->vcpu_online = src->vcpu_online;
    dst->cpupool = src->cpupool;
    dst->domain_type = src->domain_type;
    GC_FREE;
}

void libxl_cpupoolinfo_copy(libxl_ctx *ctx, libxl_cpupoolinfo *dst, const libxl_cpupoolinfo *src)
{
    GC_INIT(ctx);
    dst->poolid = src->poolid;
    libxl_string_copy(ctx, &dst->pool_name, &src->pool_name);
    dst->sched = src->sched;
    dst->n_dom = src->n_dom;
    libxl_bitmap_copy_alloc(ctx, &dst->cpumap, &src->cpumap);
    GC_FREE;
}

void libxl_channelinfo_copy(libxl_ctx *ctx, libxl_channelinfo *dst, const libxl_channelinfo *src)
{
    GC_INIT(ctx);
    libxl_string_copy(ctx, &dst->backend, &src->backend);
    dst->backend_id = src->backend_id;
    libxl_string_copy(ctx, &dst->frontend, &src->frontend);
    dst->frontend_id = src->frontend_id;
    dst->devid = src->devid;
    dst->state = src->state;
    dst->evtch = src->evtch;
    dst->rref = src->rref;
    dst->connection = src->connection;
    switch (src->connection) {
    case LIBXL_CHANNEL_CONNECTION_UNKNOWN:
        break;
    case LIBXL_CHANNEL_CONNECTION_PTY:
        libxl_string_copy(ctx, &dst->u.pty.path, &src->u.pty.path);
        break;
    case LIBXL_CHANNEL_CONNECTION_SOCKET:
        break;
    }
    GC_FREE;
}

void libxl_vminfo_copy(libxl_ctx *ctx, libxl_vminfo *dst, const libxl_vminfo *src)
{
    GC_INIT(ctx);
    libxl_uuid_copy(ctx, &dst->uuid, &src->uuid);
    dst->domid = src->domid;
    GC_FREE;
}

void libxl_version_info_copy(libxl_ctx *ctx, libxl_version_info *dst, const libxl_version_info *src)
{
    GC_INIT(ctx);
    dst->xen_version_major = src->xen_version_major;
    dst->xen_version_minor = src->xen_version_minor;
    libxl_string_copy(ctx, &dst->xen_version_extra, &src->xen_version_extra);
    libxl_string_copy(ctx, &dst->compiler, &src->compiler);
    libxl_string_copy(ctx, &dst->compile_by, &src->compile_by);
    libxl_string_copy(ctx, &dst->compile_domain, &src->compile_domain);
    libxl_string_copy(ctx, &dst->compile_date, &src->compile_date);
    libxl_string_copy(ctx, &dst->capabilities, &src->capabilities);
    libxl_string_copy(ctx, &dst->changeset, &src->changeset);
    dst->virt_start = src->virt_start;
    dst->pagesize = src->pagesize;
    libxl_string_copy(ctx, &dst->commandline, &src->commandline);
    libxl_string_copy(ctx, &dst->build_id, &src->build_id);
    GC_FREE;
}

void libxl_domain_create_info_copy(libxl_ctx *ctx, libxl_domain_create_info *dst, const libxl_domain_create_info *src)
{
    GC_INIT(ctx);
    dst->type = src->type;
    dst->hap = src->hap;
    dst->oos = src->oos;
    dst->ssidref = src->ssidref;
    libxl_string_copy(ctx, &dst->ssid_label, &src->ssid_label);
    libxl_string_copy(ctx, &dst->name, &src->name);
    libxl_uuid_copy(ctx, &dst->uuid, &src->uuid);
    libxl_key_value_list_copy(ctx, &dst->xsdata, &src->xsdata);
    libxl_key_value_list_copy(ctx, &dst->platformdata, &src->platformdata);
    dst->poolid = src->poolid;
    libxl_string_copy(ctx, &dst->pool_name, &src->pool_name);
    dst->run_hotplug_scripts = src->run_hotplug_scripts;
    dst->driver_domain = src->driver_domain;
    GC_FREE;
}

void libxl_domain_restore_params_copy(libxl_ctx *ctx, libxl_domain_restore_params *dst, const libxl_domain_restore_params *src)
{
    GC_INIT(ctx);
    dst->checkpointed_stream = src->checkpointed_stream;
    dst->stream_version = src->stream_version;
    libxl_string_copy(ctx, &dst->colo_proxy_script, &src->colo_proxy_script);
    dst->userspace_colo_proxy = src->userspace_colo_proxy;
    GC_FREE;
}

void libxl_sched_params_copy(libxl_ctx *ctx, libxl_sched_params *dst, const libxl_sched_params *src)
{
    GC_INIT(ctx);
    dst->vcpuid = src->vcpuid;
    dst->weight = src->weight;
    dst->cap = src->cap;
    dst->period = src->period;
    dst->extratime = src->extratime;
    dst->budget = src->budget;
    GC_FREE;
}

void libxl_vcpu_sched_params_copy(libxl_ctx *ctx, libxl_vcpu_sched_params *dst, const libxl_vcpu_sched_params *src)
{
    GC_INIT(ctx);
    dst->sched = src->sched;
    dst->vcpus = libxl__calloc(NOGC, src->num_vcpus, sizeof(*src->vcpus));
    dst->num_vcpus = src->num_vcpus;
    {
        int i;
        for (i=0; i<src->num_vcpus; i++)
            libxl_sched_params_copy(ctx, &dst->vcpus[i], &src->vcpus[i]);
    }
    GC_FREE;
}

void libxl_domain_sched_params_copy(libxl_ctx *ctx, libxl_domain_sched_params *dst, const libxl_domain_sched_params *src)
{
    GC_INIT(ctx);
    dst->sched = src->sched;
    dst->weight = src->weight;
    dst->cap = src->cap;
    dst->period = src->period;
    dst->budget = src->budget;
    dst->extratime = src->extratime;
    dst->slice = src->slice;
    dst->latency = src->latency;
    GC_FREE;
}

void libxl_vnode_info_copy(libxl_ctx *ctx, libxl_vnode_info *dst, const libxl_vnode_info *src)
{
    GC_INIT(ctx);
    dst->memkb = src->memkb;
    dst->distances = libxl__calloc(NOGC, src->num_distances, sizeof(*src->distances));
    dst->num_distances = src->num_distances;
    {
        int i;
        for (i=0; i<src->num_distances; i++)
            dst->distances[i] = src->distances[i];
    }
    dst->pnode = src->pnode;
    libxl_bitmap_copy_alloc(ctx, &dst->vcpus, &src->vcpus);
    GC_FREE;
}

void libxl_rdm_reserve_copy(libxl_ctx *ctx, libxl_rdm_reserve *dst, const libxl_rdm_reserve *src)
{
    GC_INIT(ctx);
    dst->strategy = src->strategy;
    dst->policy = src->policy;
    GC_FREE;
}

void libxl_domain_build_info_copy(libxl_ctx *ctx, libxl_domain_build_info *dst, const libxl_domain_build_info *src)
{
    GC_INIT(ctx);
    dst->max_vcpus = src->max_vcpus;
    libxl_bitmap_copy_alloc(ctx, &dst->avail_vcpus, &src->avail_vcpus);
    libxl_bitmap_copy_alloc(ctx, &dst->cpumap, &src->cpumap);
    libxl_bitmap_copy_alloc(ctx, &dst->nodemap, &src->nodemap);
    dst->vcpu_hard_affinity = libxl__calloc(NOGC, src->num_vcpu_hard_affinity, sizeof(*src->vcpu_hard_affinity));
    dst->num_vcpu_hard_affinity = src->num_vcpu_hard_affinity;
    {
        int i;
        for (i=0; i<src->num_vcpu_hard_affinity; i++)
            libxl_bitmap_copy_alloc(ctx, &dst->vcpu_hard_affinity[i], &src->vcpu_hard_affinity[i]);
    }
    dst->vcpu_soft_affinity = libxl__calloc(NOGC, src->num_vcpu_soft_affinity, sizeof(*src->vcpu_soft_affinity));
    dst->num_vcpu_soft_affinity = src->num_vcpu_soft_affinity;
    {
        int i;
        for (i=0; i<src->num_vcpu_soft_affinity; i++)
            libxl_bitmap_copy_alloc(ctx, &dst->vcpu_soft_affinity[i], &src->vcpu_soft_affinity[i]);
    }
    dst->numa_placement = src->numa_placement;
    dst->tsc_mode = src->tsc_mode;
    dst->max_memkb = src->max_memkb;
    dst->target_memkb = src->target_memkb;
    dst->video_memkb = src->video_memkb;
    dst->shadow_memkb = src->shadow_memkb;
    dst->rtc_timeoffset = src->rtc_timeoffset;
    dst->exec_ssidref = src->exec_ssidref;
    libxl_string_copy(ctx, &dst->exec_ssid_label, &src->exec_ssid_label);
    dst->localtime = src->localtime;
    dst->disable_migrate = src->disable_migrate;
    libxl_cpuid_policy_list_copy(ctx, &dst->cpuid, &src->cpuid);
    libxl_string_copy(ctx, &dst->blkdev_start, &src->blkdev_start);
    dst->vnuma_nodes = libxl__calloc(NOGC, src->num_vnuma_nodes, sizeof(*src->vnuma_nodes));
    dst->num_vnuma_nodes = src->num_vnuma_nodes;
    {
        int i;
        for (i=0; i<src->num_vnuma_nodes; i++)
            libxl_vnode_info_copy(ctx, &dst->vnuma_nodes[i], &src->vnuma_nodes[i]);
    }
    dst->max_grant_frames = src->max_grant_frames;
    dst->max_maptrack_frames = src->max_maptrack_frames;
    dst->device_model_version = src->device_model_version;
    dst->device_model_stubdomain = src->device_model_stubdomain;
    libxl_string_copy(ctx, &dst->device_model, &src->device_model);
    dst->device_model_ssidref = src->device_model_ssidref;
    libxl_string_copy(ctx, &dst->device_model_ssid_label, &src->device_model_ssid_label);
    libxl_string_copy(ctx, &dst->device_model_user, &src->device_model_user);
    libxl_string_list_copy(ctx, &dst->extra, &src->extra);
    libxl_string_list_copy(ctx, &dst->extra_pv, &src->extra_pv);
    libxl_string_list_copy(ctx, &dst->extra_hvm, &src->extra_hvm);
    libxl_domain_sched_params_copy(ctx, &dst->sched_params, &src->sched_params);
    dst->ioports = libxl__calloc(NOGC, src->num_ioports, sizeof(*src->ioports));
    dst->num_ioports = src->num_ioports;
    {
        int i;
        for (i=0; i<src->num_ioports; i++)
            libxl_ioport_range_copy(ctx, &dst->ioports[i], &src->ioports[i]);
    }
    dst->irqs = libxl__calloc(NOGC, src->num_irqs, sizeof(*src->irqs));
    dst->num_irqs = src->num_irqs;
    {
        int i;
        for (i=0; i<src->num_irqs; i++)
            dst->irqs[i] = src->irqs[i];
    }
    dst->iomem = libxl__calloc(NOGC, src->num_iomem, sizeof(*src->iomem));
    dst->num_iomem = src->num_iomem;
    {
        int i;
        for (i=0; i<src->num_iomem; i++)
            libxl_iomem_range_copy(ctx, &dst->iomem[i], &src->iomem[i]);
    }
    dst->claim_mode = src->claim_mode;
    dst->event_channels = src->event_channels;
    libxl_string_copy(ctx, &dst->kernel, &src->kernel);
    libxl_string_copy(ctx, &dst->cmdline, &src->cmdline);
    libxl_string_copy(ctx, &dst->ramdisk, &src->ramdisk);
    libxl_string_copy(ctx, &dst->device_tree, &src->device_tree);
    dst->acpi = src->acpi;
    libxl_string_copy(ctx, &dst->bootloader, &src->bootloader);
    libxl_string_list_copy(ctx, &dst->bootloader_args, &src->bootloader_args);
    dst->timer_mode = src->timer_mode;
    dst->nested_hvm = src->nested_hvm;
    dst->apic = src->apic;
    dst->dm_restrict = src->dm_restrict;
    dst->type = src->type;
    switch (src->type) {
    case LIBXL_DOMAIN_TYPE_HVM:
        libxl_string_copy(ctx, &dst->u.hvm.firmware, &src->u.hvm.firmware);
        dst->u.hvm.bios = src->u.hvm.bios;
        dst->u.hvm.pae = src->u.hvm.pae;
        dst->u.hvm.apic = src->u.hvm.apic;
        dst->u.hvm.acpi = src->u.hvm.acpi;
        dst->u.hvm.acpi_s3 = src->u.hvm.acpi_s3;
        dst->u.hvm.acpi_s4 = src->u.hvm.acpi_s4;
        dst->u.hvm.acpi_laptop_slate = src->u.hvm.acpi_laptop_slate;
        dst->u.hvm.nx = src->u.hvm.nx;
        dst->u.hvm.viridian = src->u.hvm.viridian;
        libxl_bitmap_copy_alloc(ctx, &dst->u.hvm.viridian_enable, &src->u.hvm.viridian_enable);
        libxl_bitmap_copy_alloc(ctx, &dst->u.hvm.viridian_disable, &src->u.hvm.viridian_disable);
        libxl_string_copy(ctx, &dst->u.hvm.timeoffset, &src->u.hvm.timeoffset);
        dst->u.hvm.hpet = src->u.hvm.hpet;
        dst->u.hvm.vpt_align = src->u.hvm.vpt_align;
        dst->u.hvm.mmio_hole_memkb = src->u.hvm.mmio_hole_memkb;
        dst->u.hvm.timer_mode = src->u.hvm.timer_mode;
        dst->u.hvm.nested_hvm = src->u.hvm.nested_hvm;
        dst->u.hvm.altp2m = src->u.hvm.altp2m;
        libxl_string_copy(ctx, &dst->u.hvm.system_firmware, &src->u.hvm.system_firmware);
        libxl_string_copy(ctx, &dst->u.hvm.smbios_firmware, &src->u.hvm.smbios_firmware);
        libxl_string_copy(ctx, &dst->u.hvm.acpi_firmware, &src->u.hvm.acpi_firmware);
        dst->u.hvm.hdtype = src->u.hvm.hdtype;
        dst->u.hvm.nographic = src->u.hvm.nographic;
        libxl_vga_interface_info_copy(ctx, &dst->u.hvm.vga, &src->u.hvm.vga);
        libxl_vnc_info_copy(ctx, &dst->u.hvm.vnc, &src->u.hvm.vnc);
        libxl_string_copy(ctx, &dst->u.hvm.keymap, &src->u.hvm.keymap);
        libxl_sdl_info_copy(ctx, &dst->u.hvm.sdl, &src->u.hvm.sdl);
        libxl_spice_info_copy(ctx, &dst->u.hvm.spice, &src->u.hvm.spice);
        dst->u.hvm.gfx_passthru = src->u.hvm.gfx_passthru;
        dst->u.hvm.gfx_passthru_kind = src->u.hvm.gfx_passthru_kind;
        libxl_string_copy(ctx, &dst->u.hvm.serial, &src->u.hvm.serial);
        libxl_string_copy(ctx, &dst->u.hvm.boot, &src->u.hvm.boot);
        dst->u.hvm.usb = src->u.hvm.usb;
        dst->u.hvm.usbversion = src->u.hvm.usbversion;
        libxl_string_copy(ctx, &dst->u.hvm.usbdevice, &src->u.hvm.usbdevice);
        libxl_string_copy(ctx, &dst->u.hvm.soundhw, &src->u.hvm.soundhw);
        dst->u.hvm.xen_platform_pci = src->u.hvm.xen_platform_pci;
        libxl_string_list_copy(ctx, &dst->u.hvm.usbdevice_list, &src->u.hvm.usbdevice_list);
        dst->u.hvm.vendor_device = src->u.hvm.vendor_device;
        libxl_ms_vm_genid_copy(ctx, &dst->u.hvm.ms_vm_genid, &src->u.hvm.ms_vm_genid);
        libxl_string_list_copy(ctx, &dst->u.hvm.serial_list, &src->u.hvm.serial_list);
        libxl_rdm_reserve_copy(ctx, &dst->u.hvm.rdm, &src->u.hvm.rdm);
        dst->u.hvm.rdm_mem_boundary_memkb = src->u.hvm.rdm_mem_boundary_memkb;
        dst->u.hvm.mca_caps = src->u.hvm.mca_caps;
        break;
    case LIBXL_DOMAIN_TYPE_PV:
        libxl_string_copy(ctx, &dst->u.pv.kernel, &src->u.pv.kernel);
        dst->u.pv.slack_memkb = src->u.pv.slack_memkb;
        libxl_string_copy(ctx, &dst->u.pv.bootloader, &src->u.pv.bootloader);
        libxl_string_list_copy(ctx, &dst->u.pv.bootloader_args, &src->u.pv.bootloader_args);
        libxl_string_copy(ctx, &dst->u.pv.cmdline, &src->u.pv.cmdline);
        libxl_string_copy(ctx, &dst->u.pv.ramdisk, &src->u.pv.ramdisk);
        dst->u.pv.e820_host = src->u.pv.e820_host;
        break;
    case LIBXL_DOMAIN_TYPE_PVH:
        break;
    case LIBXL_DOMAIN_TYPE_INVALID:
        break;
    }
    dst->arch_arm.gic_version = src->arch_arm.gic_version;
    dst->arch_arm.vuart = src->arch_arm.vuart;
    dst->altp2m = src->altp2m;
    GC_FREE;
}

void libxl_device_vfb_copy(libxl_ctx *ctx, libxl_device_vfb *dst, const libxl_device_vfb *src)
{
    GC_INIT(ctx);
    dst->backend_domid = src->backend_domid;
    libxl_string_copy(ctx, &dst->backend_domname, &src->backend_domname);
    dst->devid = src->devid;
    libxl_vnc_info_copy(ctx, &dst->vnc, &src->vnc);
    libxl_sdl_info_copy(ctx, &dst->sdl, &src->sdl);
    libxl_string_copy(ctx, &dst->keymap, &src->keymap);
    GC_FREE;
}

void libxl_device_vkb_copy(libxl_ctx *ctx, libxl_device_vkb *dst, const libxl_device_vkb *src)
{
    GC_INIT(ctx);
    dst->backend_domid = src->backend_domid;
    libxl_string_copy(ctx, &dst->backend_domname, &src->backend_domname);
    dst->devid = src->devid;
    GC_FREE;
}

void libxl_device_disk_copy(libxl_ctx *ctx, libxl_device_disk *dst, const libxl_device_disk *src)
{
    GC_INIT(ctx);
    dst->backend_domid = src->backend_domid;
    libxl_string_copy(ctx, &dst->backend_domname, &src->backend_domname);
    libxl_string_copy(ctx, &dst->pdev_path, &src->pdev_path);
    libxl_string_copy(ctx, &dst->vdev, &src->vdev);
    dst->backend = src->backend;
    dst->format = src->format;
    libxl_string_copy(ctx, &dst->script, &src->script);
    dst->removable = src->removable;
    dst->readwrite = src->readwrite;
    dst->is_cdrom = src->is_cdrom;
    dst->direct_io_safe = src->direct_io_safe;
    dst->discard_enable = src->discard_enable;
    dst->colo_enable = src->colo_enable;
    dst->colo_restore_enable = src->colo_restore_enable;
    libxl_string_copy(ctx, &dst->colo_host, &src->colo_host);
    dst->colo_port = src->colo_port;
    libxl_string_copy(ctx, &dst->colo_export, &src->colo_export);
    libxl_string_copy(ctx, &dst->active_disk, &src->active_disk);
    libxl_string_copy(ctx, &dst->hidden_disk, &src->hidden_disk);
    GC_FREE;
}

void libxl_device_nic_copy(libxl_ctx *ctx, libxl_device_nic *dst, const libxl_device_nic *src)
{
    GC_INIT(ctx);
    dst->backend_domid = src->backend_domid;
    libxl_string_copy(ctx, &dst->backend_domname, &src->backend_domname);
    dst->devid = src->devid;
    dst->mtu = src->mtu;
    libxl_string_copy(ctx, &dst->model, &src->model);
    libxl_mac_copy(ctx, &dst->mac, &src->mac);
    libxl_string_copy(ctx, &dst->ip, &src->ip);
    libxl_string_copy(ctx, &dst->bridge, &src->bridge);
    libxl_string_copy(ctx, &dst->ifname, &src->ifname);
    libxl_string_copy(ctx, &dst->script, &src->script);
    dst->nictype = src->nictype;
    dst->rate_bytes_per_interval = src->rate_bytes_per_interval;
    dst->rate_interval_usecs = src->rate_interval_usecs;
    libxl_string_copy(ctx, &dst->gatewaydev, &src->gatewaydev);
    libxl_string_copy(ctx, &dst->coloft_forwarddev, &src->coloft_forwarddev);
    libxl_string_copy(ctx, &dst->colo_sock_mirror_id, &src->colo_sock_mirror_id);
    libxl_string_copy(ctx, &dst->colo_sock_mirror_ip, &src->colo_sock_mirror_ip);
    libxl_string_copy(ctx, &dst->colo_sock_mirror_port, &src->colo_sock_mirror_port);
    libxl_string_copy(ctx, &dst->colo_sock_compare_pri_in_id, &src->colo_sock_compare_pri_in_id);
    libxl_string_copy(ctx, &dst->colo_sock_compare_pri_in_ip, &src->colo_sock_compare_pri_in_ip);
    libxl_string_copy(ctx, &dst->colo_sock_compare_pri_in_port, &src->colo_sock_compare_pri_in_port);
    libxl_string_copy(ctx, &dst->colo_sock_compare_sec_in_id, &src->colo_sock_compare_sec_in_id);
    libxl_string_copy(ctx, &dst->colo_sock_compare_sec_in_ip, &src->colo_sock_compare_sec_in_ip);
    libxl_string_copy(ctx, &dst->colo_sock_compare_sec_in_port, &src->colo_sock_compare_sec_in_port);
    libxl_string_copy(ctx, &dst->colo_sock_compare_notify_id, &src->colo_sock_compare_notify_id);
    libxl_string_copy(ctx, &dst->colo_sock_compare_notify_ip, &src->colo_sock_compare_notify_ip);
    libxl_string_copy(ctx, &dst->colo_sock_compare_notify_port, &src->colo_sock_compare_notify_port);
    libxl_string_copy(ctx, &dst->colo_sock_redirector0_id, &src->colo_sock_redirector0_id);
    libxl_string_copy(ctx, &dst->colo_sock_redirector0_ip, &src->colo_sock_redirector0_ip);
    libxl_string_copy(ctx, &dst->colo_sock_redirector0_port, &src->colo_sock_redirector0_port);
    libxl_string_copy(ctx, &dst->colo_sock_redirector1_id, &src->colo_sock_redirector1_id);
    libxl_string_copy(ctx, &dst->colo_sock_redirector1_ip, &src->colo_sock_redirector1_ip);
    libxl_string_copy(ctx, &dst->colo_sock_redirector1_port, &src->colo_sock_redirector1_port);
    libxl_string_copy(ctx, &dst->colo_sock_redirector2_id, &src->colo_sock_redirector2_id);
    libxl_string_copy(ctx, &dst->colo_sock_redirector2_ip, &src->colo_sock_redirector2_ip);
    libxl_string_copy(ctx, &dst->colo_sock_redirector2_port, &src->colo_sock_redirector2_port);
    libxl_string_copy(ctx, &dst->colo_filter_mirror_queue, &src->colo_filter_mirror_queue);
    libxl_string_copy(ctx, &dst->colo_filter_mirror_outdev, &src->colo_filter_mirror_outdev);
    libxl_string_copy(ctx, &dst->colo_filter_redirector0_queue, &src->colo_filter_redirector0_queue);
    libxl_string_copy(ctx, &dst->colo_filter_redirector0_indev, &src->colo_filter_redirector0_indev);
    libxl_string_copy(ctx, &dst->colo_filter_redirector0_outdev, &src->colo_filter_redirector0_outdev);
    libxl_string_copy(ctx, &dst->colo_filter_redirector1_queue, &src->colo_filter_redirector1_queue);
    libxl_string_copy(ctx, &dst->colo_filter_redirector1_indev, &src->colo_filter_redirector1_indev);
    libxl_string_copy(ctx, &dst->colo_filter_redirector1_outdev, &src->colo_filter_redirector1_outdev);
    libxl_string_copy(ctx, &dst->colo_compare_pri_in, &src->colo_compare_pri_in);
    libxl_string_copy(ctx, &dst->colo_compare_sec_in, &src->colo_compare_sec_in);
    libxl_string_copy(ctx, &dst->colo_compare_out, &src->colo_compare_out);
    libxl_string_copy(ctx, &dst->colo_compare_notify_dev, &src->colo_compare_notify_dev);
    libxl_string_copy(ctx, &dst->colo_sock_sec_redirector0_id, &src->colo_sock_sec_redirector0_id);
    libxl_string_copy(ctx, &dst->colo_sock_sec_redirector0_ip, &src->colo_sock_sec_redirector0_ip);
    libxl_string_copy(ctx, &dst->colo_sock_sec_redirector0_port, &src->colo_sock_sec_redirector0_port);
    libxl_string_copy(ctx, &dst->colo_sock_sec_redirector1_id, &src->colo_sock_sec_redirector1_id);
    libxl_string_copy(ctx, &dst->colo_sock_sec_redirector1_ip, &src->colo_sock_sec_redirector1_ip);
    libxl_string_copy(ctx, &dst->colo_sock_sec_redirector1_port, &src->colo_sock_sec_redirector1_port);
    libxl_string_copy(ctx, &dst->colo_filter_sec_redirector0_queue, &src->colo_filter_sec_redirector0_queue);
    libxl_string_copy(ctx, &dst->colo_filter_sec_redirector0_indev, &src->colo_filter_sec_redirector0_indev);
    libxl_string_copy(ctx, &dst->colo_filter_sec_redirector0_outdev, &src->colo_filter_sec_redirector0_outdev);
    libxl_string_copy(ctx, &dst->colo_filter_sec_redirector1_queue, &src->colo_filter_sec_redirector1_queue);
    libxl_string_copy(ctx, &dst->colo_filter_sec_redirector1_indev, &src->colo_filter_sec_redirector1_indev);
    libxl_string_copy(ctx, &dst->colo_filter_sec_redirector1_outdev, &src->colo_filter_sec_redirector1_outdev);
    libxl_string_copy(ctx, &dst->colo_filter_sec_rewriter0_queue, &src->colo_filter_sec_rewriter0_queue);
    libxl_string_copy(ctx, &dst->colo_checkpoint_host, &src->colo_checkpoint_host);
    libxl_string_copy(ctx, &dst->colo_checkpoint_port, &src->colo_checkpoint_port);
    GC_FREE;
}

void libxl_device_pci_copy(libxl_ctx *ctx, libxl_device_pci *dst, const libxl_device_pci *src)
{
    GC_INIT(ctx);
    dst->func = src->func;
    dst->dev = src->dev;
    dst->bus = src->bus;
    dst->domain = src->domain;
    dst->vdevfn = src->vdevfn;
    dst->vfunc_mask = src->vfunc_mask;
    dst->msitranslate = src->msitranslate;
    dst->power_mgmt = src->power_mgmt;
    dst->permissive = src->permissive;
    dst->seize = src->seize;
    dst->rdm_policy = src->rdm_policy;
    GC_FREE;
}

void libxl_device_rdm_copy(libxl_ctx *ctx, libxl_device_rdm *dst, const libxl_device_rdm *src)
{
    GC_INIT(ctx);
    dst->start = src->start;
    dst->size = src->size;
    dst->policy = src->policy;
    GC_FREE;
}

void libxl_device_usbctrl_copy(libxl_ctx *ctx, libxl_device_usbctrl *dst, const libxl_device_usbctrl *src)
{
    GC_INIT(ctx);
    dst->type = src->type;
    dst->devid = src->devid;
    dst->version = src->version;
    dst->ports = src->ports;
    dst->backend_domid = src->backend_domid;
    libxl_string_copy(ctx, &dst->backend_domname, &src->backend_domname);
    GC_FREE;
}

void libxl_device_usbdev_copy(libxl_ctx *ctx, libxl_device_usbdev *dst, const libxl_device_usbdev *src)
{
    GC_INIT(ctx);
    dst->ctrl = src->ctrl;
    dst->port = src->port;
    dst->type = src->type;
    switch (src->type) {
    case LIBXL_USBDEV_TYPE_HOSTDEV:
        dst->u.hostdev.hostbus = src->u.hostdev.hostbus;
        dst->u.hostdev.hostaddr = src->u.hostdev.hostaddr;
        break;
    }
    GC_FREE;
}

void libxl_device_dtdev_copy(libxl_ctx *ctx, libxl_device_dtdev *dst, const libxl_device_dtdev *src)
{
    GC_INIT(ctx);
    libxl_string_copy(ctx, &dst->path, &src->path);
    GC_FREE;
}

void libxl_device_vtpm_copy(libxl_ctx *ctx, libxl_device_vtpm *dst, const libxl_device_vtpm *src)
{
    GC_INIT(ctx);
    dst->backend_domid = src->backend_domid;
    libxl_string_copy(ctx, &dst->backend_domname, &src->backend_domname);
    dst->devid = src->devid;
    libxl_uuid_copy(ctx, &dst->uuid, &src->uuid);
    GC_FREE;
}

void libxl_device_p9_copy(libxl_ctx *ctx, libxl_device_p9 *dst, const libxl_device_p9 *src)
{
    GC_INIT(ctx);
    dst->backend_domid = src->backend_domid;
    libxl_string_copy(ctx, &dst->backend_domname, &src->backend_domname);
    libxl_string_copy(ctx, &dst->tag, &src->tag);
    libxl_string_copy(ctx, &dst->path, &src->path);
    libxl_string_copy(ctx, &dst->security_model, &src->security_model);
    dst->devid = src->devid;
    GC_FREE;
}

void libxl_device_channel_copy(libxl_ctx *ctx, libxl_device_channel *dst, const libxl_device_channel *src)
{
    GC_INIT(ctx);
    dst->backend_domid = src->backend_domid;
    libxl_string_copy(ctx, &dst->backend_domname, &src->backend_domname);
    dst->devid = src->devid;
    libxl_string_copy(ctx, &dst->name, &src->name);
    dst->connection = src->connection;
    switch (src->connection) {
    case LIBXL_CHANNEL_CONNECTION_UNKNOWN:
        break;
    case LIBXL_CHANNEL_CONNECTION_PTY:
        break;
    case LIBXL_CHANNEL_CONNECTION_SOCKET:
        libxl_string_copy(ctx, &dst->u.socket.path, &src->u.socket.path);
        break;
    }
    GC_FREE;
}

void libxl_connector_param_copy(libxl_ctx *ctx, libxl_connector_param *dst, const libxl_connector_param *src)
{
    GC_INIT(ctx);
    libxl_string_copy(ctx, &dst->id, &src->id);
    dst->width = src->width;
    dst->height = src->height;
    GC_FREE;
}

void libxl_device_vdispl_copy(libxl_ctx *ctx, libxl_device_vdispl *dst, const libxl_device_vdispl *src)
{
    GC_INIT(ctx);
    dst->backend_domid = src->backend_domid;
    libxl_string_copy(ctx, &dst->backend_domname, &src->backend_domname);
    dst->devid = src->devid;
    dst->be_alloc = src->be_alloc;
    dst->connectors = libxl__calloc(NOGC, src->num_connectors, sizeof(*src->connectors));
    dst->num_connectors = src->num_connectors;
    {
        int i;
        for (i=0; i<src->num_connectors; i++)
            libxl_connector_param_copy(ctx, &dst->connectors[i], &src->connectors[i]);
    }
    GC_FREE;
}

void libxl_domain_config_copy(libxl_ctx *ctx, libxl_domain_config *dst, const libxl_domain_config *src)
{
    GC_INIT(ctx);
    libxl_domain_create_info_copy(ctx, &dst->c_info, &src->c_info);
    libxl_domain_build_info_copy(ctx, &dst->b_info, &src->b_info);
    dst->disks = libxl__calloc(NOGC, src->num_disks, sizeof(*src->disks));
    dst->num_disks = src->num_disks;
    {
        int i;
        for (i=0; i<src->num_disks; i++)
            libxl_device_disk_copy(ctx, &dst->disks[i], &src->disks[i]);
    }
    dst->nics = libxl__calloc(NOGC, src->num_nics, sizeof(*src->nics));
    dst->num_nics = src->num_nics;
    {
        int i;
        for (i=0; i<src->num_nics; i++)
            libxl_device_nic_copy(ctx, &dst->nics[i], &src->nics[i]);
    }
    dst->pcidevs = libxl__calloc(NOGC, src->num_pcidevs, sizeof(*src->pcidevs));
    dst->num_pcidevs = src->num_pcidevs;
    {
        int i;
        for (i=0; i<src->num_pcidevs; i++)
            libxl_device_pci_copy(ctx, &dst->pcidevs[i], &src->pcidevs[i]);
    }
    dst->rdms = libxl__calloc(NOGC, src->num_rdms, sizeof(*src->rdms));
    dst->num_rdms = src->num_rdms;
    {
        int i;
        for (i=0; i<src->num_rdms; i++)
            libxl_device_rdm_copy(ctx, &dst->rdms[i], &src->rdms[i]);
    }
    dst->dtdevs = libxl__calloc(NOGC, src->num_dtdevs, sizeof(*src->dtdevs));
    dst->num_dtdevs = src->num_dtdevs;
    {
        int i;
        for (i=0; i<src->num_dtdevs; i++)
            libxl_device_dtdev_copy(ctx, &dst->dtdevs[i], &src->dtdevs[i]);
    }
    dst->vfbs = libxl__calloc(NOGC, src->num_vfbs, sizeof(*src->vfbs));
    dst->num_vfbs = src->num_vfbs;
    {
        int i;
        for (i=0; i<src->num_vfbs; i++)
            libxl_device_vfb_copy(ctx, &dst->vfbs[i], &src->vfbs[i]);
    }
    dst->vkbs = libxl__calloc(NOGC, src->num_vkbs, sizeof(*src->vkbs));
    dst->num_vkbs = src->num_vkbs;
    {
        int i;
        for (i=0; i<src->num_vkbs; i++)
            libxl_device_vkb_copy(ctx, &dst->vkbs[i], &src->vkbs[i]);
    }
    dst->vtpms = libxl__calloc(NOGC, src->num_vtpms, sizeof(*src->vtpms));
    dst->num_vtpms = src->num_vtpms;
    {
        int i;
        for (i=0; i<src->num_vtpms; i++)
            libxl_device_vtpm_copy(ctx, &dst->vtpms[i], &src->vtpms[i]);
    }
    dst->p9s = libxl__calloc(NOGC, src->num_p9s, sizeof(*src->p9s));
    dst->num_p9s = src->num_p9s;
    {
        int i;
        for (i=0; i<src->num_p9s; i++)
            libxl_device_p9_copy(ctx, &dst->p9s[i], &src->p9s[i]);
    }
    dst->vdispls = libxl__calloc(NOGC, src->num_vdispls, sizeof(*src->vdispls));
    dst->num_vdispls = src->num_vdispls;
    {
        int i;
        for (i=0; i<src->num_vdispls; i++)
            libxl_device_vdispl_copy(ctx, &dst->vdispls[i], &src->vdispls[i]);
    }
    dst->channels = libxl__calloc(NOGC, src->num_channels, sizeof(*src->channels));
    dst->num_channels = src->num_channels;
    {
        int i;
        for (i=0; i<src->num_channels; i++)
            libxl_device_channel_copy(ctx, &dst->channels[i], &src->channels[i]);
    }
    dst->usbctrls = libxl__calloc(NOGC, src->num_usbctrls, sizeof(*src->usbctrls));
    dst->num_usbctrls = src->num_usbctrls;
    {
        int i;
        for (i=0; i<src->num_usbctrls; i++)
            libxl_device_usbctrl_copy(ctx, &dst->usbctrls[i], &src->usbctrls[i]);
    }
    dst->usbdevs = libxl__calloc(NOGC, src->num_usbdevs, sizeof(*src->usbdevs));
    dst->num_usbdevs = src->num_usbdevs;
    {
        int i;
        for (i=0; i<src->num_usbdevs; i++)
            libxl_device_usbdev_copy(ctx, &dst->usbdevs[i], &src->usbdevs[i]);
    }
    dst->on_poweroff = src->on_poweroff;
    dst->on_reboot = src->on_reboot;
    dst->on_watchdog = src->on_watchdog;
    dst->on_crash = src->on_crash;
    dst->on_soft_reset = src->on_soft_reset;
    GC_FREE;
}

void libxl_diskinfo_copy(libxl_ctx *ctx, libxl_diskinfo *dst, const libxl_diskinfo *src)
{
    GC_INIT(ctx);
    libxl_string_copy(ctx, &dst->backend, &src->backend);
    dst->backend_id = src->backend_id;
    libxl_string_copy(ctx, &dst->frontend, &src->frontend);
    dst->frontend_id = src->frontend_id;
    dst->devid = src->devid;
    dst->state = src->state;
    dst->evtch = src->evtch;
    dst->rref = src->rref;
    GC_FREE;
}

void libxl_nicinfo_copy(libxl_ctx *ctx, libxl_nicinfo *dst, const libxl_nicinfo *src)
{
    GC_INIT(ctx);
    libxl_string_copy(ctx, &dst->backend, &src->backend);
    dst->backend_id = src->backend_id;
    libxl_string_copy(ctx, &dst->frontend, &src->frontend);
    dst->frontend_id = src->frontend_id;
    dst->devid = src->devid;
    dst->state = src->state;
    dst->evtch = src->evtch;
    dst->rref_tx = src->rref_tx;
    dst->rref_rx = src->rref_rx;
    GC_FREE;
}

void libxl_vtpminfo_copy(libxl_ctx *ctx, libxl_vtpminfo *dst, const libxl_vtpminfo *src)
{
    GC_INIT(ctx);
    libxl_string_copy(ctx, &dst->backend, &src->backend);
    dst->backend_id = src->backend_id;
    libxl_string_copy(ctx, &dst->frontend, &src->frontend);
    dst->frontend_id = src->frontend_id;
    dst->devid = src->devid;
    dst->state = src->state;
    dst->evtch = src->evtch;
    dst->rref = src->rref;
    libxl_uuid_copy(ctx, &dst->uuid, &src->uuid);
    GC_FREE;
}

void libxl_usbctrlinfo_copy(libxl_ctx *ctx, libxl_usbctrlinfo *dst, const libxl_usbctrlinfo *src)
{
    GC_INIT(ctx);
    dst->type = src->type;
    dst->devid = src->devid;
    dst->version = src->version;
    dst->ports = src->ports;
    libxl_string_copy(ctx, &dst->backend, &src->backend);
    dst->backend_id = src->backend_id;
    libxl_string_copy(ctx, &dst->frontend, &src->frontend);
    dst->frontend_id = src->frontend_id;
    dst->state = src->state;
    dst->evtch = src->evtch;
    dst->ref_urb = src->ref_urb;
    dst->ref_conn = src->ref_conn;
    GC_FREE;
}

void libxl_vcpuinfo_copy(libxl_ctx *ctx, libxl_vcpuinfo *dst, const libxl_vcpuinfo *src)
{
    GC_INIT(ctx);
    dst->vcpuid = src->vcpuid;
    dst->cpu = src->cpu;
    dst->online = src->online;
    dst->blocked = src->blocked;
    dst->running = src->running;
    dst->vcpu_time = src->vcpu_time;
    libxl_bitmap_copy_alloc(ctx, &dst->cpumap, &src->cpumap);
    libxl_bitmap_copy_alloc(ctx, &dst->cpumap_soft, &src->cpumap_soft);
    GC_FREE;
}

void libxl_physinfo_copy(libxl_ctx *ctx, libxl_physinfo *dst, const libxl_physinfo *src)
{
    GC_INIT(ctx);
    dst->domain_unpriv = src->domain_unpriv;
    dst->threads_per_core = src->threads_per_core;
    dst->cores_per_socket = src->cores_per_socket;
    dst->max_cpu_id = src->max_cpu_id;
    dst->nr_cpus = src->nr_cpus;
    dst->cpu_khz = src->cpu_khz;
    dst->total_pages = src->total_pages;
    dst->free_pages = src->free_pages;
    dst->scrub_pages = src->scrub_pages;
    dst->outstanding_pages = src->outstanding_pages;
    dst->sharing_freed_pages = src->sharing_freed_pages;
    dst->sharing_used_frames = src->sharing_used_frames;
    dst->max_possible_mfn = src->max_possible_mfn;
    dst->nr_nodes = src->nr_nodes;
    libxl_hwcap_copy(ctx, &dst->hw_cap, &src->hw_cap);
    dst->cap_hvm = src->cap_hvm;
    dst->cap_hvm_directio = src->cap_hvm_directio;
    GC_FREE;
}

void libxl_connectorinfo_copy(libxl_ctx *ctx, libxl_connectorinfo *dst, const libxl_connectorinfo *src)
{
    GC_INIT(ctx);
    libxl_string_copy(ctx, &dst->id, &src->id);
    dst->width = src->width;
    dst->height = src->height;
    dst->req_evtch = src->req_evtch;
    dst->req_rref = src->req_rref;
    dst->evt_evtch = src->evt_evtch;
    dst->evt_rref = src->evt_rref;
    GC_FREE;
}

void libxl_vdisplinfo_copy(libxl_ctx *ctx, libxl_vdisplinfo *dst, const libxl_vdisplinfo *src)
{
    GC_INIT(ctx);
    libxl_string_copy(ctx, &dst->backend, &src->backend);
    dst->backend_id = src->backend_id;
    libxl_string_copy(ctx, &dst->frontend, &src->frontend);
    dst->frontend_id = src->frontend_id;
    dst->devid = src->devid;
    dst->state = src->state;
    dst->be_alloc = src->be_alloc;
    dst->connectors = libxl__calloc(NOGC, src->num_connectors, sizeof(*src->connectors));
    dst->num_connectors = src->num_connectors;
    {
        int i;
        for (i=0; i<src->num_connectors; i++)
            libxl_connectorinfo_copy(ctx, &dst->connectors[i], &src->connectors[i]);
    }
    GC_FREE;
}

void libxl_numainfo_copy(libxl_ctx *ctx, libxl_numainfo *dst, const libxl_numainfo *src)
{
    GC_INIT(ctx);
    dst->size = src->size;
    dst->free = src->free;
    dst->dists = libxl__calloc(NOGC, src->num_dists, sizeof(*src->dists));
    dst->num_dists = src->num_dists;
    {
        int i;
        for (i=0; i<src->num_dists; i++)
            dst->dists[i] = src->dists[i];
    }
    GC_FREE;
}

void libxl_cputopology_copy(libxl_ctx *ctx, libxl_cputopology *dst, const libxl_cputopology *src)
{
    GC_INIT(ctx);
    dst->core = src->core;
    dst->socket = src->socket;
    dst->node = src->node;
    GC_FREE;
}

void libxl_pcitopology_copy(libxl_ctx *ctx, libxl_pcitopology *dst, const libxl_pcitopology *src)
{
    GC_INIT(ctx);
    dst->seg = src->seg;
    dst->bus = src->bus;
    dst->devfn = src->devfn;
    dst->node = src->node;
    GC_FREE;
}

void libxl_sched_credit_params_copy(libxl_ctx *ctx, libxl_sched_credit_params *dst, const libxl_sched_credit_params *src)
{
    GC_INIT(ctx);
    dst->tslice_ms = src->tslice_ms;
    dst->ratelimit_us = src->ratelimit_us;
    GC_FREE;
}

void libxl_sched_credit2_params_copy(libxl_ctx *ctx, libxl_sched_credit2_params *dst, const libxl_sched_credit2_params *src)
{
    GC_INIT(ctx);
    dst->ratelimit_us = src->ratelimit_us;
    GC_FREE;
}

void libxl_domain_remus_info_copy(libxl_ctx *ctx, libxl_domain_remus_info *dst, const libxl_domain_remus_info *src)
{
    GC_INIT(ctx);
    dst->interval = src->interval;
    dst->allow_unsafe = src->allow_unsafe;
    dst->blackhole = src->blackhole;
    dst->compression = src->compression;
    dst->netbuf = src->netbuf;
    libxl_string_copy(ctx, &dst->netbufscript, &src->netbufscript);
    dst->diskbuf = src->diskbuf;
    dst->colo = src->colo;
    dst->userspace_colo_proxy = src->userspace_colo_proxy;
    GC_FREE;
}

void libxl_event_copy(libxl_ctx *ctx, libxl_event *dst, const libxl_event *src)
{
    GC_INIT(ctx);
    dst->domid = src->domid;
    libxl_uuid_copy(ctx, &dst->domuuid, &src->domuuid);
    dst->for_user = src->for_user;
    dst->type = src->type;
    switch (src->type) {
    case LIBXL_EVENT_TYPE_DOMAIN_SHUTDOWN:
        dst->u.domain_shutdown.shutdown_reason = src->u.domain_shutdown.shutdown_reason;
        break;
    case LIBXL_EVENT_TYPE_DOMAIN_DEATH:
        break;
    case LIBXL_EVENT_TYPE_DISK_EJECT:
        libxl_string_copy(ctx, &dst->u.disk_eject.vdev, &src->u.disk_eject.vdev);
        libxl_device_disk_copy(ctx, &dst->u.disk_eject.disk, &src->u.disk_eject.disk);
        break;
    case LIBXL_EVENT_TYPE_OPERATION_COMPLETE:
        dst->u.operation_complete.rc = src->u.operation_complete.rc;
        break;
    case LIBXL_EVENT_TYPE_DOMAIN_CREATE_CONSOLE_AVAILABLE:
        break;
    }
    GC_FREE;
}

void libxl_psr_cat_info_copy(libxl_ctx *ctx, libxl_psr_cat_info *dst, const libxl_psr_cat_info *src)
{
    GC_INIT(ctx);
    dst->id = src->id;
    dst->cos_max = src->cos_max;
    dst->cbm_len = src->cbm_len;
    dst->cdp_enabled = src->cdp_enabled;
    GC_FREE;
}

int libxl__domain_build_info_copy_deprecated(libxl_ctx *ctx, libxl_domain_build_info *p)
{
    switch (p->type) {
    case LIBXL_DOMAIN_TYPE_HVM:
        if (!libxl__defbool_is_default(&p->apic) && !libxl__defbool_is_default(&p->u.hvm.apic))
            return -EINVAL;
        (void) (&p->apic == &p->u.hvm.apic);
        if (libxl__defbool_is_default(&p->apic)) {
            p->apic = p->u.hvm.apic;
            memset(&p->u.hvm.apic, 0, sizeof(*&p->u.hvm.apic));
        }
        if (!libxl__timer_mode_is_default(&p->timer_mode) && !libxl__timer_mode_is_default(&p->u.hvm.timer_mode))
            return -EINVAL;
        (void) (&p->timer_mode == &p->u.hvm.timer_mode);
        if (libxl__timer_mode_is_default(&p->timer_mode)) {
            p->timer_mode = p->u.hvm.timer_mode;
            p->u.hvm.timer_mode = LIBXL_TIMER_MODE_DEFAULT;
        }
        if (!libxl__defbool_is_default(&p->nested_hvm) && !libxl__defbool_is_default(&p->u.hvm.nested_hvm))
            return -EINVAL;
        (void) (&p->nested_hvm == &p->u.hvm.nested_hvm);
        if (libxl__defbool_is_default(&p->nested_hvm)) {
            p->nested_hvm = p->u.hvm.nested_hvm;
            memset(&p->u.hvm.nested_hvm, 0, sizeof(*&p->u.hvm.nested_hvm));
        }
        break;
    case LIBXL_DOMAIN_TYPE_PV:
        if (!libxl__string_is_default(&p->bootloader) && !libxl__string_is_default(&p->u.pv.bootloader))
            return -EINVAL;
        (void) (&p->bootloader == &p->u.pv.bootloader);
        if (libxl__string_is_default(&p->bootloader)) {
            libxl_string_copy(ctx, &p->bootloader, &p->u.pv.bootloader);
            free(p->u.pv.bootloader);
            memset(&p->u.pv.bootloader, 0, sizeof(*&p->u.pv.bootloader));
        }
        if (!libxl__string_list_is_empty(&p->bootloader_args) && !libxl__string_list_is_empty(&p->u.pv.bootloader_args))
            return -EINVAL;
        (void) (&p->bootloader_args == &p->u.pv.bootloader_args);
        if (libxl__string_list_is_empty(&p->bootloader_args)) {
            libxl_string_list_copy(ctx, &p->bootloader_args, &p->u.pv.bootloader_args);
            libxl_string_list_dispose(&p->u.pv.bootloader_args);
            memset(&p->u.pv.bootloader_args, 0, sizeof(*&p->u.pv.bootloader_args));
        }
        break;
    case LIBXL_DOMAIN_TYPE_PVH:
        break;
    case LIBXL_DOMAIN_TYPE_INVALID:
        break;
    }
    return 0;
}

void libxl_ioport_range_init(libxl_ioport_range *p)
{
    memset(p, '\0', sizeof(*p));
}

void libxl_iomem_range_init(libxl_iomem_range *p)
{
    memset(p, '\0', sizeof(*p));
    p->gfn = LIBXL_INVALID_GFN;
}

void libxl_vga_interface_info_init(libxl_vga_interface_info *p)
{
    memset(p, '\0', sizeof(*p));
    p->kind = LIBXL_VGA_INTERFACE_TYPE_UNKNOWN;
}

void libxl_vnc_info_init(libxl_vnc_info *p)
{
    memset(p, '\0', sizeof(*p));
}

void libxl_spice_info_init(libxl_spice_info *p)
{
    memset(p, '\0', sizeof(*p));
}

void libxl_sdl_info_init(libxl_sdl_info *p)
{
    memset(p, '\0', sizeof(*p));
}

void libxl_dominfo_init(libxl_dominfo *p)
{
    memset(p, '\0', sizeof(*p));
    p->shutdown_reason = LIBXL_SHUTDOWN_REASON_UNKNOWN;
    p->outstanding_memkb = LIBXL_MEMKB_DEFAULT;
    p->current_memkb = LIBXL_MEMKB_DEFAULT;
    p->shared_memkb = LIBXL_MEMKB_DEFAULT;
    p->paged_memkb = LIBXL_MEMKB_DEFAULT;
    p->max_memkb = LIBXL_MEMKB_DEFAULT;
    p->domain_type = LIBXL_DOMAIN_TYPE_INVALID;
}

void libxl_cpupoolinfo_init(libxl_cpupoolinfo *p)
{
    memset(p, '\0', sizeof(*p));
}

void libxl_channelinfo_init(libxl_channelinfo *p)
{
    memset(p, '\0', sizeof(*p));
    p->devid = -1;
}

void libxl_channelinfo_init_connection(libxl_channelinfo *p, libxl_channel_connection connection)
{
    assert(!p->connection);
    p->connection = connection;
    switch (p->connection) {
    case LIBXL_CHANNEL_CONNECTION_UNKNOWN:
        break;
    case LIBXL_CHANNEL_CONNECTION_PTY:
        break;
    case LIBXL_CHANNEL_CONNECTION_SOCKET:
        break;
    }
}

void libxl_vminfo_init(libxl_vminfo *p)
{
    memset(p, '\0', sizeof(*p));
}

void libxl_version_info_init(libxl_version_info *p)
{
    memset(p, '\0', sizeof(*p));
}

void libxl_domain_create_info_init(libxl_domain_create_info *p)
{
    memset(p, '\0', sizeof(*p));
    p->type = LIBXL_DOMAIN_TYPE_INVALID;
}

void libxl_domain_restore_params_init(libxl_domain_restore_params *p)
{
    memset(p, '\0', sizeof(*p));
    p->stream_version = 1;
}

void libxl_sched_params_init(libxl_sched_params *p)
{
    memset(p, '\0', sizeof(*p));
    p->vcpuid = LIBXL_SCHED_PARAM_VCPU_INDEX_DEFAULT;
    p->weight = LIBXL_DOMAIN_SCHED_PARAM_WEIGHT_DEFAULT;
    p->cap = LIBXL_DOMAIN_SCHED_PARAM_CAP_DEFAULT;
    p->period = LIBXL_DOMAIN_SCHED_PARAM_PERIOD_DEFAULT;
    p->extratime = LIBXL_DOMAIN_SCHED_PARAM_EXTRATIME_DEFAULT;
    p->budget = LIBXL_DOMAIN_SCHED_PARAM_BUDGET_DEFAULT;
}

void libxl_vcpu_sched_params_init(libxl_vcpu_sched_params *p)
{
    memset(p, '\0', sizeof(*p));
}

void libxl_domain_sched_params_init(libxl_domain_sched_params *p)
{
    memset(p, '\0', sizeof(*p));
    p->weight = LIBXL_DOMAIN_SCHED_PARAM_WEIGHT_DEFAULT;
    p->cap = LIBXL_DOMAIN_SCHED_PARAM_CAP_DEFAULT;
    p->period = LIBXL_DOMAIN_SCHED_PARAM_PERIOD_DEFAULT;
    p->budget = LIBXL_DOMAIN_SCHED_PARAM_BUDGET_DEFAULT;
    p->extratime = LIBXL_DOMAIN_SCHED_PARAM_EXTRATIME_DEFAULT;
    p->slice = LIBXL_DOMAIN_SCHED_PARAM_SLICE_DEFAULT;
    p->latency = LIBXL_DOMAIN_SCHED_PARAM_LATENCY_DEFAULT;
}

void libxl_vnode_info_init(libxl_vnode_info *p)
{
    memset(p, '\0', sizeof(*p));
    p->memkb = LIBXL_MEMKB_DEFAULT;
}

void libxl_rdm_reserve_init(libxl_rdm_reserve *p)
{
    memset(p, '\0', sizeof(*p));
    p->policy = LIBXL_RDM_RESERVE_POLICY_INVALID;
}

void libxl_domain_build_info_init(libxl_domain_build_info *p)
{
    memset(p, '\0', sizeof(*p));
    p->max_memkb = LIBXL_MEMKB_DEFAULT;
    p->target_memkb = LIBXL_MEMKB_DEFAULT;
    p->video_memkb = LIBXL_MEMKB_DEFAULT;
    p->shadow_memkb = LIBXL_MEMKB_DEFAULT;
    p->max_grant_frames = LIBXL_MAX_GRANT_FRAMES_DEFAULT;
    p->max_maptrack_frames = LIBXL_MAX_MAPTRACK_FRAMES_DEFAULT;
    libxl_domain_sched_params_init(&p->sched_params);
    p->timer_mode = LIBXL_TIMER_MODE_DEFAULT;
    p->type = LIBXL_DOMAIN_TYPE_INVALID;
    p->arch_arm.gic_version = LIBXL_GIC_VERSION_DEFAULT;
    p->altp2m = LIBXL_ALTP2M_MODE_DISABLED;
}

void libxl_domain_build_info_init_type(libxl_domain_build_info *p, libxl_domain_type type)
{
    assert(p->type == LIBXL_DOMAIN_TYPE_INVALID);
    p->type = type;
    switch (p->type) {
    case LIBXL_DOMAIN_TYPE_HVM:
        p->u.hvm.mmio_hole_memkb = LIBXL_MEMKB_DEFAULT;
        p->u.hvm.timer_mode = LIBXL_TIMER_MODE_DEFAULT;
        p->u.hvm.hdtype = LIBXL_HDTYPE_IDE;
        libxl_vga_interface_info_init(&p->u.hvm.vga);
        libxl_vnc_info_init(&p->u.hvm.vnc);
        libxl_sdl_info_init(&p->u.hvm.sdl);
        libxl_spice_info_init(&p->u.hvm.spice);
        libxl_rdm_reserve_init(&p->u.hvm.rdm);
        p->u.hvm.rdm_mem_boundary_memkb = LIBXL_MEMKB_DEFAULT;
        break;
    case LIBXL_DOMAIN_TYPE_PV:
        p->u.pv.slack_memkb = LIBXL_MEMKB_DEFAULT;
        break;
    case LIBXL_DOMAIN_TYPE_PVH:
        break;
    case LIBXL_DOMAIN_TYPE_INVALID:
        break;
    }
}

void libxl_device_vfb_init(libxl_device_vfb *p)
{
    memset(p, '\0', sizeof(*p));
    p->devid = -1;
    libxl_vnc_info_init(&p->vnc);
    libxl_sdl_info_init(&p->sdl);
}

void libxl_device_vkb_init(libxl_device_vkb *p)
{
    memset(p, '\0', sizeof(*p));
    p->devid = -1;
}

void libxl_device_disk_init(libxl_device_disk *p)
{
    memset(p, '\0', sizeof(*p));
}

void libxl_device_nic_init(libxl_device_nic *p)
{
    memset(p, '\0', sizeof(*p));
    p->devid = -1;
}

void libxl_device_pci_init(libxl_device_pci *p)
{
    memset(p, '\0', sizeof(*p));
    p->rdm_policy = LIBXL_RDM_RESERVE_POLICY_INVALID;
}

void libxl_device_rdm_init(libxl_device_rdm *p)
{
    memset(p, '\0', sizeof(*p));
    p->policy = LIBXL_RDM_RESERVE_POLICY_INVALID;
}

void libxl_device_usbctrl_init(libxl_device_usbctrl *p)
{
    memset(p, '\0', sizeof(*p));
    p->devid = -1;
}

void libxl_device_usbdev_init(libxl_device_usbdev *p)
{
    memset(p, '\0', sizeof(*p));
    p->ctrl = -1;
}

void libxl_device_usbdev_init_type(libxl_device_usbdev *p, libxl_usbdev_type type)
{
    assert(!p->type);
    p->type = type;
    switch (p->type) {
    case LIBXL_USBDEV_TYPE_HOSTDEV:
        break;
    }
}

void libxl_device_dtdev_init(libxl_device_dtdev *p)
{
    memset(p, '\0', sizeof(*p));
}

void libxl_device_vtpm_init(libxl_device_vtpm *p)
{
    memset(p, '\0', sizeof(*p));
    p->devid = -1;
}

void libxl_device_p9_init(libxl_device_p9 *p)
{
    memset(p, '\0', sizeof(*p));
    p->devid = -1;
}

void libxl_device_channel_init(libxl_device_channel *p)
{
    memset(p, '\0', sizeof(*p));
    p->devid = -1;
}

void libxl_device_channel_init_connection(libxl_device_channel *p, libxl_channel_connection connection)
{
    assert(!p->connection);
    p->connection = connection;
    switch (p->connection) {
    case LIBXL_CHANNEL_CONNECTION_UNKNOWN:
        break;
    case LIBXL_CHANNEL_CONNECTION_PTY:
        break;
    case LIBXL_CHANNEL_CONNECTION_SOCKET:
        break;
    }
}

void libxl_connector_param_init(libxl_connector_param *p)
{
    memset(p, '\0', sizeof(*p));
}

void libxl_device_vdispl_init(libxl_device_vdispl *p)
{
    memset(p, '\0', sizeof(*p));
    p->devid = -1;
}

void libxl_domain_config_init(libxl_domain_config *p)
{
    memset(p, '\0', sizeof(*p));
    libxl_domain_create_info_init(&p->c_info);
    libxl_domain_build_info_init(&p->b_info);
    p->on_poweroff = LIBXL_ACTION_ON_SHUTDOWN_DESTROY;
    p->on_reboot = LIBXL_ACTION_ON_SHUTDOWN_DESTROY;
    p->on_watchdog = LIBXL_ACTION_ON_SHUTDOWN_DESTROY;
    p->on_crash = LIBXL_ACTION_ON_SHUTDOWN_DESTROY;
    p->on_soft_reset = LIBXL_ACTION_ON_SHUTDOWN_DESTROY;
}

void libxl_diskinfo_init(libxl_diskinfo *p)
{
    memset(p, '\0', sizeof(*p));
    p->devid = -1;
}

void libxl_nicinfo_init(libxl_nicinfo *p)
{
    memset(p, '\0', sizeof(*p));
    p->devid = -1;
}

void libxl_vtpminfo_init(libxl_vtpminfo *p)
{
    memset(p, '\0', sizeof(*p));
    p->devid = -1;
}

void libxl_usbctrlinfo_init(libxl_usbctrlinfo *p)
{
    memset(p, '\0', sizeof(*p));
    p->devid = -1;
}

void libxl_vcpuinfo_init(libxl_vcpuinfo *p)
{
    memset(p, '\0', sizeof(*p));
}

void libxl_physinfo_init(libxl_physinfo *p)
{
    memset(p, '\0', sizeof(*p));
}

void libxl_connectorinfo_init(libxl_connectorinfo *p)
{
    memset(p, '\0', sizeof(*p));
}

void libxl_vdisplinfo_init(libxl_vdisplinfo *p)
{
    memset(p, '\0', sizeof(*p));
    p->devid = -1;
}

void libxl_numainfo_init(libxl_numainfo *p)
{
    memset(p, '\0', sizeof(*p));
}

void libxl_cputopology_init(libxl_cputopology *p)
{
    memset(p, '\0', sizeof(*p));
}

void libxl_pcitopology_init(libxl_pcitopology *p)
{
    memset(p, '\0', sizeof(*p));
}

void libxl_sched_credit_params_init(libxl_sched_credit_params *p)
{
    memset(p, '\0', sizeof(*p));
}

void libxl_sched_credit2_params_init(libxl_sched_credit2_params *p)
{
    memset(p, '\0', sizeof(*p));
}

void libxl_domain_remus_info_init(libxl_domain_remus_info *p)
{
    memset(p, '\0', sizeof(*p));
}

void libxl_event_init(libxl_event *p)
{
    memset(p, '\0', sizeof(*p));
}

void libxl_event_init_type(libxl_event *p, libxl_event_type type)
{
    assert(!p->type);
    p->type = type;
    switch (p->type) {
    case LIBXL_EVENT_TYPE_DOMAIN_SHUTDOWN:
        break;
    case LIBXL_EVENT_TYPE_DOMAIN_DEATH:
        break;
    case LIBXL_EVENT_TYPE_DISK_EJECT:
        libxl_device_disk_init(&p->u.disk_eject.disk);
        break;
    case LIBXL_EVENT_TYPE_OPERATION_COMPLETE:
        break;
    case LIBXL_EVENT_TYPE_DOMAIN_CREATE_CONSOLE_AVAILABLE:
        break;
    }
}

void libxl_psr_cat_info_init(libxl_psr_cat_info *p)
{
    memset(p, '\0', sizeof(*p));
}

const char *libxl_domain_unpriv_to_string(libxl_domain_unpriv e)
{
    switch(e) {
        case LIBXL_DOMAIN_UNPRIV_DOM0:
            return "dom0";
        case LIBXL_DOMAIN_UNPRIV_DOMU:
            return "domu";
        default:
             return NULL;
    }
}

libxl_enum_string_table libxl_domain_unpriv_string_table[] = {
    { .s = "dom0", .v = LIBXL_DOMAIN_UNPRIV_DOM0 },
    { .s = "domu", .v = LIBXL_DOMAIN_UNPRIV_DOMU },
    { NULL, -1 },
};

int libxl_domain_unpriv_from_string(const char *s, libxl_domain_unpriv *e)
{
    return libxl__enum_from_string(libxl_domain_unpriv_string_table,
                                   s, (int *)e);
}

const char *libxl_error_to_string(libxl_error e)
{
    switch(e) {
        case ERROR_NONSPECIFIC:
            return "nonspecific";
        case ERROR_VERSION:
            return "version";
        case ERROR_FAIL:
            return "fail";
        case ERROR_NI:
            return "ni";
        case ERROR_NOMEM:
            return "nomem";
        case ERROR_INVAL:
            return "inval";
        case ERROR_BADFAIL:
            return "badfail";
        case ERROR_GUEST_TIMEDOUT:
            return "guest_timedout";
        case ERROR_TIMEDOUT:
            return "timedout";
        case ERROR_NOPARAVIRT:
            return "noparavirt";
        case ERROR_NOT_READY:
            return "not_ready";
        case ERROR_OSEVENT_REG_FAIL:
            return "osevent_reg_fail";
        case ERROR_BUFFERFULL:
            return "bufferfull";
        case ERROR_UNKNOWN_CHILD:
            return "unknown_child";
        case ERROR_LOCK_FAIL:
            return "lock_fail";
        case ERROR_JSON_CONFIG_EMPTY:
            return "json_config_empty";
        case ERROR_DEVICE_EXISTS:
            return "device_exists";
        case ERROR_CHECKPOINT_DEVOPS_DOES_NOT_MATCH:
            return "checkpoint_devops_does_not_match";
        case ERROR_CHECKPOINT_DEVICE_NOT_SUPPORTED:
            return "checkpoint_device_not_supported";
        case ERROR_VNUMA_CONFIG_INVALID:
            return "vnuma_config_invalid";
        case ERROR_DOMAIN_NOTFOUND:
            return "domain_notfound";
        case ERROR_ABORTED:
            return "aborted";
        case ERROR_NOTFOUND:
            return "notfound";
        case ERROR_DOMAIN_DESTROYED:
            return "domain_destroyed";
        case ERROR_FEATURE_REMOVED:
            return "feature_removed";
        default:
             return NULL;
    }
}

libxl_enum_string_table libxl_error_string_table[] = {
    { .s = "nonspecific", .v = ERROR_NONSPECIFIC },
    { .s = "version", .v = ERROR_VERSION },
    { .s = "fail", .v = ERROR_FAIL },
    { .s = "ni", .v = ERROR_NI },
    { .s = "nomem", .v = ERROR_NOMEM },
    { .s = "inval", .v = ERROR_INVAL },
    { .s = "badfail", .v = ERROR_BADFAIL },
    { .s = "guest_timedout", .v = ERROR_GUEST_TIMEDOUT },
    { .s = "timedout", .v = ERROR_TIMEDOUT },
    { .s = "noparavirt", .v = ERROR_NOPARAVIRT },
    { .s = "not_ready", .v = ERROR_NOT_READY },
    { .s = "osevent_reg_fail", .v = ERROR_OSEVENT_REG_FAIL },
    { .s = "bufferfull", .v = ERROR_BUFFERFULL },
    { .s = "unknown_child", .v = ERROR_UNKNOWN_CHILD },
    { .s = "lock_fail", .v = ERROR_LOCK_FAIL },
    { .s = "json_config_empty", .v = ERROR_JSON_CONFIG_EMPTY },
    { .s = "device_exists", .v = ERROR_DEVICE_EXISTS },
    { .s = "checkpoint_devops_does_not_match", .v = ERROR_CHECKPOINT_DEVOPS_DOES_NOT_MATCH },
    { .s = "checkpoint_device_not_supported", .v = ERROR_CHECKPOINT_DEVICE_NOT_SUPPORTED },
    { .s = "vnuma_config_invalid", .v = ERROR_VNUMA_CONFIG_INVALID },
    { .s = "domain_notfound", .v = ERROR_DOMAIN_NOTFOUND },
    { .s = "aborted", .v = ERROR_ABORTED },
    { .s = "notfound", .v = ERROR_NOTFOUND },
    { .s = "domain_destroyed", .v = ERROR_DOMAIN_DESTROYED },
    { .s = "feature_removed", .v = ERROR_FEATURE_REMOVED },
    { NULL, -1 },
};

int libxl_error_from_string(const char *s, libxl_error *e)
{
    return libxl__enum_from_string(libxl_error_string_table,
                                   s, (int *)e);
}

const char *libxl_domain_type_to_string(libxl_domain_type e)
{
    switch(e) {
        case LIBXL_DOMAIN_TYPE_INVALID:
            return "invalid";
        case LIBXL_DOMAIN_TYPE_HVM:
            return "hvm";
        case LIBXL_DOMAIN_TYPE_PV:
            return "pv";
        case LIBXL_DOMAIN_TYPE_PVH:
            return "pvh";
        default:
             return NULL;
    }
}

libxl_enum_string_table libxl_domain_type_string_table[] = {
    { .s = "invalid", .v = LIBXL_DOMAIN_TYPE_INVALID },
    { .s = "hvm", .v = LIBXL_DOMAIN_TYPE_HVM },
    { .s = "pv", .v = LIBXL_DOMAIN_TYPE_PV },
    { .s = "pvh", .v = LIBXL_DOMAIN_TYPE_PVH },
    { NULL, -1 },
};

int libxl_domain_type_from_string(const char *s, libxl_domain_type *e)
{
    return libxl__enum_from_string(libxl_domain_type_string_table,
                                   s, (int *)e);
}

const char *libxl_rdm_reserve_strategy_to_string(libxl_rdm_reserve_strategy e)
{
    switch(e) {
        case LIBXL_RDM_RESERVE_STRATEGY_IGNORE:
            return "ignore";
        case LIBXL_RDM_RESERVE_STRATEGY_HOST:
            return "host";
        default:
             return NULL;
    }
}

libxl_enum_string_table libxl_rdm_reserve_strategy_string_table[] = {
    { .s = "ignore", .v = LIBXL_RDM_RESERVE_STRATEGY_IGNORE },
    { .s = "host", .v = LIBXL_RDM_RESERVE_STRATEGY_HOST },
    { NULL, -1 },
};

int libxl_rdm_reserve_strategy_from_string(const char *s, libxl_rdm_reserve_strategy *e)
{
    return libxl__enum_from_string(libxl_rdm_reserve_strategy_string_table,
                                   s, (int *)e);
}

const char *libxl_rdm_reserve_policy_to_string(libxl_rdm_reserve_policy e)
{
    switch(e) {
        case LIBXL_RDM_RESERVE_POLICY_INVALID:
            return "invalid";
        case LIBXL_RDM_RESERVE_POLICY_STRICT:
            return "strict";
        case LIBXL_RDM_RESERVE_POLICY_RELAXED:
            return "relaxed";
        default:
             return NULL;
    }
}

libxl_enum_string_table libxl_rdm_reserve_policy_string_table[] = {
    { .s = "invalid", .v = LIBXL_RDM_RESERVE_POLICY_INVALID },
    { .s = "strict", .v = LIBXL_RDM_RESERVE_POLICY_STRICT },
    { .s = "relaxed", .v = LIBXL_RDM_RESERVE_POLICY_RELAXED },
    { NULL, -1 },
};

int libxl_rdm_reserve_policy_from_string(const char *s, libxl_rdm_reserve_policy *e)
{
    return libxl__enum_from_string(libxl_rdm_reserve_policy_string_table,
                                   s, (int *)e);
}

const char *libxl_channel_connection_to_string(libxl_channel_connection e)
{
    switch(e) {
        case LIBXL_CHANNEL_CONNECTION_UNKNOWN:
            return "unknown";
        case LIBXL_CHANNEL_CONNECTION_PTY:
            return "pty";
        case LIBXL_CHANNEL_CONNECTION_SOCKET:
            return "socket";
        default:
             return NULL;
    }
}

libxl_enum_string_table libxl_channel_connection_string_table[] = {
    { .s = "unknown", .v = LIBXL_CHANNEL_CONNECTION_UNKNOWN },
    { .s = "pty", .v = LIBXL_CHANNEL_CONNECTION_PTY },
    { .s = "socket", .v = LIBXL_CHANNEL_CONNECTION_SOCKET },
    { NULL, -1 },
};

int libxl_channel_connection_from_string(const char *s, libxl_channel_connection *e)
{
    return libxl__enum_from_string(libxl_channel_connection_string_table,
                                   s, (int *)e);
}

const char *libxl_device_model_version_to_string(libxl_device_model_version e)
{
    switch(e) {
        case LIBXL_DEVICE_MODEL_VERSION_UNKNOWN:
            return "unknown";
        case LIBXL_DEVICE_MODEL_VERSION_QEMU_XEN_TRADITIONAL:
            return "qemu_xen_traditional";
        case LIBXL_DEVICE_MODEL_VERSION_QEMU_XEN:
            return "qemu_xen";
        default:
             return NULL;
    }
}

libxl_enum_string_table libxl_device_model_version_string_table[] = {
    { .s = "unknown", .v = LIBXL_DEVICE_MODEL_VERSION_UNKNOWN },
    { .s = "qemu_xen_traditional", .v = LIBXL_DEVICE_MODEL_VERSION_QEMU_XEN_TRADITIONAL },
    { .s = "qemu_xen", .v = LIBXL_DEVICE_MODEL_VERSION_QEMU_XEN },
    { NULL, -1 },
};

int libxl_device_model_version_from_string(const char *s, libxl_device_model_version *e)
{
    return libxl__enum_from_string(libxl_device_model_version_string_table,
                                   s, (int *)e);
}

const char *libxl_console_type_to_string(libxl_console_type e)
{
    switch(e) {
        case LIBXL_CONSOLE_TYPE_UNKNOWN:
            return "unknown";
        case LIBXL_CONSOLE_TYPE_SERIAL:
            return "serial";
        case LIBXL_CONSOLE_TYPE_PV:
            return "pv";
        case LIBXL_CONSOLE_TYPE_VUART:
            return "vuart";
        default:
             return NULL;
    }
}

libxl_enum_string_table libxl_console_type_string_table[] = {
    { .s = "unknown", .v = LIBXL_CONSOLE_TYPE_UNKNOWN },
    { .s = "serial", .v = LIBXL_CONSOLE_TYPE_SERIAL },
    { .s = "pv", .v = LIBXL_CONSOLE_TYPE_PV },
    { .s = "vuart", .v = LIBXL_CONSOLE_TYPE_VUART },
    { NULL, -1 },
};

int libxl_console_type_from_string(const char *s, libxl_console_type *e)
{
    return libxl__enum_from_string(libxl_console_type_string_table,
                                   s, (int *)e);
}

const char *libxl_disk_format_to_string(libxl_disk_format e)
{
    switch(e) {
        case LIBXL_DISK_FORMAT_UNKNOWN:
            return "unknown";
        case LIBXL_DISK_FORMAT_QCOW:
            return "qcow";
        case LIBXL_DISK_FORMAT_QCOW2:
            return "qcow2";
        case LIBXL_DISK_FORMAT_VHD:
            return "vhd";
        case LIBXL_DISK_FORMAT_RAW:
            return "raw";
        case LIBXL_DISK_FORMAT_EMPTY:
            return "empty";
        case LIBXL_DISK_FORMAT_QED:
            return "qed";
        default:
             return NULL;
    }
}

libxl_enum_string_table libxl_disk_format_string_table[] = {
    { .s = "unknown", .v = LIBXL_DISK_FORMAT_UNKNOWN },
    { .s = "qcow", .v = LIBXL_DISK_FORMAT_QCOW },
    { .s = "qcow2", .v = LIBXL_DISK_FORMAT_QCOW2 },
    { .s = "vhd", .v = LIBXL_DISK_FORMAT_VHD },
    { .s = "raw", .v = LIBXL_DISK_FORMAT_RAW },
    { .s = "empty", .v = LIBXL_DISK_FORMAT_EMPTY },
    { .s = "qed", .v = LIBXL_DISK_FORMAT_QED },
    { NULL, -1 },
};

int libxl_disk_format_from_string(const char *s, libxl_disk_format *e)
{
    return libxl__enum_from_string(libxl_disk_format_string_table,
                                   s, (int *)e);
}

const char *libxl_disk_backend_to_string(libxl_disk_backend e)
{
    switch(e) {
        case LIBXL_DISK_BACKEND_UNKNOWN:
            return "unknown";
        case LIBXL_DISK_BACKEND_PHY:
            return "phy";
        case LIBXL_DISK_BACKEND_TAP:
            return "tap";
        case LIBXL_DISK_BACKEND_QDISK:
            return "qdisk";
        default:
             return NULL;
    }
}

libxl_enum_string_table libxl_disk_backend_string_table[] = {
    { .s = "unknown", .v = LIBXL_DISK_BACKEND_UNKNOWN },
    { .s = "phy", .v = LIBXL_DISK_BACKEND_PHY },
    { .s = "tap", .v = LIBXL_DISK_BACKEND_TAP },
    { .s = "qdisk", .v = LIBXL_DISK_BACKEND_QDISK },
    { NULL, -1 },
};

int libxl_disk_backend_from_string(const char *s, libxl_disk_backend *e)
{
    return libxl__enum_from_string(libxl_disk_backend_string_table,
                                   s, (int *)e);
}

const char *libxl_nic_type_to_string(libxl_nic_type e)
{
    switch(e) {
        case LIBXL_NIC_TYPE_UNKNOWN:
            return "unknown";
        case LIBXL_NIC_TYPE_VIF_IOEMU:
            return "vif_ioemu";
        case LIBXL_NIC_TYPE_VIF:
            return "vif";
        default:
             return NULL;
    }
}

libxl_enum_string_table libxl_nic_type_string_table[] = {
    { .s = "unknown", .v = LIBXL_NIC_TYPE_UNKNOWN },
    { .s = "vif_ioemu", .v = LIBXL_NIC_TYPE_VIF_IOEMU },
    { .s = "vif", .v = LIBXL_NIC_TYPE_VIF },
    { NULL, -1 },
};

int libxl_nic_type_from_string(const char *s, libxl_nic_type *e)
{
    return libxl__enum_from_string(libxl_nic_type_string_table,
                                   s, (int *)e);
}

const char *libxl_action_on_shutdown_to_string(libxl_action_on_shutdown e)
{
    switch(e) {
        case LIBXL_ACTION_ON_SHUTDOWN_DESTROY:
            return "destroy";
        case LIBXL_ACTION_ON_SHUTDOWN_RESTART:
            return "restart";
        case LIBXL_ACTION_ON_SHUTDOWN_RESTART_RENAME:
            return "restart_rename";
        case LIBXL_ACTION_ON_SHUTDOWN_PRESERVE:
            return "preserve";
        case LIBXL_ACTION_ON_SHUTDOWN_COREDUMP_DESTROY:
            return "coredump_destroy";
        case LIBXL_ACTION_ON_SHUTDOWN_COREDUMP_RESTART:
            return "coredump_restart";
        case LIBXL_ACTION_ON_SHUTDOWN_SOFT_RESET:
            return "soft_reset";
        default:
             return NULL;
    }
}

libxl_enum_string_table libxl_action_on_shutdown_string_table[] = {
    { .s = "destroy", .v = LIBXL_ACTION_ON_SHUTDOWN_DESTROY },
    { .s = "restart", .v = LIBXL_ACTION_ON_SHUTDOWN_RESTART },
    { .s = "restart_rename", .v = LIBXL_ACTION_ON_SHUTDOWN_RESTART_RENAME },
    { .s = "preserve", .v = LIBXL_ACTION_ON_SHUTDOWN_PRESERVE },
    { .s = "coredump_destroy", .v = LIBXL_ACTION_ON_SHUTDOWN_COREDUMP_DESTROY },
    { .s = "coredump_restart", .v = LIBXL_ACTION_ON_SHUTDOWN_COREDUMP_RESTART },
    { .s = "soft_reset", .v = LIBXL_ACTION_ON_SHUTDOWN_SOFT_RESET },
    { NULL, -1 },
};

int libxl_action_on_shutdown_from_string(const char *s, libxl_action_on_shutdown *e)
{
    return libxl__enum_from_string(libxl_action_on_shutdown_string_table,
                                   s, (int *)e);
}

const char *libxl_trigger_to_string(libxl_trigger e)
{
    switch(e) {
        case LIBXL_TRIGGER_UNKNOWN:
            return "unknown";
        case LIBXL_TRIGGER_POWER:
            return "power";
        case LIBXL_TRIGGER_SLEEP:
            return "sleep";
        case LIBXL_TRIGGER_NMI:
            return "nmi";
        case LIBXL_TRIGGER_INIT:
            return "init";
        case LIBXL_TRIGGER_RESET:
            return "reset";
        case LIBXL_TRIGGER_S3RESUME:
            return "s3resume";
        default:
             return NULL;
    }
}

libxl_enum_string_table libxl_trigger_string_table[] = {
    { .s = "unknown", .v = LIBXL_TRIGGER_UNKNOWN },
    { .s = "power", .v = LIBXL_TRIGGER_POWER },
    { .s = "sleep", .v = LIBXL_TRIGGER_SLEEP },
    { .s = "nmi", .v = LIBXL_TRIGGER_NMI },
    { .s = "init", .v = LIBXL_TRIGGER_INIT },
    { .s = "reset", .v = LIBXL_TRIGGER_RESET },
    { .s = "s3resume", .v = LIBXL_TRIGGER_S3RESUME },
    { NULL, -1 },
};

int libxl_trigger_from_string(const char *s, libxl_trigger *e)
{
    return libxl__enum_from_string(libxl_trigger_string_table,
                                   s, (int *)e);
}

const char *libxl_tsc_mode_to_string(libxl_tsc_mode e)
{
    switch(e) {
        case LIBXL_TSC_MODE_DEFAULT:
            return "default";
        case LIBXL_TSC_MODE_ALWAYS_EMULATE:
            return "always_emulate";
        case LIBXL_TSC_MODE_NATIVE:
            return "native";
        case LIBXL_TSC_MODE_NATIVE_PARAVIRT:
            return "native_paravirt";
        default:
             return NULL;
    }
}

libxl_enum_string_table libxl_tsc_mode_string_table[] = {
    { .s = "default", .v = LIBXL_TSC_MODE_DEFAULT },
    { .s = "always_emulate", .v = LIBXL_TSC_MODE_ALWAYS_EMULATE },
    { .s = "native", .v = LIBXL_TSC_MODE_NATIVE },
    { .s = "native_paravirt", .v = LIBXL_TSC_MODE_NATIVE_PARAVIRT },
    { NULL, -1 },
};

int libxl_tsc_mode_from_string(const char *s, libxl_tsc_mode *e)
{
    return libxl__enum_from_string(libxl_tsc_mode_string_table,
                                   s, (int *)e);
}

const char *libxl_gfx_passthru_kind_to_string(libxl_gfx_passthru_kind e)
{
    switch(e) {
        case LIBXL_GFX_PASSTHRU_KIND_DEFAULT:
            return "default";
        case LIBXL_GFX_PASSTHRU_KIND_IGD:
            return "igd";
        default:
             return NULL;
    }
}

libxl_enum_string_table libxl_gfx_passthru_kind_string_table[] = {
    { .s = "default", .v = LIBXL_GFX_PASSTHRU_KIND_DEFAULT },
    { .s = "igd", .v = LIBXL_GFX_PASSTHRU_KIND_IGD },
    { NULL, -1 },
};

int libxl_gfx_passthru_kind_from_string(const char *s, libxl_gfx_passthru_kind *e)
{
    return libxl__enum_from_string(libxl_gfx_passthru_kind_string_table,
                                   s, (int *)e);
}

const char *libxl_timer_mode_to_string(libxl_timer_mode e)
{
    switch(e) {
        case LIBXL_TIMER_MODE_UNKNOWN:
            return "unknown";
        case LIBXL_TIMER_MODE_DELAY_FOR_MISSED_TICKS:
            return "delay_for_missed_ticks";
        case LIBXL_TIMER_MODE_NO_DELAY_FOR_MISSED_TICKS:
            return "no_delay_for_missed_ticks";
        case LIBXL_TIMER_MODE_NO_MISSED_TICKS_PENDING:
            return "no_missed_ticks_pending";
        case LIBXL_TIMER_MODE_ONE_MISSED_TICK_PENDING:
            return "one_missed_tick_pending";
        default:
             return NULL;
    }
}

libxl_enum_string_table libxl_timer_mode_string_table[] = {
    { .s = "unknown", .v = LIBXL_TIMER_MODE_UNKNOWN },
    { .s = "delay_for_missed_ticks", .v = LIBXL_TIMER_MODE_DELAY_FOR_MISSED_TICKS },
    { .s = "no_delay_for_missed_ticks", .v = LIBXL_TIMER_MODE_NO_DELAY_FOR_MISSED_TICKS },
    { .s = "no_missed_ticks_pending", .v = LIBXL_TIMER_MODE_NO_MISSED_TICKS_PENDING },
    { .s = "one_missed_tick_pending", .v = LIBXL_TIMER_MODE_ONE_MISSED_TICK_PENDING },
    { NULL, -1 },
};

int libxl_timer_mode_from_string(const char *s, libxl_timer_mode *e)
{
    return libxl__enum_from_string(libxl_timer_mode_string_table,
                                   s, (int *)e);
}

const char *libxl_bios_type_to_string(libxl_bios_type e)
{
    switch(e) {
        case LIBXL_BIOS_TYPE_UNKNOWN:
            return "unknown";
        case LIBXL_BIOS_TYPE_ROMBIOS:
            return "rombios";
        case LIBXL_BIOS_TYPE_SEABIOS:
            return "seabios";
        case LIBXL_BIOS_TYPE_OVMF:
            return "ovmf";
        default:
             return NULL;
    }
}

libxl_enum_string_table libxl_bios_type_string_table[] = {
    { .s = "unknown", .v = LIBXL_BIOS_TYPE_UNKNOWN },
    { .s = "rombios", .v = LIBXL_BIOS_TYPE_ROMBIOS },
    { .s = "seabios", .v = LIBXL_BIOS_TYPE_SEABIOS },
    { .s = "ovmf", .v = LIBXL_BIOS_TYPE_OVMF },
    { NULL, -1 },
};

int libxl_bios_type_from_string(const char *s, libxl_bios_type *e)
{
    return libxl__enum_from_string(libxl_bios_type_string_table,
                                   s, (int *)e);
}

const char *libxl_scheduler_to_string(libxl_scheduler e)
{
    switch(e) {
        case LIBXL_SCHEDULER_UNKNOWN:
            return "unknown";
        case LIBXL_SCHEDULER_SEDF:
            return "sedf";
        case LIBXL_SCHEDULER_CREDIT:
            return "credit";
        case LIBXL_SCHEDULER_CREDIT2:
            return "credit2";
        case LIBXL_SCHEDULER_ARINC653:
            return "arinc653";
        case LIBXL_SCHEDULER_RTDS:
            return "rtds";
        case LIBXL_SCHEDULER_NULL:
            return "null";
        default:
             return NULL;
    }
}

libxl_enum_string_table libxl_scheduler_string_table[] = {
    { .s = "unknown", .v = LIBXL_SCHEDULER_UNKNOWN },
    { .s = "sedf", .v = LIBXL_SCHEDULER_SEDF },
    { .s = "credit", .v = LIBXL_SCHEDULER_CREDIT },
    { .s = "credit2", .v = LIBXL_SCHEDULER_CREDIT2 },
    { .s = "arinc653", .v = LIBXL_SCHEDULER_ARINC653 },
    { .s = "rtds", .v = LIBXL_SCHEDULER_RTDS },
    { .s = "null", .v = LIBXL_SCHEDULER_NULL },
    { NULL, -1 },
};

int libxl_scheduler_from_string(const char *s, libxl_scheduler *e)
{
    return libxl__enum_from_string(libxl_scheduler_string_table,
                                   s, (int *)e);
}

const char *libxl_shutdown_reason_to_string(libxl_shutdown_reason e)
{
    switch(e) {
        case LIBXL_SHUTDOWN_REASON_UNKNOWN:
            return "unknown";
        case LIBXL_SHUTDOWN_REASON_POWEROFF:
            return "poweroff";
        case LIBXL_SHUTDOWN_REASON_REBOOT:
            return "reboot";
        case LIBXL_SHUTDOWN_REASON_SUSPEND:
            return "suspend";
        case LIBXL_SHUTDOWN_REASON_CRASH:
            return "crash";
        case LIBXL_SHUTDOWN_REASON_WATCHDOG:
            return "watchdog";
        case LIBXL_SHUTDOWN_REASON_SOFT_RESET:
            return "soft_reset";
        default:
             return NULL;
    }
}

libxl_enum_string_table libxl_shutdown_reason_string_table[] = {
    { .s = "unknown", .v = LIBXL_SHUTDOWN_REASON_UNKNOWN },
    { .s = "poweroff", .v = LIBXL_SHUTDOWN_REASON_POWEROFF },
    { .s = "reboot", .v = LIBXL_SHUTDOWN_REASON_REBOOT },
    { .s = "suspend", .v = LIBXL_SHUTDOWN_REASON_SUSPEND },
    { .s = "crash", .v = LIBXL_SHUTDOWN_REASON_CRASH },
    { .s = "watchdog", .v = LIBXL_SHUTDOWN_REASON_WATCHDOG },
    { .s = "soft_reset", .v = LIBXL_SHUTDOWN_REASON_SOFT_RESET },
    { NULL, -1 },
};

int libxl_shutdown_reason_from_string(const char *s, libxl_shutdown_reason *e)
{
    return libxl__enum_from_string(libxl_shutdown_reason_string_table,
                                   s, (int *)e);
}

const char *libxl_vga_interface_type_to_string(libxl_vga_interface_type e)
{
    switch(e) {
        case LIBXL_VGA_INTERFACE_TYPE_UNKNOWN:
            return "unknown";
        case LIBXL_VGA_INTERFACE_TYPE_CIRRUS:
            return "cirrus";
        case LIBXL_VGA_INTERFACE_TYPE_STD:
            return "std";
        case LIBXL_VGA_INTERFACE_TYPE_NONE:
            return "none";
        case LIBXL_VGA_INTERFACE_TYPE_QXL:
            return "qxl";
        default:
             return NULL;
    }
}

libxl_enum_string_table libxl_vga_interface_type_string_table[] = {
    { .s = "unknown", .v = LIBXL_VGA_INTERFACE_TYPE_UNKNOWN },
    { .s = "cirrus", .v = LIBXL_VGA_INTERFACE_TYPE_CIRRUS },
    { .s = "std", .v = LIBXL_VGA_INTERFACE_TYPE_STD },
    { .s = "none", .v = LIBXL_VGA_INTERFACE_TYPE_NONE },
    { .s = "qxl", .v = LIBXL_VGA_INTERFACE_TYPE_QXL },
    { NULL, -1 },
};

int libxl_vga_interface_type_from_string(const char *s, libxl_vga_interface_type *e)
{
    return libxl__enum_from_string(libxl_vga_interface_type_string_table,
                                   s, (int *)e);
}

const char *libxl_vendor_device_to_string(libxl_vendor_device e)
{
    switch(e) {
        case LIBXL_VENDOR_DEVICE_NONE:
            return "none";
        case LIBXL_VENDOR_DEVICE_XENSERVER:
            return "xenserver";
        default:
             return NULL;
    }
}

libxl_enum_string_table libxl_vendor_device_string_table[] = {
    { .s = "none", .v = LIBXL_VENDOR_DEVICE_NONE },
    { .s = "xenserver", .v = LIBXL_VENDOR_DEVICE_XENSERVER },
    { NULL, -1 },
};

int libxl_vendor_device_from_string(const char *s, libxl_vendor_device *e)
{
    return libxl__enum_from_string(libxl_vendor_device_string_table,
                                   s, (int *)e);
}

const char *libxl_viridian_enlightenment_to_string(libxl_viridian_enlightenment e)
{
    switch(e) {
        case LIBXL_VIRIDIAN_ENLIGHTENMENT_BASE:
            return "base";
        case LIBXL_VIRIDIAN_ENLIGHTENMENT_FREQ:
            return "freq";
        case LIBXL_VIRIDIAN_ENLIGHTENMENT_TIME_REF_COUNT:
            return "time_ref_count";
        case LIBXL_VIRIDIAN_ENLIGHTENMENT_REFERENCE_TSC:
            return "reference_tsc";
        case LIBXL_VIRIDIAN_ENLIGHTENMENT_HCALL_REMOTE_TLB_FLUSH:
            return "hcall_remote_tlb_flush";
        case LIBXL_VIRIDIAN_ENLIGHTENMENT_APIC_ASSIST:
            return "apic_assist";
        case LIBXL_VIRIDIAN_ENLIGHTENMENT_CRASH_CTL:
            return "crash_ctl";
        default:
             return NULL;
    }
}

libxl_enum_string_table libxl_viridian_enlightenment_string_table[] = {
    { .s = "base", .v = LIBXL_VIRIDIAN_ENLIGHTENMENT_BASE },
    { .s = "freq", .v = LIBXL_VIRIDIAN_ENLIGHTENMENT_FREQ },
    { .s = "time_ref_count", .v = LIBXL_VIRIDIAN_ENLIGHTENMENT_TIME_REF_COUNT },
    { .s = "reference_tsc", .v = LIBXL_VIRIDIAN_ENLIGHTENMENT_REFERENCE_TSC },
    { .s = "hcall_remote_tlb_flush", .v = LIBXL_VIRIDIAN_ENLIGHTENMENT_HCALL_REMOTE_TLB_FLUSH },
    { .s = "apic_assist", .v = LIBXL_VIRIDIAN_ENLIGHTENMENT_APIC_ASSIST },
    { .s = "crash_ctl", .v = LIBXL_VIRIDIAN_ENLIGHTENMENT_CRASH_CTL },
    { NULL, -1 },
};

int libxl_viridian_enlightenment_from_string(const char *s, libxl_viridian_enlightenment *e)
{
    return libxl__enum_from_string(libxl_viridian_enlightenment_string_table,
                                   s, (int *)e);
}

const char *libxl_hdtype_to_string(libxl_hdtype e)
{
    switch(e) {
        case LIBXL_HDTYPE_IDE:
            return "ide";
        case LIBXL_HDTYPE_AHCI:
            return "ahci";
        default:
             return NULL;
    }
}

libxl_enum_string_table libxl_hdtype_string_table[] = {
    { .s = "ide", .v = LIBXL_HDTYPE_IDE },
    { .s = "ahci", .v = LIBXL_HDTYPE_AHCI },
    { NULL, -1 },
};

int libxl_hdtype_from_string(const char *s, libxl_hdtype *e)
{
    return libxl__enum_from_string(libxl_hdtype_string_table,
                                   s, (int *)e);
}

const char *libxl_checkpointed_stream_to_string(libxl_checkpointed_stream e)
{
    switch(e) {
        case LIBXL_CHECKPOINTED_STREAM_NONE:
            return "none";
        case LIBXL_CHECKPOINTED_STREAM_REMUS:
            return "remus";
        case LIBXL_CHECKPOINTED_STREAM_COLO:
            return "colo";
        default:
             return NULL;
    }
}

libxl_enum_string_table libxl_checkpointed_stream_string_table[] = {
    { .s = "none", .v = LIBXL_CHECKPOINTED_STREAM_NONE },
    { .s = "remus", .v = LIBXL_CHECKPOINTED_STREAM_REMUS },
    { .s = "colo", .v = LIBXL_CHECKPOINTED_STREAM_COLO },
    { NULL, -1 },
};

int libxl_checkpointed_stream_from_string(const char *s, libxl_checkpointed_stream *e)
{
    return libxl__enum_from_string(libxl_checkpointed_stream_string_table,
                                   s, (int *)e);
}

const char *libxl_vuart_type_to_string(libxl_vuart_type e)
{
    switch(e) {
        case LIBXL_VUART_TYPE_UNKNOWN:
            return "unknown";
        case LIBXL_VUART_TYPE_SBSA_UART:
            return "sbsa_uart";
        default:
             return NULL;
    }
}

libxl_enum_string_table libxl_vuart_type_string_table[] = {
    { .s = "unknown", .v = LIBXL_VUART_TYPE_UNKNOWN },
    { .s = "sbsa_uart", .v = LIBXL_VUART_TYPE_SBSA_UART },
    { NULL, -1 },
};

int libxl_vuart_type_from_string(const char *s, libxl_vuart_type *e)
{
    return libxl__enum_from_string(libxl_vuart_type_string_table,
                                   s, (int *)e);
}

const char *libxl_gic_version_to_string(libxl_gic_version e)
{
    switch(e) {
        case LIBXL_GIC_VERSION_DEFAULT:
            return "default";
        case LIBXL_GIC_VERSION_V2:
            return "v2";
        case LIBXL_GIC_VERSION_V3:
            return "v3";
        default:
             return NULL;
    }
}

libxl_enum_string_table libxl_gic_version_string_table[] = {
    { .s = "default", .v = LIBXL_GIC_VERSION_DEFAULT },
    { .s = "v2", .v = LIBXL_GIC_VERSION_V2 },
    { .s = "v3", .v = LIBXL_GIC_VERSION_V3 },
    { NULL, -1 },
};

int libxl_gic_version_from_string(const char *s, libxl_gic_version *e)
{
    return libxl__enum_from_string(libxl_gic_version_string_table,
                                   s, (int *)e);
}

const char *libxl_altp2m_mode_to_string(libxl_altp2m_mode e)
{
    switch(e) {
        case LIBXL_ALTP2M_MODE_DISABLED:
            return "disabled";
        case LIBXL_ALTP2M_MODE_MIXED:
            return "mixed";
        case LIBXL_ALTP2M_MODE_EXTERNAL:
            return "external";
        case LIBXL_ALTP2M_MODE_LIMITED:
            return "limited";
        default:
             return NULL;
    }
}

libxl_enum_string_table libxl_altp2m_mode_string_table[] = {
    { .s = "disabled", .v = LIBXL_ALTP2M_MODE_DISABLED },
    { .s = "mixed", .v = LIBXL_ALTP2M_MODE_MIXED },
    { .s = "external", .v = LIBXL_ALTP2M_MODE_EXTERNAL },
    { .s = "limited", .v = LIBXL_ALTP2M_MODE_LIMITED },
    { NULL, -1 },
};

int libxl_altp2m_mode_from_string(const char *s, libxl_altp2m_mode *e)
{
    return libxl__enum_from_string(libxl_altp2m_mode_string_table,
                                   s, (int *)e);
}

const char *libxl_usbctrl_type_to_string(libxl_usbctrl_type e)
{
    switch(e) {
        case LIBXL_USBCTRL_TYPE_AUTO:
            return "auto";
        case LIBXL_USBCTRL_TYPE_PV:
            return "pv";
        case LIBXL_USBCTRL_TYPE_DEVICEMODEL:
            return "devicemodel";
        case LIBXL_USBCTRL_TYPE_QUSB:
            return "qusb";
        default:
             return NULL;
    }
}

libxl_enum_string_table libxl_usbctrl_type_string_table[] = {
    { .s = "auto", .v = LIBXL_USBCTRL_TYPE_AUTO },
    { .s = "pv", .v = LIBXL_USBCTRL_TYPE_PV },
    { .s = "devicemodel", .v = LIBXL_USBCTRL_TYPE_DEVICEMODEL },
    { .s = "qusb", .v = LIBXL_USBCTRL_TYPE_QUSB },
    { NULL, -1 },
};

int libxl_usbctrl_type_from_string(const char *s, libxl_usbctrl_type *e)
{
    return libxl__enum_from_string(libxl_usbctrl_type_string_table,
                                   s, (int *)e);
}

const char *libxl_usbdev_type_to_string(libxl_usbdev_type e)
{
    switch(e) {
        case LIBXL_USBDEV_TYPE_HOSTDEV:
            return "hostdev";
        default:
             return NULL;
    }
}

libxl_enum_string_table libxl_usbdev_type_string_table[] = {
    { .s = "hostdev", .v = LIBXL_USBDEV_TYPE_HOSTDEV },
    { NULL, -1 },
};

int libxl_usbdev_type_from_string(const char *s, libxl_usbdev_type *e)
{
    return libxl__enum_from_string(libxl_usbdev_type_string_table,
                                   s, (int *)e);
}

const char *libxl_event_type_to_string(libxl_event_type e)
{
    switch(e) {
        case LIBXL_EVENT_TYPE_DOMAIN_SHUTDOWN:
            return "domain_shutdown";
        case LIBXL_EVENT_TYPE_DOMAIN_DEATH:
            return "domain_death";
        case LIBXL_EVENT_TYPE_DISK_EJECT:
            return "disk_eject";
        case LIBXL_EVENT_TYPE_OPERATION_COMPLETE:
            return "operation_complete";
        case LIBXL_EVENT_TYPE_DOMAIN_CREATE_CONSOLE_AVAILABLE:
            return "domain_create_console_available";
        default:
             return NULL;
    }
}

libxl_enum_string_table libxl_event_type_string_table[] = {
    { .s = "domain_shutdown", .v = LIBXL_EVENT_TYPE_DOMAIN_SHUTDOWN },
    { .s = "domain_death", .v = LIBXL_EVENT_TYPE_DOMAIN_DEATH },
    { .s = "disk_eject", .v = LIBXL_EVENT_TYPE_DISK_EJECT },
    { .s = "operation_complete", .v = LIBXL_EVENT_TYPE_OPERATION_COMPLETE },
    { .s = "domain_create_console_available", .v = LIBXL_EVENT_TYPE_DOMAIN_CREATE_CONSOLE_AVAILABLE },
    { NULL, -1 },
};

int libxl_event_type_from_string(const char *s, libxl_event_type *e)
{
    return libxl__enum_from_string(libxl_event_type_string_table,
                                   s, (int *)e);
}

const char *libxl_psr_cmt_type_to_string(libxl_psr_cmt_type e)
{
    switch(e) {
        case LIBXL_PSR_CMT_TYPE_CACHE_OCCUPANCY:
            return "cache_occupancy";
        case LIBXL_PSR_CMT_TYPE_TOTAL_MEM_COUNT:
            return "total_mem_count";
        case LIBXL_PSR_CMT_TYPE_LOCAL_MEM_COUNT:
            return "local_mem_count";
        default:
             return NULL;
    }
}

libxl_enum_string_table libxl_psr_cmt_type_string_table[] = {
    { .s = "cache_occupancy", .v = LIBXL_PSR_CMT_TYPE_CACHE_OCCUPANCY },
    { .s = "total_mem_count", .v = LIBXL_PSR_CMT_TYPE_TOTAL_MEM_COUNT },
    { .s = "local_mem_count", .v = LIBXL_PSR_CMT_TYPE_LOCAL_MEM_COUNT },
    { NULL, -1 },
};

int libxl_psr_cmt_type_from_string(const char *s, libxl_psr_cmt_type *e)
{
    return libxl__enum_from_string(libxl_psr_cmt_type_string_table,
                                   s, (int *)e);
}

const char *libxl_psr_cbm_type_to_string(libxl_psr_cbm_type e)
{
    switch(e) {
        case LIBXL_PSR_CBM_TYPE_UNKNOWN:
            return "unknown";
        case LIBXL_PSR_CBM_TYPE_L3_CBM:
            return "l3_cbm";
        case LIBXL_PSR_CBM_TYPE_L3_CBM_CODE:
            return "l3_cbm_code";
        case LIBXL_PSR_CBM_TYPE_L3_CBM_DATA:
            return "l3_cbm_data";
        case LIBXL_PSR_CBM_TYPE_L2_CBM:
            return "l2_cbm";
        default:
             return NULL;
    }
}

libxl_enum_string_table libxl_psr_cbm_type_string_table[] = {
    { .s = "unknown", .v = LIBXL_PSR_CBM_TYPE_UNKNOWN },
    { .s = "l3_cbm", .v = LIBXL_PSR_CBM_TYPE_L3_CBM },
    { .s = "l3_cbm_code", .v = LIBXL_PSR_CBM_TYPE_L3_CBM_CODE },
    { .s = "l3_cbm_data", .v = LIBXL_PSR_CBM_TYPE_L3_CBM_DATA },
    { .s = "l2_cbm", .v = LIBXL_PSR_CBM_TYPE_L2_CBM },
    { NULL, -1 },
};

int libxl_psr_cbm_type_from_string(const char *s, libxl_psr_cbm_type *e)
{
    return libxl__enum_from_string(libxl_psr_cbm_type_string_table,
                                   s, (int *)e);
}

yajl_gen_status libxl_domain_unpriv_gen_json(yajl_gen hand, libxl_domain_unpriv *p)
{
    yajl_gen_status s;
    s = libxl__yajl_gen_enum(hand, libxl_domain_unpriv_to_string(*p));
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_domain_unpriv_to_json(libxl_ctx *ctx, libxl_domain_unpriv p)
{
    return libxl__object_to_json(ctx, "libxl_domain_unpriv", (libxl__gen_json_callback)&libxl_domain_unpriv_gen_json, (void *)&p);
}

yajl_gen_status libxl_error_gen_json(yajl_gen hand, libxl_error *p)
{
    yajl_gen_status s;
    s = libxl__yajl_gen_enum(hand, libxl_error_to_string(*p));
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_error_to_json(libxl_ctx *ctx, libxl_error p)
{
    return libxl__object_to_json(ctx, "libxl_error", (libxl__gen_json_callback)&libxl_error_gen_json, (void *)&p);
}

yajl_gen_status libxl_domain_type_gen_json(yajl_gen hand, libxl_domain_type *p)
{
    yajl_gen_status s;
    s = libxl__yajl_gen_enum(hand, libxl_domain_type_to_string(*p));
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_domain_type_to_json(libxl_ctx *ctx, libxl_domain_type p)
{
    return libxl__object_to_json(ctx, "libxl_domain_type", (libxl__gen_json_callback)&libxl_domain_type_gen_json, (void *)&p);
}

yajl_gen_status libxl_rdm_reserve_strategy_gen_json(yajl_gen hand, libxl_rdm_reserve_strategy *p)
{
    yajl_gen_status s;
    s = libxl__yajl_gen_enum(hand, libxl_rdm_reserve_strategy_to_string(*p));
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_rdm_reserve_strategy_to_json(libxl_ctx *ctx, libxl_rdm_reserve_strategy p)
{
    return libxl__object_to_json(ctx, "libxl_rdm_reserve_strategy", (libxl__gen_json_callback)&libxl_rdm_reserve_strategy_gen_json, (void *)&p);
}

yajl_gen_status libxl_rdm_reserve_policy_gen_json(yajl_gen hand, libxl_rdm_reserve_policy *p)
{
    yajl_gen_status s;
    s = libxl__yajl_gen_enum(hand, libxl_rdm_reserve_policy_to_string(*p));
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_rdm_reserve_policy_to_json(libxl_ctx *ctx, libxl_rdm_reserve_policy p)
{
    return libxl__object_to_json(ctx, "libxl_rdm_reserve_policy", (libxl__gen_json_callback)&libxl_rdm_reserve_policy_gen_json, (void *)&p);
}

yajl_gen_status libxl_channel_connection_gen_json(yajl_gen hand, libxl_channel_connection *p)
{
    yajl_gen_status s;
    s = libxl__yajl_gen_enum(hand, libxl_channel_connection_to_string(*p));
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_channel_connection_to_json(libxl_ctx *ctx, libxl_channel_connection p)
{
    return libxl__object_to_json(ctx, "libxl_channel_connection", (libxl__gen_json_callback)&libxl_channel_connection_gen_json, (void *)&p);
}

yajl_gen_status libxl_device_model_version_gen_json(yajl_gen hand, libxl_device_model_version *p)
{
    yajl_gen_status s;
    s = libxl__yajl_gen_enum(hand, libxl_device_model_version_to_string(*p));
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_device_model_version_to_json(libxl_ctx *ctx, libxl_device_model_version p)
{
    return libxl__object_to_json(ctx, "libxl_device_model_version", (libxl__gen_json_callback)&libxl_device_model_version_gen_json, (void *)&p);
}

yajl_gen_status libxl_console_type_gen_json(yajl_gen hand, libxl_console_type *p)
{
    yajl_gen_status s;
    s = libxl__yajl_gen_enum(hand, libxl_console_type_to_string(*p));
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_console_type_to_json(libxl_ctx *ctx, libxl_console_type p)
{
    return libxl__object_to_json(ctx, "libxl_console_type", (libxl__gen_json_callback)&libxl_console_type_gen_json, (void *)&p);
}

yajl_gen_status libxl_disk_format_gen_json(yajl_gen hand, libxl_disk_format *p)
{
    yajl_gen_status s;
    s = libxl__yajl_gen_enum(hand, libxl_disk_format_to_string(*p));
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_disk_format_to_json(libxl_ctx *ctx, libxl_disk_format p)
{
    return libxl__object_to_json(ctx, "libxl_disk_format", (libxl__gen_json_callback)&libxl_disk_format_gen_json, (void *)&p);
}

yajl_gen_status libxl_disk_backend_gen_json(yajl_gen hand, libxl_disk_backend *p)
{
    yajl_gen_status s;
    s = libxl__yajl_gen_enum(hand, libxl_disk_backend_to_string(*p));
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_disk_backend_to_json(libxl_ctx *ctx, libxl_disk_backend p)
{
    return libxl__object_to_json(ctx, "libxl_disk_backend", (libxl__gen_json_callback)&libxl_disk_backend_gen_json, (void *)&p);
}

yajl_gen_status libxl_nic_type_gen_json(yajl_gen hand, libxl_nic_type *p)
{
    yajl_gen_status s;
    s = libxl__yajl_gen_enum(hand, libxl_nic_type_to_string(*p));
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_nic_type_to_json(libxl_ctx *ctx, libxl_nic_type p)
{
    return libxl__object_to_json(ctx, "libxl_nic_type", (libxl__gen_json_callback)&libxl_nic_type_gen_json, (void *)&p);
}

yajl_gen_status libxl_action_on_shutdown_gen_json(yajl_gen hand, libxl_action_on_shutdown *p)
{
    yajl_gen_status s;
    s = libxl__yajl_gen_enum(hand, libxl_action_on_shutdown_to_string(*p));
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_action_on_shutdown_to_json(libxl_ctx *ctx, libxl_action_on_shutdown p)
{
    return libxl__object_to_json(ctx, "libxl_action_on_shutdown", (libxl__gen_json_callback)&libxl_action_on_shutdown_gen_json, (void *)&p);
}

yajl_gen_status libxl_trigger_gen_json(yajl_gen hand, libxl_trigger *p)
{
    yajl_gen_status s;
    s = libxl__yajl_gen_enum(hand, libxl_trigger_to_string(*p));
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_trigger_to_json(libxl_ctx *ctx, libxl_trigger p)
{
    return libxl__object_to_json(ctx, "libxl_trigger", (libxl__gen_json_callback)&libxl_trigger_gen_json, (void *)&p);
}

yajl_gen_status libxl_tsc_mode_gen_json(yajl_gen hand, libxl_tsc_mode *p)
{
    yajl_gen_status s;
    s = libxl__yajl_gen_enum(hand, libxl_tsc_mode_to_string(*p));
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_tsc_mode_to_json(libxl_ctx *ctx, libxl_tsc_mode p)
{
    return libxl__object_to_json(ctx, "libxl_tsc_mode", (libxl__gen_json_callback)&libxl_tsc_mode_gen_json, (void *)&p);
}

yajl_gen_status libxl_gfx_passthru_kind_gen_json(yajl_gen hand, libxl_gfx_passthru_kind *p)
{
    yajl_gen_status s;
    s = libxl__yajl_gen_enum(hand, libxl_gfx_passthru_kind_to_string(*p));
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_gfx_passthru_kind_to_json(libxl_ctx *ctx, libxl_gfx_passthru_kind p)
{
    return libxl__object_to_json(ctx, "libxl_gfx_passthru_kind", (libxl__gen_json_callback)&libxl_gfx_passthru_kind_gen_json, (void *)&p);
}

yajl_gen_status libxl_timer_mode_gen_json(yajl_gen hand, libxl_timer_mode *p)
{
    yajl_gen_status s;
    s = libxl__yajl_gen_enum(hand, libxl_timer_mode_to_string(*p));
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_timer_mode_to_json(libxl_ctx *ctx, libxl_timer_mode p)
{
    return libxl__object_to_json(ctx, "libxl_timer_mode", (libxl__gen_json_callback)&libxl_timer_mode_gen_json, (void *)&p);
}

yajl_gen_status libxl_bios_type_gen_json(yajl_gen hand, libxl_bios_type *p)
{
    yajl_gen_status s;
    s = libxl__yajl_gen_enum(hand, libxl_bios_type_to_string(*p));
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_bios_type_to_json(libxl_ctx *ctx, libxl_bios_type p)
{
    return libxl__object_to_json(ctx, "libxl_bios_type", (libxl__gen_json_callback)&libxl_bios_type_gen_json, (void *)&p);
}

yajl_gen_status libxl_scheduler_gen_json(yajl_gen hand, libxl_scheduler *p)
{
    yajl_gen_status s;
    s = libxl__yajl_gen_enum(hand, libxl_scheduler_to_string(*p));
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_scheduler_to_json(libxl_ctx *ctx, libxl_scheduler p)
{
    return libxl__object_to_json(ctx, "libxl_scheduler", (libxl__gen_json_callback)&libxl_scheduler_gen_json, (void *)&p);
}

yajl_gen_status libxl_shutdown_reason_gen_json(yajl_gen hand, libxl_shutdown_reason *p)
{
    yajl_gen_status s;
    s = libxl__yajl_gen_enum(hand, libxl_shutdown_reason_to_string(*p));
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_shutdown_reason_to_json(libxl_ctx *ctx, libxl_shutdown_reason p)
{
    return libxl__object_to_json(ctx, "libxl_shutdown_reason", (libxl__gen_json_callback)&libxl_shutdown_reason_gen_json, (void *)&p);
}

yajl_gen_status libxl_vga_interface_type_gen_json(yajl_gen hand, libxl_vga_interface_type *p)
{
    yajl_gen_status s;
    s = libxl__yajl_gen_enum(hand, libxl_vga_interface_type_to_string(*p));
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_vga_interface_type_to_json(libxl_ctx *ctx, libxl_vga_interface_type p)
{
    return libxl__object_to_json(ctx, "libxl_vga_interface_type", (libxl__gen_json_callback)&libxl_vga_interface_type_gen_json, (void *)&p);
}

yajl_gen_status libxl_vendor_device_gen_json(yajl_gen hand, libxl_vendor_device *p)
{
    yajl_gen_status s;
    s = libxl__yajl_gen_enum(hand, libxl_vendor_device_to_string(*p));
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_vendor_device_to_json(libxl_ctx *ctx, libxl_vendor_device p)
{
    return libxl__object_to_json(ctx, "libxl_vendor_device", (libxl__gen_json_callback)&libxl_vendor_device_gen_json, (void *)&p);
}

yajl_gen_status libxl_viridian_enlightenment_gen_json(yajl_gen hand, libxl_viridian_enlightenment *p)
{
    yajl_gen_status s;
    s = libxl__yajl_gen_enum(hand, libxl_viridian_enlightenment_to_string(*p));
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_viridian_enlightenment_to_json(libxl_ctx *ctx, libxl_viridian_enlightenment p)
{
    return libxl__object_to_json(ctx, "libxl_viridian_enlightenment", (libxl__gen_json_callback)&libxl_viridian_enlightenment_gen_json, (void *)&p);
}

yajl_gen_status libxl_hdtype_gen_json(yajl_gen hand, libxl_hdtype *p)
{
    yajl_gen_status s;
    s = libxl__yajl_gen_enum(hand, libxl_hdtype_to_string(*p));
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_hdtype_to_json(libxl_ctx *ctx, libxl_hdtype p)
{
    return libxl__object_to_json(ctx, "libxl_hdtype", (libxl__gen_json_callback)&libxl_hdtype_gen_json, (void *)&p);
}

yajl_gen_status libxl_checkpointed_stream_gen_json(yajl_gen hand, libxl_checkpointed_stream *p)
{
    yajl_gen_status s;
    s = libxl__yajl_gen_enum(hand, libxl_checkpointed_stream_to_string(*p));
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_checkpointed_stream_to_json(libxl_ctx *ctx, libxl_checkpointed_stream p)
{
    return libxl__object_to_json(ctx, "libxl_checkpointed_stream", (libxl__gen_json_callback)&libxl_checkpointed_stream_gen_json, (void *)&p);
}

yajl_gen_status libxl_vuart_type_gen_json(yajl_gen hand, libxl_vuart_type *p)
{
    yajl_gen_status s;
    s = libxl__yajl_gen_enum(hand, libxl_vuart_type_to_string(*p));
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_vuart_type_to_json(libxl_ctx *ctx, libxl_vuart_type p)
{
    return libxl__object_to_json(ctx, "libxl_vuart_type", (libxl__gen_json_callback)&libxl_vuart_type_gen_json, (void *)&p);
}

yajl_gen_status libxl_ioport_range_gen_json(yajl_gen hand, libxl_ioport_range *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    if (p->first) {
        s = yajl_gen_string(hand, (const unsigned char *)"first", sizeof("first")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->first);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->number) {
        s = yajl_gen_string(hand, (const unsigned char *)"number", sizeof("number")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->number);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_ioport_range_to_json(libxl_ctx *ctx, libxl_ioport_range *p)
{
    return libxl__object_to_json(ctx, "libxl_ioport_range", (libxl__gen_json_callback)&libxl_ioport_range_gen_json, (void *)p);
}

yajl_gen_status libxl_iomem_range_gen_json(yajl_gen hand, libxl_iomem_range *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    if (p->start) {
        s = yajl_gen_string(hand, (const unsigned char *)"start", sizeof("start")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__uint64_gen_json(hand, p->start);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->number) {
        s = yajl_gen_string(hand, (const unsigned char *)"number", sizeof("number")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__uint64_gen_json(hand, p->number);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->gfn != LIBXL_INVALID_GFN) {
        s = yajl_gen_string(hand, (const unsigned char *)"gfn", sizeof("gfn")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__uint64_gen_json(hand, p->gfn);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_iomem_range_to_json(libxl_ctx *ctx, libxl_iomem_range *p)
{
    return libxl__object_to_json(ctx, "libxl_iomem_range", (libxl__gen_json_callback)&libxl_iomem_range_gen_json, (void *)p);
}

yajl_gen_status libxl_vga_interface_info_gen_json(yajl_gen hand, libxl_vga_interface_info *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    if (p->kind != LIBXL_VGA_INTERFACE_TYPE_UNKNOWN) {
        s = yajl_gen_string(hand, (const unsigned char *)"kind", sizeof("kind")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__yajl_gen_enum(hand, libxl_vga_interface_type_to_string(p->kind));
        if (s != yajl_gen_status_ok)
            goto out;
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_vga_interface_info_to_json(libxl_ctx *ctx, libxl_vga_interface_info *p)
{
    return libxl__object_to_json(ctx, "libxl_vga_interface_info", (libxl__gen_json_callback)&libxl_vga_interface_info_gen_json, (void *)p);
}

yajl_gen_status libxl_vnc_info_gen_json(yajl_gen hand, libxl_vnc_info *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    if (!libxl__defbool_is_default(&p->enable)) {
        s = yajl_gen_string(hand, (const unsigned char *)"enable", sizeof("enable")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_defbool_gen_json(hand, &p->enable);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->listen)) {
        s = yajl_gen_string(hand, (const unsigned char *)"listen", sizeof("listen")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->listen);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->passwd)) {
        s = yajl_gen_string(hand, (const unsigned char *)"passwd", sizeof("passwd")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->passwd);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->display) {
        s = yajl_gen_string(hand, (const unsigned char *)"display", sizeof("display")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->display);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__defbool_is_default(&p->findunused)) {
        s = yajl_gen_string(hand, (const unsigned char *)"findunused", sizeof("findunused")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_defbool_gen_json(hand, &p->findunused);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_vnc_info_to_json(libxl_ctx *ctx, libxl_vnc_info *p)
{
    return libxl__object_to_json(ctx, "libxl_vnc_info", (libxl__gen_json_callback)&libxl_vnc_info_gen_json, (void *)p);
}

yajl_gen_status libxl_spice_info_gen_json(yajl_gen hand, libxl_spice_info *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    if (!libxl__defbool_is_default(&p->enable)) {
        s = yajl_gen_string(hand, (const unsigned char *)"enable", sizeof("enable")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_defbool_gen_json(hand, &p->enable);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->port) {
        s = yajl_gen_string(hand, (const unsigned char *)"port", sizeof("port")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->port);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->tls_port) {
        s = yajl_gen_string(hand, (const unsigned char *)"tls_port", sizeof("tls_port")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->tls_port);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->host)) {
        s = yajl_gen_string(hand, (const unsigned char *)"host", sizeof("host")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->host);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__defbool_is_default(&p->disable_ticketing)) {
        s = yajl_gen_string(hand, (const unsigned char *)"disable_ticketing", sizeof("disable_ticketing")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_defbool_gen_json(hand, &p->disable_ticketing);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->passwd)) {
        s = yajl_gen_string(hand, (const unsigned char *)"passwd", sizeof("passwd")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->passwd);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__defbool_is_default(&p->agent_mouse)) {
        s = yajl_gen_string(hand, (const unsigned char *)"agent_mouse", sizeof("agent_mouse")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_defbool_gen_json(hand, &p->agent_mouse);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__defbool_is_default(&p->vdagent)) {
        s = yajl_gen_string(hand, (const unsigned char *)"vdagent", sizeof("vdagent")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_defbool_gen_json(hand, &p->vdagent);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__defbool_is_default(&p->clipboard_sharing)) {
        s = yajl_gen_string(hand, (const unsigned char *)"clipboard_sharing", sizeof("clipboard_sharing")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_defbool_gen_json(hand, &p->clipboard_sharing);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->usbredirection) {
        s = yajl_gen_string(hand, (const unsigned char *)"usbredirection", sizeof("usbredirection")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->usbredirection);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->image_compression)) {
        s = yajl_gen_string(hand, (const unsigned char *)"image_compression", sizeof("image_compression")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->image_compression);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->streaming_video)) {
        s = yajl_gen_string(hand, (const unsigned char *)"streaming_video", sizeof("streaming_video")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->streaming_video);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_spice_info_to_json(libxl_ctx *ctx, libxl_spice_info *p)
{
    return libxl__object_to_json(ctx, "libxl_spice_info", (libxl__gen_json_callback)&libxl_spice_info_gen_json, (void *)p);
}

yajl_gen_status libxl_sdl_info_gen_json(yajl_gen hand, libxl_sdl_info *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    if (!libxl__defbool_is_default(&p->enable)) {
        s = yajl_gen_string(hand, (const unsigned char *)"enable", sizeof("enable")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_defbool_gen_json(hand, &p->enable);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__defbool_is_default(&p->opengl)) {
        s = yajl_gen_string(hand, (const unsigned char *)"opengl", sizeof("opengl")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_defbool_gen_json(hand, &p->opengl);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->display)) {
        s = yajl_gen_string(hand, (const unsigned char *)"display", sizeof("display")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->display);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->xauthority)) {
        s = yajl_gen_string(hand, (const unsigned char *)"xauthority", sizeof("xauthority")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->xauthority);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_sdl_info_to_json(libxl_ctx *ctx, libxl_sdl_info *p)
{
    return libxl__object_to_json(ctx, "libxl_sdl_info", (libxl__gen_json_callback)&libxl_sdl_info_gen_json, (void *)p);
}

yajl_gen_status libxl_dominfo_gen_json(yajl_gen hand, libxl_dominfo *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    if (!libxl_uuid_is_nil(&p->uuid)) {
        s = yajl_gen_string(hand, (const unsigned char *)"uuid", sizeof("uuid")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_uuid_gen_json(hand, &p->uuid);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->domid) {
        s = yajl_gen_string(hand, (const unsigned char *)"domid", sizeof("domid")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->domid);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->ssidref) {
        s = yajl_gen_string(hand, (const unsigned char *)"ssidref", sizeof("ssidref")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->ssidref);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->ssid_label)) {
        s = yajl_gen_string(hand, (const unsigned char *)"ssid_label", sizeof("ssid_label")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->ssid_label);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->running) {
        s = yajl_gen_string(hand, (const unsigned char *)"running", sizeof("running")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_bool(hand, p->running);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->blocked) {
        s = yajl_gen_string(hand, (const unsigned char *)"blocked", sizeof("blocked")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_bool(hand, p->blocked);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->paused) {
        s = yajl_gen_string(hand, (const unsigned char *)"paused", sizeof("paused")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_bool(hand, p->paused);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->shutdown) {
        s = yajl_gen_string(hand, (const unsigned char *)"shutdown", sizeof("shutdown")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_bool(hand, p->shutdown);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->dying) {
        s = yajl_gen_string(hand, (const unsigned char *)"dying", sizeof("dying")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_bool(hand, p->dying);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->never_stop) {
        s = yajl_gen_string(hand, (const unsigned char *)"never_stop", sizeof("never_stop")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_bool(hand, p->never_stop);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->shutdown_reason != LIBXL_SHUTDOWN_REASON_UNKNOWN) {
        s = yajl_gen_string(hand, (const unsigned char *)"shutdown_reason", sizeof("shutdown_reason")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__yajl_gen_enum(hand, libxl_shutdown_reason_to_string(p->shutdown_reason));
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->outstanding_memkb != LIBXL_MEMKB_DEFAULT) {
        s = yajl_gen_string(hand, (const unsigned char *)"outstanding_memkb", sizeof("outstanding_memkb")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__uint64_gen_json(hand, p->outstanding_memkb);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->current_memkb != LIBXL_MEMKB_DEFAULT) {
        s = yajl_gen_string(hand, (const unsigned char *)"current_memkb", sizeof("current_memkb")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__uint64_gen_json(hand, p->current_memkb);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->shared_memkb != LIBXL_MEMKB_DEFAULT) {
        s = yajl_gen_string(hand, (const unsigned char *)"shared_memkb", sizeof("shared_memkb")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__uint64_gen_json(hand, p->shared_memkb);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->paged_memkb != LIBXL_MEMKB_DEFAULT) {
        s = yajl_gen_string(hand, (const unsigned char *)"paged_memkb", sizeof("paged_memkb")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__uint64_gen_json(hand, p->paged_memkb);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->max_memkb != LIBXL_MEMKB_DEFAULT) {
        s = yajl_gen_string(hand, (const unsigned char *)"max_memkb", sizeof("max_memkb")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__uint64_gen_json(hand, p->max_memkb);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->cpu_time) {
        s = yajl_gen_string(hand, (const unsigned char *)"cpu_time", sizeof("cpu_time")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__uint64_gen_json(hand, p->cpu_time);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->vcpu_max_id) {
        s = yajl_gen_string(hand, (const unsigned char *)"vcpu_max_id", sizeof("vcpu_max_id")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->vcpu_max_id);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->vcpu_online) {
        s = yajl_gen_string(hand, (const unsigned char *)"vcpu_online", sizeof("vcpu_online")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->vcpu_online);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->cpupool) {
        s = yajl_gen_string(hand, (const unsigned char *)"cpupool", sizeof("cpupool")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->cpupool);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->domain_type != LIBXL_DOMAIN_TYPE_INVALID) {
        s = yajl_gen_string(hand, (const unsigned char *)"domain_type", sizeof("domain_type")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__yajl_gen_enum(hand, libxl_domain_type_to_string(p->domain_type));
        if (s != yajl_gen_status_ok)
            goto out;
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_dominfo_to_json(libxl_ctx *ctx, libxl_dominfo *p)
{
    return libxl__object_to_json(ctx, "libxl_dominfo", (libxl__gen_json_callback)&libxl_dominfo_gen_json, (void *)p);
}

yajl_gen_status libxl_cpupoolinfo_gen_json(yajl_gen hand, libxl_cpupoolinfo *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    if (p->poolid) {
        s = yajl_gen_string(hand, (const unsigned char *)"poolid", sizeof("poolid")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->poolid);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->pool_name)) {
        s = yajl_gen_string(hand, (const unsigned char *)"pool_name", sizeof("pool_name")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->pool_name);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->sched) {
        s = yajl_gen_string(hand, (const unsigned char *)"sched", sizeof("sched")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__yajl_gen_enum(hand, libxl_scheduler_to_string(p->sched));
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->n_dom) {
        s = yajl_gen_string(hand, (const unsigned char *)"n_dom", sizeof("n_dom")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->n_dom);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl_bitmap_is_empty(&p->cpumap)) {
        s = yajl_gen_string(hand, (const unsigned char *)"cpumap", sizeof("cpumap")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_bitmap_gen_json(hand, &p->cpumap);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_cpupoolinfo_to_json(libxl_ctx *ctx, libxl_cpupoolinfo *p)
{
    return libxl__object_to_json(ctx, "libxl_cpupoolinfo", (libxl__gen_json_callback)&libxl_cpupoolinfo_gen_json, (void *)p);
}

yajl_gen_status libxl_channelinfo_gen_json(yajl_gen hand, libxl_channelinfo *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    if (!libxl__string_is_default(&p->backend)) {
        s = yajl_gen_string(hand, (const unsigned char *)"backend", sizeof("backend")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->backend);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->backend_id) {
        s = yajl_gen_string(hand, (const unsigned char *)"backend_id", sizeof("backend_id")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->backend_id);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->frontend)) {
        s = yajl_gen_string(hand, (const unsigned char *)"frontend", sizeof("frontend")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->frontend);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->frontend_id) {
        s = yajl_gen_string(hand, (const unsigned char *)"frontend_id", sizeof("frontend_id")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->frontend_id);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->devid != -1) {
        s = yajl_gen_string(hand, (const unsigned char *)"devid", sizeof("devid")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->devid);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->state) {
        s = yajl_gen_string(hand, (const unsigned char *)"state", sizeof("state")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->state);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->evtch) {
        s = yajl_gen_string(hand, (const unsigned char *)"evtch", sizeof("evtch")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->evtch);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->rref) {
        s = yajl_gen_string(hand, (const unsigned char *)"rref", sizeof("rref")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->rref);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (1 /* always generate JSON output for aggregate type */) {
        switch (p->connection) {
        case LIBXL_CHANNEL_CONNECTION_UNKNOWN:
            s = yajl_gen_string(hand, (const unsigned char *)"connection.unknown", sizeof("connection.unknown")-1);
            if (s != yajl_gen_status_ok)
                goto out;
            break;
        case LIBXL_CHANNEL_CONNECTION_PTY:
            s = yajl_gen_string(hand, (const unsigned char *)"connection.pty", sizeof("connection.pty")-1);
            if (s != yajl_gen_status_ok)
                goto out;
            break;
        case LIBXL_CHANNEL_CONNECTION_SOCKET:
            s = yajl_gen_string(hand, (const unsigned char *)"connection.socket", sizeof("connection.socket")-1);
            if (s != yajl_gen_status_ok)
                goto out;
            break;
        }
        switch (p->connection) {
        case LIBXL_CHANNEL_CONNECTION_UNKNOWN:
            s = yajl_gen_map_open(hand);
            if (s != yajl_gen_status_ok)
                goto out;
            s = yajl_gen_map_close(hand);
            if (s != yajl_gen_status_ok)
                goto out;
            break;
        case LIBXL_CHANNEL_CONNECTION_PTY:
                s = yajl_gen_map_open(hand);
                if (s != yajl_gen_status_ok)
                    goto out;
                if (!libxl__string_is_default(&p->u.pty.path)) {
                    s = yajl_gen_string(hand, (const unsigned char *)"path", sizeof("path")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl__string_gen_json(hand, p->u.pty.path);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                s = yajl_gen_map_close(hand);
                if (s != yajl_gen_status_ok)
                    goto out;
            break;
        case LIBXL_CHANNEL_CONNECTION_SOCKET:
            s = yajl_gen_map_open(hand);
            if (s != yajl_gen_status_ok)
                goto out;
            s = yajl_gen_map_close(hand);
            if (s != yajl_gen_status_ok)
                goto out;
            break;
        }
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_channelinfo_to_json(libxl_ctx *ctx, libxl_channelinfo *p)
{
    return libxl__object_to_json(ctx, "libxl_channelinfo", (libxl__gen_json_callback)&libxl_channelinfo_gen_json, (void *)p);
}

yajl_gen_status libxl_vminfo_gen_json(yajl_gen hand, libxl_vminfo *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    if (!libxl_uuid_is_nil(&p->uuid)) {
        s = yajl_gen_string(hand, (const unsigned char *)"uuid", sizeof("uuid")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_uuid_gen_json(hand, &p->uuid);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->domid) {
        s = yajl_gen_string(hand, (const unsigned char *)"domid", sizeof("domid")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->domid);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_vminfo_to_json(libxl_ctx *ctx, libxl_vminfo *p)
{
    return libxl__object_to_json(ctx, "libxl_vminfo", (libxl__gen_json_callback)&libxl_vminfo_gen_json, (void *)p);
}

yajl_gen_status libxl_version_info_gen_json(yajl_gen hand, libxl_version_info *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    if (p->xen_version_major) {
        s = yajl_gen_string(hand, (const unsigned char *)"xen_version_major", sizeof("xen_version_major")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->xen_version_major);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->xen_version_minor) {
        s = yajl_gen_string(hand, (const unsigned char *)"xen_version_minor", sizeof("xen_version_minor")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->xen_version_minor);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->xen_version_extra)) {
        s = yajl_gen_string(hand, (const unsigned char *)"xen_version_extra", sizeof("xen_version_extra")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->xen_version_extra);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->compiler)) {
        s = yajl_gen_string(hand, (const unsigned char *)"compiler", sizeof("compiler")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->compiler);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->compile_by)) {
        s = yajl_gen_string(hand, (const unsigned char *)"compile_by", sizeof("compile_by")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->compile_by);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->compile_domain)) {
        s = yajl_gen_string(hand, (const unsigned char *)"compile_domain", sizeof("compile_domain")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->compile_domain);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->compile_date)) {
        s = yajl_gen_string(hand, (const unsigned char *)"compile_date", sizeof("compile_date")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->compile_date);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->capabilities)) {
        s = yajl_gen_string(hand, (const unsigned char *)"capabilities", sizeof("capabilities")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->capabilities);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->changeset)) {
        s = yajl_gen_string(hand, (const unsigned char *)"changeset", sizeof("changeset")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->changeset);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->virt_start) {
        s = yajl_gen_string(hand, (const unsigned char *)"virt_start", sizeof("virt_start")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__uint64_gen_json(hand, p->virt_start);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->pagesize) {
        s = yajl_gen_string(hand, (const unsigned char *)"pagesize", sizeof("pagesize")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->pagesize);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->commandline)) {
        s = yajl_gen_string(hand, (const unsigned char *)"commandline", sizeof("commandline")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->commandline);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->build_id)) {
        s = yajl_gen_string(hand, (const unsigned char *)"build_id", sizeof("build_id")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->build_id);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_version_info_to_json(libxl_ctx *ctx, libxl_version_info *p)
{
    return libxl__object_to_json(ctx, "libxl_version_info", (libxl__gen_json_callback)&libxl_version_info_gen_json, (void *)p);
}

yajl_gen_status libxl_domain_create_info_gen_json(yajl_gen hand, libxl_domain_create_info *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    if (p->type != LIBXL_DOMAIN_TYPE_INVALID) {
        s = yajl_gen_string(hand, (const unsigned char *)"type", sizeof("type")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__yajl_gen_enum(hand, libxl_domain_type_to_string(p->type));
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__defbool_is_default(&p->hap)) {
        s = yajl_gen_string(hand, (const unsigned char *)"hap", sizeof("hap")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_defbool_gen_json(hand, &p->hap);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__defbool_is_default(&p->oos)) {
        s = yajl_gen_string(hand, (const unsigned char *)"oos", sizeof("oos")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_defbool_gen_json(hand, &p->oos);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->ssidref) {
        s = yajl_gen_string(hand, (const unsigned char *)"ssidref", sizeof("ssidref")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->ssidref);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->ssid_label)) {
        s = yajl_gen_string(hand, (const unsigned char *)"ssid_label", sizeof("ssid_label")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->ssid_label);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->name)) {
        s = yajl_gen_string(hand, (const unsigned char *)"name", sizeof("name")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->name);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl_uuid_is_nil(&p->uuid)) {
        s = yajl_gen_string(hand, (const unsigned char *)"uuid", sizeof("uuid")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_uuid_gen_json(hand, &p->uuid);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__key_value_list_is_empty(&p->xsdata)) {
        s = yajl_gen_string(hand, (const unsigned char *)"xsdata", sizeof("xsdata")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_key_value_list_gen_json(hand, &p->xsdata);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__key_value_list_is_empty(&p->platformdata)) {
        s = yajl_gen_string(hand, (const unsigned char *)"platformdata", sizeof("platformdata")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_key_value_list_gen_json(hand, &p->platformdata);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->poolid) {
        s = yajl_gen_string(hand, (const unsigned char *)"poolid", sizeof("poolid")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->poolid);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->pool_name)) {
        s = yajl_gen_string(hand, (const unsigned char *)"pool_name", sizeof("pool_name")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->pool_name);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__defbool_is_default(&p->run_hotplug_scripts)) {
        s = yajl_gen_string(hand, (const unsigned char *)"run_hotplug_scripts", sizeof("run_hotplug_scripts")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_defbool_gen_json(hand, &p->run_hotplug_scripts);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__defbool_is_default(&p->driver_domain)) {
        s = yajl_gen_string(hand, (const unsigned char *)"driver_domain", sizeof("driver_domain")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_defbool_gen_json(hand, &p->driver_domain);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_domain_create_info_to_json(libxl_ctx *ctx, libxl_domain_create_info *p)
{
    return libxl__object_to_json(ctx, "libxl_domain_create_info", (libxl__gen_json_callback)&libxl_domain_create_info_gen_json, (void *)p);
}

yajl_gen_status libxl_domain_restore_params_gen_json(yajl_gen hand, libxl_domain_restore_params *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    if (p->checkpointed_stream) {
        s = yajl_gen_string(hand, (const unsigned char *)"checkpointed_stream", sizeof("checkpointed_stream")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->checkpointed_stream);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->stream_version != 1) {
        s = yajl_gen_string(hand, (const unsigned char *)"stream_version", sizeof("stream_version")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->stream_version);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->colo_proxy_script)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_proxy_script", sizeof("colo_proxy_script")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->colo_proxy_script);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__defbool_is_default(&p->userspace_colo_proxy)) {
        s = yajl_gen_string(hand, (const unsigned char *)"userspace_colo_proxy", sizeof("userspace_colo_proxy")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_defbool_gen_json(hand, &p->userspace_colo_proxy);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_domain_restore_params_to_json(libxl_ctx *ctx, libxl_domain_restore_params *p)
{
    return libxl__object_to_json(ctx, "libxl_domain_restore_params", (libxl__gen_json_callback)&libxl_domain_restore_params_gen_json, (void *)p);
}

yajl_gen_status libxl_sched_params_gen_json(yajl_gen hand, libxl_sched_params *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    if (p->vcpuid != LIBXL_SCHED_PARAM_VCPU_INDEX_DEFAULT) {
        s = yajl_gen_string(hand, (const unsigned char *)"vcpuid", sizeof("vcpuid")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->vcpuid);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->weight != LIBXL_DOMAIN_SCHED_PARAM_WEIGHT_DEFAULT) {
        s = yajl_gen_string(hand, (const unsigned char *)"weight", sizeof("weight")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->weight);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->cap != LIBXL_DOMAIN_SCHED_PARAM_CAP_DEFAULT) {
        s = yajl_gen_string(hand, (const unsigned char *)"cap", sizeof("cap")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->cap);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->period != LIBXL_DOMAIN_SCHED_PARAM_PERIOD_DEFAULT) {
        s = yajl_gen_string(hand, (const unsigned char *)"period", sizeof("period")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->period);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->extratime != LIBXL_DOMAIN_SCHED_PARAM_EXTRATIME_DEFAULT) {
        s = yajl_gen_string(hand, (const unsigned char *)"extratime", sizeof("extratime")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->extratime);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->budget != LIBXL_DOMAIN_SCHED_PARAM_BUDGET_DEFAULT) {
        s = yajl_gen_string(hand, (const unsigned char *)"budget", sizeof("budget")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->budget);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_sched_params_to_json(libxl_ctx *ctx, libxl_sched_params *p)
{
    return libxl__object_to_json(ctx, "libxl_sched_params", (libxl__gen_json_callback)&libxl_sched_params_gen_json, (void *)p);
}

yajl_gen_status libxl_vcpu_sched_params_gen_json(yajl_gen hand, libxl_vcpu_sched_params *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    if (p->sched) {
        s = yajl_gen_string(hand, (const unsigned char *)"sched", sizeof("sched")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__yajl_gen_enum(hand, libxl_scheduler_to_string(p->sched));
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->vcpus && p->num_vcpus) {
        s = yajl_gen_string(hand, (const unsigned char *)"vcpus", sizeof("vcpus")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        {
            int i;
            s = yajl_gen_array_open(hand);
            if (s != yajl_gen_status_ok)
                goto out;
            for (i=0; i<p->num_vcpus; i++) {
                    s = libxl_sched_params_gen_json(hand, &p->vcpus[i]);
                    if (s != yajl_gen_status_ok)
                        goto out;
            }
            s = yajl_gen_array_close(hand);
            if (s != yajl_gen_status_ok)
                goto out;
        }
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_vcpu_sched_params_to_json(libxl_ctx *ctx, libxl_vcpu_sched_params *p)
{
    return libxl__object_to_json(ctx, "libxl_vcpu_sched_params", (libxl__gen_json_callback)&libxl_vcpu_sched_params_gen_json, (void *)p);
}

yajl_gen_status libxl_domain_sched_params_gen_json(yajl_gen hand, libxl_domain_sched_params *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    if (p->sched) {
        s = yajl_gen_string(hand, (const unsigned char *)"sched", sizeof("sched")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__yajl_gen_enum(hand, libxl_scheduler_to_string(p->sched));
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->weight != LIBXL_DOMAIN_SCHED_PARAM_WEIGHT_DEFAULT) {
        s = yajl_gen_string(hand, (const unsigned char *)"weight", sizeof("weight")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->weight);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->cap != LIBXL_DOMAIN_SCHED_PARAM_CAP_DEFAULT) {
        s = yajl_gen_string(hand, (const unsigned char *)"cap", sizeof("cap")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->cap);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->period != LIBXL_DOMAIN_SCHED_PARAM_PERIOD_DEFAULT) {
        s = yajl_gen_string(hand, (const unsigned char *)"period", sizeof("period")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->period);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->budget != LIBXL_DOMAIN_SCHED_PARAM_BUDGET_DEFAULT) {
        s = yajl_gen_string(hand, (const unsigned char *)"budget", sizeof("budget")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->budget);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->extratime != LIBXL_DOMAIN_SCHED_PARAM_EXTRATIME_DEFAULT) {
        s = yajl_gen_string(hand, (const unsigned char *)"extratime", sizeof("extratime")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->extratime);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->slice != LIBXL_DOMAIN_SCHED_PARAM_SLICE_DEFAULT) {
        s = yajl_gen_string(hand, (const unsigned char *)"slice", sizeof("slice")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->slice);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->latency != LIBXL_DOMAIN_SCHED_PARAM_LATENCY_DEFAULT) {
        s = yajl_gen_string(hand, (const unsigned char *)"latency", sizeof("latency")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->latency);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_domain_sched_params_to_json(libxl_ctx *ctx, libxl_domain_sched_params *p)
{
    return libxl__object_to_json(ctx, "libxl_domain_sched_params", (libxl__gen_json_callback)&libxl_domain_sched_params_gen_json, (void *)p);
}

yajl_gen_status libxl_vnode_info_gen_json(yajl_gen hand, libxl_vnode_info *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    if (p->memkb != LIBXL_MEMKB_DEFAULT) {
        s = yajl_gen_string(hand, (const unsigned char *)"memkb", sizeof("memkb")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__uint64_gen_json(hand, p->memkb);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->distances && p->num_distances) {
        s = yajl_gen_string(hand, (const unsigned char *)"distances", sizeof("distances")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        {
            int i;
            s = yajl_gen_array_open(hand);
            if (s != yajl_gen_status_ok)
                goto out;
            for (i=0; i<p->num_distances; i++) {
                    s = yajl_gen_integer(hand, p->distances[i]);
                    if (s != yajl_gen_status_ok)
                        goto out;
            }
            s = yajl_gen_array_close(hand);
            if (s != yajl_gen_status_ok)
                goto out;
        }
    }
    if (p->pnode) {
        s = yajl_gen_string(hand, (const unsigned char *)"pnode", sizeof("pnode")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->pnode);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl_bitmap_is_empty(&p->vcpus)) {
        s = yajl_gen_string(hand, (const unsigned char *)"vcpus", sizeof("vcpus")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_bitmap_gen_json(hand, &p->vcpus);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_vnode_info_to_json(libxl_ctx *ctx, libxl_vnode_info *p)
{
    return libxl__object_to_json(ctx, "libxl_vnode_info", (libxl__gen_json_callback)&libxl_vnode_info_gen_json, (void *)p);
}

yajl_gen_status libxl_gic_version_gen_json(yajl_gen hand, libxl_gic_version *p)
{
    yajl_gen_status s;
    s = libxl__yajl_gen_enum(hand, libxl_gic_version_to_string(*p));
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_gic_version_to_json(libxl_ctx *ctx, libxl_gic_version p)
{
    return libxl__object_to_json(ctx, "libxl_gic_version", (libxl__gen_json_callback)&libxl_gic_version_gen_json, (void *)&p);
}

yajl_gen_status libxl_rdm_reserve_gen_json(yajl_gen hand, libxl_rdm_reserve *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    if (p->strategy) {
        s = yajl_gen_string(hand, (const unsigned char *)"strategy", sizeof("strategy")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__yajl_gen_enum(hand, libxl_rdm_reserve_strategy_to_string(p->strategy));
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->policy != LIBXL_RDM_RESERVE_POLICY_INVALID) {
        s = yajl_gen_string(hand, (const unsigned char *)"policy", sizeof("policy")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__yajl_gen_enum(hand, libxl_rdm_reserve_policy_to_string(p->policy));
        if (s != yajl_gen_status_ok)
            goto out;
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_rdm_reserve_to_json(libxl_ctx *ctx, libxl_rdm_reserve *p)
{
    return libxl__object_to_json(ctx, "libxl_rdm_reserve", (libxl__gen_json_callback)&libxl_rdm_reserve_gen_json, (void *)p);
}

yajl_gen_status libxl_altp2m_mode_gen_json(yajl_gen hand, libxl_altp2m_mode *p)
{
    yajl_gen_status s;
    s = libxl__yajl_gen_enum(hand, libxl_altp2m_mode_to_string(*p));
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_altp2m_mode_to_json(libxl_ctx *ctx, libxl_altp2m_mode p)
{
    return libxl__object_to_json(ctx, "libxl_altp2m_mode", (libxl__gen_json_callback)&libxl_altp2m_mode_gen_json, (void *)&p);
}

yajl_gen_status libxl_domain_build_info_gen_json(yajl_gen hand, libxl_domain_build_info *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    if (p->max_vcpus) {
        s = yajl_gen_string(hand, (const unsigned char *)"max_vcpus", sizeof("max_vcpus")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->max_vcpus);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl_bitmap_is_empty(&p->avail_vcpus)) {
        s = yajl_gen_string(hand, (const unsigned char *)"avail_vcpus", sizeof("avail_vcpus")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_bitmap_gen_json(hand, &p->avail_vcpus);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl_bitmap_is_empty(&p->cpumap)) {
        s = yajl_gen_string(hand, (const unsigned char *)"cpumap", sizeof("cpumap")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_bitmap_gen_json(hand, &p->cpumap);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl_bitmap_is_empty(&p->nodemap)) {
        s = yajl_gen_string(hand, (const unsigned char *)"nodemap", sizeof("nodemap")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_bitmap_gen_json(hand, &p->nodemap);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->vcpu_hard_affinity && p->num_vcpu_hard_affinity) {
        s = yajl_gen_string(hand, (const unsigned char *)"vcpu_hard_affinity", sizeof("vcpu_hard_affinity")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        {
            int i;
            s = yajl_gen_array_open(hand);
            if (s != yajl_gen_status_ok)
                goto out;
            for (i=0; i<p->num_vcpu_hard_affinity; i++) {
                    s = libxl_bitmap_gen_json(hand, &p->vcpu_hard_affinity[i]);
                    if (s != yajl_gen_status_ok)
                        goto out;
            }
            s = yajl_gen_array_close(hand);
            if (s != yajl_gen_status_ok)
                goto out;
        }
    }
    if (p->vcpu_soft_affinity && p->num_vcpu_soft_affinity) {
        s = yajl_gen_string(hand, (const unsigned char *)"vcpu_soft_affinity", sizeof("vcpu_soft_affinity")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        {
            int i;
            s = yajl_gen_array_open(hand);
            if (s != yajl_gen_status_ok)
                goto out;
            for (i=0; i<p->num_vcpu_soft_affinity; i++) {
                    s = libxl_bitmap_gen_json(hand, &p->vcpu_soft_affinity[i]);
                    if (s != yajl_gen_status_ok)
                        goto out;
            }
            s = yajl_gen_array_close(hand);
            if (s != yajl_gen_status_ok)
                goto out;
        }
    }
    if (!libxl__defbool_is_default(&p->numa_placement)) {
        s = yajl_gen_string(hand, (const unsigned char *)"numa_placement", sizeof("numa_placement")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_defbool_gen_json(hand, &p->numa_placement);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->tsc_mode) {
        s = yajl_gen_string(hand, (const unsigned char *)"tsc_mode", sizeof("tsc_mode")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__yajl_gen_enum(hand, libxl_tsc_mode_to_string(p->tsc_mode));
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->max_memkb != LIBXL_MEMKB_DEFAULT) {
        s = yajl_gen_string(hand, (const unsigned char *)"max_memkb", sizeof("max_memkb")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__uint64_gen_json(hand, p->max_memkb);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->target_memkb != LIBXL_MEMKB_DEFAULT) {
        s = yajl_gen_string(hand, (const unsigned char *)"target_memkb", sizeof("target_memkb")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__uint64_gen_json(hand, p->target_memkb);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->video_memkb != LIBXL_MEMKB_DEFAULT) {
        s = yajl_gen_string(hand, (const unsigned char *)"video_memkb", sizeof("video_memkb")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__uint64_gen_json(hand, p->video_memkb);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->shadow_memkb != LIBXL_MEMKB_DEFAULT) {
        s = yajl_gen_string(hand, (const unsigned char *)"shadow_memkb", sizeof("shadow_memkb")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__uint64_gen_json(hand, p->shadow_memkb);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->rtc_timeoffset) {
        s = yajl_gen_string(hand, (const unsigned char *)"rtc_timeoffset", sizeof("rtc_timeoffset")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->rtc_timeoffset);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->exec_ssidref) {
        s = yajl_gen_string(hand, (const unsigned char *)"exec_ssidref", sizeof("exec_ssidref")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->exec_ssidref);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->exec_ssid_label)) {
        s = yajl_gen_string(hand, (const unsigned char *)"exec_ssid_label", sizeof("exec_ssid_label")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->exec_ssid_label);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__defbool_is_default(&p->localtime)) {
        s = yajl_gen_string(hand, (const unsigned char *)"localtime", sizeof("localtime")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_defbool_gen_json(hand, &p->localtime);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__defbool_is_default(&p->disable_migrate)) {
        s = yajl_gen_string(hand, (const unsigned char *)"disable_migrate", sizeof("disable_migrate")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_defbool_gen_json(hand, &p->disable_migrate);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__cpuid_policy_is_empty(&p->cpuid)) {
        s = yajl_gen_string(hand, (const unsigned char *)"cpuid", sizeof("cpuid")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_cpuid_policy_list_gen_json(hand, &p->cpuid);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->blkdev_start)) {
        s = yajl_gen_string(hand, (const unsigned char *)"blkdev_start", sizeof("blkdev_start")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->blkdev_start);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->vnuma_nodes && p->num_vnuma_nodes) {
        s = yajl_gen_string(hand, (const unsigned char *)"vnuma_nodes", sizeof("vnuma_nodes")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        {
            int i;
            s = yajl_gen_array_open(hand);
            if (s != yajl_gen_status_ok)
                goto out;
            for (i=0; i<p->num_vnuma_nodes; i++) {
                    s = libxl_vnode_info_gen_json(hand, &p->vnuma_nodes[i]);
                    if (s != yajl_gen_status_ok)
                        goto out;
            }
            s = yajl_gen_array_close(hand);
            if (s != yajl_gen_status_ok)
                goto out;
        }
    }
    if (p->max_grant_frames != LIBXL_MAX_GRANT_FRAMES_DEFAULT) {
        s = yajl_gen_string(hand, (const unsigned char *)"max_grant_frames", sizeof("max_grant_frames")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->max_grant_frames);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->max_maptrack_frames != LIBXL_MAX_MAPTRACK_FRAMES_DEFAULT) {
        s = yajl_gen_string(hand, (const unsigned char *)"max_maptrack_frames", sizeof("max_maptrack_frames")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->max_maptrack_frames);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->device_model_version) {
        s = yajl_gen_string(hand, (const unsigned char *)"device_model_version", sizeof("device_model_version")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__yajl_gen_enum(hand, libxl_device_model_version_to_string(p->device_model_version));
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__defbool_is_default(&p->device_model_stubdomain)) {
        s = yajl_gen_string(hand, (const unsigned char *)"device_model_stubdomain", sizeof("device_model_stubdomain")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_defbool_gen_json(hand, &p->device_model_stubdomain);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->device_model)) {
        s = yajl_gen_string(hand, (const unsigned char *)"device_model", sizeof("device_model")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->device_model);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->device_model_ssidref) {
        s = yajl_gen_string(hand, (const unsigned char *)"device_model_ssidref", sizeof("device_model_ssidref")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->device_model_ssidref);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->device_model_ssid_label)) {
        s = yajl_gen_string(hand, (const unsigned char *)"device_model_ssid_label", sizeof("device_model_ssid_label")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->device_model_ssid_label);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->device_model_user)) {
        s = yajl_gen_string(hand, (const unsigned char *)"device_model_user", sizeof("device_model_user")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->device_model_user);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_list_is_empty(&p->extra)) {
        s = yajl_gen_string(hand, (const unsigned char *)"extra", sizeof("extra")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_string_list_gen_json(hand, &p->extra);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_list_is_empty(&p->extra_pv)) {
        s = yajl_gen_string(hand, (const unsigned char *)"extra_pv", sizeof("extra_pv")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_string_list_gen_json(hand, &p->extra_pv);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_list_is_empty(&p->extra_hvm)) {
        s = yajl_gen_string(hand, (const unsigned char *)"extra_hvm", sizeof("extra_hvm")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_string_list_gen_json(hand, &p->extra_hvm);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (1 /* always generate JSON output for aggregate type */) {
        s = yajl_gen_string(hand, (const unsigned char *)"sched_params", sizeof("sched_params")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_domain_sched_params_gen_json(hand, &p->sched_params);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->ioports && p->num_ioports) {
        s = yajl_gen_string(hand, (const unsigned char *)"ioports", sizeof("ioports")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        {
            int i;
            s = yajl_gen_array_open(hand);
            if (s != yajl_gen_status_ok)
                goto out;
            for (i=0; i<p->num_ioports; i++) {
                    s = libxl_ioport_range_gen_json(hand, &p->ioports[i]);
                    if (s != yajl_gen_status_ok)
                        goto out;
            }
            s = yajl_gen_array_close(hand);
            if (s != yajl_gen_status_ok)
                goto out;
        }
    }
    if (p->irqs && p->num_irqs) {
        s = yajl_gen_string(hand, (const unsigned char *)"irqs", sizeof("irqs")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        {
            int i;
            s = yajl_gen_array_open(hand);
            if (s != yajl_gen_status_ok)
                goto out;
            for (i=0; i<p->num_irqs; i++) {
                    s = yajl_gen_integer(hand, p->irqs[i]);
                    if (s != yajl_gen_status_ok)
                        goto out;
            }
            s = yajl_gen_array_close(hand);
            if (s != yajl_gen_status_ok)
                goto out;
        }
    }
    if (p->iomem && p->num_iomem) {
        s = yajl_gen_string(hand, (const unsigned char *)"iomem", sizeof("iomem")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        {
            int i;
            s = yajl_gen_array_open(hand);
            if (s != yajl_gen_status_ok)
                goto out;
            for (i=0; i<p->num_iomem; i++) {
                    s = libxl_iomem_range_gen_json(hand, &p->iomem[i]);
                    if (s != yajl_gen_status_ok)
                        goto out;
            }
            s = yajl_gen_array_close(hand);
            if (s != yajl_gen_status_ok)
                goto out;
        }
    }
    if (!libxl__defbool_is_default(&p->claim_mode)) {
        s = yajl_gen_string(hand, (const unsigned char *)"claim_mode", sizeof("claim_mode")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_defbool_gen_json(hand, &p->claim_mode);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->event_channels) {
        s = yajl_gen_string(hand, (const unsigned char *)"event_channels", sizeof("event_channels")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->event_channels);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->kernel)) {
        s = yajl_gen_string(hand, (const unsigned char *)"kernel", sizeof("kernel")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->kernel);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->cmdline)) {
        s = yajl_gen_string(hand, (const unsigned char *)"cmdline", sizeof("cmdline")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->cmdline);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->ramdisk)) {
        s = yajl_gen_string(hand, (const unsigned char *)"ramdisk", sizeof("ramdisk")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->ramdisk);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->device_tree)) {
        s = yajl_gen_string(hand, (const unsigned char *)"device_tree", sizeof("device_tree")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->device_tree);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__defbool_is_default(&p->acpi)) {
        s = yajl_gen_string(hand, (const unsigned char *)"acpi", sizeof("acpi")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_defbool_gen_json(hand, &p->acpi);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->bootloader)) {
        s = yajl_gen_string(hand, (const unsigned char *)"bootloader", sizeof("bootloader")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->bootloader);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_list_is_empty(&p->bootloader_args)) {
        s = yajl_gen_string(hand, (const unsigned char *)"bootloader_args", sizeof("bootloader_args")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_string_list_gen_json(hand, &p->bootloader_args);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->timer_mode != LIBXL_TIMER_MODE_DEFAULT) {
        s = yajl_gen_string(hand, (const unsigned char *)"timer_mode", sizeof("timer_mode")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__yajl_gen_enum(hand, libxl_timer_mode_to_string(p->timer_mode));
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__defbool_is_default(&p->nested_hvm)) {
        s = yajl_gen_string(hand, (const unsigned char *)"nested_hvm", sizeof("nested_hvm")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_defbool_gen_json(hand, &p->nested_hvm);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__defbool_is_default(&p->apic)) {
        s = yajl_gen_string(hand, (const unsigned char *)"apic", sizeof("apic")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_defbool_gen_json(hand, &p->apic);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__defbool_is_default(&p->dm_restrict)) {
        s = yajl_gen_string(hand, (const unsigned char *)"dm_restrict", sizeof("dm_restrict")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_defbool_gen_json(hand, &p->dm_restrict);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (1 /* always generate JSON output for aggregate type */) {
        switch (p->type) {
        case LIBXL_DOMAIN_TYPE_HVM:
            s = yajl_gen_string(hand, (const unsigned char *)"type.hvm", sizeof("type.hvm")-1);
            if (s != yajl_gen_status_ok)
                goto out;
            break;
        case LIBXL_DOMAIN_TYPE_PV:
            s = yajl_gen_string(hand, (const unsigned char *)"type.pv", sizeof("type.pv")-1);
            if (s != yajl_gen_status_ok)
                goto out;
            break;
        case LIBXL_DOMAIN_TYPE_PVH:
            s = yajl_gen_string(hand, (const unsigned char *)"type.pvh", sizeof("type.pvh")-1);
            if (s != yajl_gen_status_ok)
                goto out;
            break;
        case LIBXL_DOMAIN_TYPE_INVALID:
            s = yajl_gen_string(hand, (const unsigned char *)"type.invalid", sizeof("type.invalid")-1);
            if (s != yajl_gen_status_ok)
                goto out;
            break;
        }
        switch (p->type) {
        case LIBXL_DOMAIN_TYPE_HVM:
                s = yajl_gen_map_open(hand);
                if (s != yajl_gen_status_ok)
                    goto out;
                if (!libxl__string_is_default(&p->u.hvm.firmware)) {
                    s = yajl_gen_string(hand, (const unsigned char *)"firmware", sizeof("firmware")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl__string_gen_json(hand, p->u.hvm.firmware);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                if (p->u.hvm.bios) {
                    s = yajl_gen_string(hand, (const unsigned char *)"bios", sizeof("bios")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl__yajl_gen_enum(hand, libxl_bios_type_to_string(p->u.hvm.bios));
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                if (!libxl__defbool_is_default(&p->u.hvm.pae)) {
                    s = yajl_gen_string(hand, (const unsigned char *)"pae", sizeof("pae")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl_defbool_gen_json(hand, &p->u.hvm.pae);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                if (!libxl__defbool_is_default(&p->u.hvm.apic)) {
                    s = yajl_gen_string(hand, (const unsigned char *)"apic", sizeof("apic")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl_defbool_gen_json(hand, &p->u.hvm.apic);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                if (!libxl__defbool_is_default(&p->u.hvm.acpi)) {
                    s = yajl_gen_string(hand, (const unsigned char *)"acpi", sizeof("acpi")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl_defbool_gen_json(hand, &p->u.hvm.acpi);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                if (!libxl__defbool_is_default(&p->u.hvm.acpi_s3)) {
                    s = yajl_gen_string(hand, (const unsigned char *)"acpi_s3", sizeof("acpi_s3")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl_defbool_gen_json(hand, &p->u.hvm.acpi_s3);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                if (!libxl__defbool_is_default(&p->u.hvm.acpi_s4)) {
                    s = yajl_gen_string(hand, (const unsigned char *)"acpi_s4", sizeof("acpi_s4")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl_defbool_gen_json(hand, &p->u.hvm.acpi_s4);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                if (!libxl__defbool_is_default(&p->u.hvm.acpi_laptop_slate)) {
                    s = yajl_gen_string(hand, (const unsigned char *)"acpi_laptop_slate", sizeof("acpi_laptop_slate")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl_defbool_gen_json(hand, &p->u.hvm.acpi_laptop_slate);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                if (!libxl__defbool_is_default(&p->u.hvm.nx)) {
                    s = yajl_gen_string(hand, (const unsigned char *)"nx", sizeof("nx")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl_defbool_gen_json(hand, &p->u.hvm.nx);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                if (!libxl__defbool_is_default(&p->u.hvm.viridian)) {
                    s = yajl_gen_string(hand, (const unsigned char *)"viridian", sizeof("viridian")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl_defbool_gen_json(hand, &p->u.hvm.viridian);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                if (!libxl_bitmap_is_empty(&p->u.hvm.viridian_enable)) {
                    s = yajl_gen_string(hand, (const unsigned char *)"viridian_enable", sizeof("viridian_enable")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl_bitmap_gen_json(hand, &p->u.hvm.viridian_enable);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                if (!libxl_bitmap_is_empty(&p->u.hvm.viridian_disable)) {
                    s = yajl_gen_string(hand, (const unsigned char *)"viridian_disable", sizeof("viridian_disable")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl_bitmap_gen_json(hand, &p->u.hvm.viridian_disable);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                if (!libxl__string_is_default(&p->u.hvm.timeoffset)) {
                    s = yajl_gen_string(hand, (const unsigned char *)"timeoffset", sizeof("timeoffset")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl__string_gen_json(hand, p->u.hvm.timeoffset);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                if (!libxl__defbool_is_default(&p->u.hvm.hpet)) {
                    s = yajl_gen_string(hand, (const unsigned char *)"hpet", sizeof("hpet")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl_defbool_gen_json(hand, &p->u.hvm.hpet);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                if (!libxl__defbool_is_default(&p->u.hvm.vpt_align)) {
                    s = yajl_gen_string(hand, (const unsigned char *)"vpt_align", sizeof("vpt_align")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl_defbool_gen_json(hand, &p->u.hvm.vpt_align);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                if (p->u.hvm.mmio_hole_memkb != LIBXL_MEMKB_DEFAULT) {
                    s = yajl_gen_string(hand, (const unsigned char *)"mmio_hole_memkb", sizeof("mmio_hole_memkb")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl__uint64_gen_json(hand, p->u.hvm.mmio_hole_memkb);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                if (p->u.hvm.timer_mode != LIBXL_TIMER_MODE_DEFAULT) {
                    s = yajl_gen_string(hand, (const unsigned char *)"timer_mode", sizeof("timer_mode")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl__yajl_gen_enum(hand, libxl_timer_mode_to_string(p->u.hvm.timer_mode));
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                if (!libxl__defbool_is_default(&p->u.hvm.nested_hvm)) {
                    s = yajl_gen_string(hand, (const unsigned char *)"nested_hvm", sizeof("nested_hvm")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl_defbool_gen_json(hand, &p->u.hvm.nested_hvm);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                if (!libxl__defbool_is_default(&p->u.hvm.altp2m)) {
                    s = yajl_gen_string(hand, (const unsigned char *)"altp2m", sizeof("altp2m")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl_defbool_gen_json(hand, &p->u.hvm.altp2m);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                if (!libxl__string_is_default(&p->u.hvm.system_firmware)) {
                    s = yajl_gen_string(hand, (const unsigned char *)"system_firmware", sizeof("system_firmware")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl__string_gen_json(hand, p->u.hvm.system_firmware);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                if (!libxl__string_is_default(&p->u.hvm.smbios_firmware)) {
                    s = yajl_gen_string(hand, (const unsigned char *)"smbios_firmware", sizeof("smbios_firmware")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl__string_gen_json(hand, p->u.hvm.smbios_firmware);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                if (!libxl__string_is_default(&p->u.hvm.acpi_firmware)) {
                    s = yajl_gen_string(hand, (const unsigned char *)"acpi_firmware", sizeof("acpi_firmware")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl__string_gen_json(hand, p->u.hvm.acpi_firmware);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                if (p->u.hvm.hdtype != LIBXL_HDTYPE_IDE) {
                    s = yajl_gen_string(hand, (const unsigned char *)"hdtype", sizeof("hdtype")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl__yajl_gen_enum(hand, libxl_hdtype_to_string(p->u.hvm.hdtype));
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                if (!libxl__defbool_is_default(&p->u.hvm.nographic)) {
                    s = yajl_gen_string(hand, (const unsigned char *)"nographic", sizeof("nographic")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl_defbool_gen_json(hand, &p->u.hvm.nographic);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                if (1 /* always generate JSON output for aggregate type */) {
                    s = yajl_gen_string(hand, (const unsigned char *)"vga", sizeof("vga")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl_vga_interface_info_gen_json(hand, &p->u.hvm.vga);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                if (1 /* always generate JSON output for aggregate type */) {
                    s = yajl_gen_string(hand, (const unsigned char *)"vnc", sizeof("vnc")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl_vnc_info_gen_json(hand, &p->u.hvm.vnc);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                if (!libxl__string_is_default(&p->u.hvm.keymap)) {
                    s = yajl_gen_string(hand, (const unsigned char *)"keymap", sizeof("keymap")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl__string_gen_json(hand, p->u.hvm.keymap);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                if (1 /* always generate JSON output for aggregate type */) {
                    s = yajl_gen_string(hand, (const unsigned char *)"sdl", sizeof("sdl")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl_sdl_info_gen_json(hand, &p->u.hvm.sdl);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                if (1 /* always generate JSON output for aggregate type */) {
                    s = yajl_gen_string(hand, (const unsigned char *)"spice", sizeof("spice")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl_spice_info_gen_json(hand, &p->u.hvm.spice);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                if (!libxl__defbool_is_default(&p->u.hvm.gfx_passthru)) {
                    s = yajl_gen_string(hand, (const unsigned char *)"gfx_passthru", sizeof("gfx_passthru")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl_defbool_gen_json(hand, &p->u.hvm.gfx_passthru);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                if (p->u.hvm.gfx_passthru_kind) {
                    s = yajl_gen_string(hand, (const unsigned char *)"gfx_passthru_kind", sizeof("gfx_passthru_kind")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl__yajl_gen_enum(hand, libxl_gfx_passthru_kind_to_string(p->u.hvm.gfx_passthru_kind));
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                if (!libxl__string_is_default(&p->u.hvm.serial)) {
                    s = yajl_gen_string(hand, (const unsigned char *)"serial", sizeof("serial")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl__string_gen_json(hand, p->u.hvm.serial);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                if (!libxl__string_is_default(&p->u.hvm.boot)) {
                    s = yajl_gen_string(hand, (const unsigned char *)"boot", sizeof("boot")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl__string_gen_json(hand, p->u.hvm.boot);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                if (!libxl__defbool_is_default(&p->u.hvm.usb)) {
                    s = yajl_gen_string(hand, (const unsigned char *)"usb", sizeof("usb")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl_defbool_gen_json(hand, &p->u.hvm.usb);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                if (p->u.hvm.usbversion) {
                    s = yajl_gen_string(hand, (const unsigned char *)"usbversion", sizeof("usbversion")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = yajl_gen_integer(hand, p->u.hvm.usbversion);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                if (!libxl__string_is_default(&p->u.hvm.usbdevice)) {
                    s = yajl_gen_string(hand, (const unsigned char *)"usbdevice", sizeof("usbdevice")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl__string_gen_json(hand, p->u.hvm.usbdevice);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                if (!libxl__string_is_default(&p->u.hvm.soundhw)) {
                    s = yajl_gen_string(hand, (const unsigned char *)"soundhw", sizeof("soundhw")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl__string_gen_json(hand, p->u.hvm.soundhw);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                if (!libxl__defbool_is_default(&p->u.hvm.xen_platform_pci)) {
                    s = yajl_gen_string(hand, (const unsigned char *)"xen_platform_pci", sizeof("xen_platform_pci")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl_defbool_gen_json(hand, &p->u.hvm.xen_platform_pci);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                if (!libxl__string_list_is_empty(&p->u.hvm.usbdevice_list)) {
                    s = yajl_gen_string(hand, (const unsigned char *)"usbdevice_list", sizeof("usbdevice_list")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl_string_list_gen_json(hand, &p->u.hvm.usbdevice_list);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                if (p->u.hvm.vendor_device) {
                    s = yajl_gen_string(hand, (const unsigned char *)"vendor_device", sizeof("vendor_device")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl__yajl_gen_enum(hand, libxl_vendor_device_to_string(p->u.hvm.vendor_device));
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                if (!libxl_ms_vm_genid_is_zero(&p->u.hvm.ms_vm_genid)) {
                    s = yajl_gen_string(hand, (const unsigned char *)"ms_vm_genid", sizeof("ms_vm_genid")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl_ms_vm_genid_gen_json(hand, &p->u.hvm.ms_vm_genid);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                if (!libxl__string_list_is_empty(&p->u.hvm.serial_list)) {
                    s = yajl_gen_string(hand, (const unsigned char *)"serial_list", sizeof("serial_list")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl_string_list_gen_json(hand, &p->u.hvm.serial_list);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                if (1 /* always generate JSON output for aggregate type */) {
                    s = yajl_gen_string(hand, (const unsigned char *)"rdm", sizeof("rdm")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl_rdm_reserve_gen_json(hand, &p->u.hvm.rdm);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                if (p->u.hvm.rdm_mem_boundary_memkb != LIBXL_MEMKB_DEFAULT) {
                    s = yajl_gen_string(hand, (const unsigned char *)"rdm_mem_boundary_memkb", sizeof("rdm_mem_boundary_memkb")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl__uint64_gen_json(hand, p->u.hvm.rdm_mem_boundary_memkb);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                if (p->u.hvm.mca_caps) {
                    s = yajl_gen_string(hand, (const unsigned char *)"mca_caps", sizeof("mca_caps")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl__uint64_gen_json(hand, p->u.hvm.mca_caps);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                s = yajl_gen_map_close(hand);
                if (s != yajl_gen_status_ok)
                    goto out;
            break;
        case LIBXL_DOMAIN_TYPE_PV:
                s = yajl_gen_map_open(hand);
                if (s != yajl_gen_status_ok)
                    goto out;
                if (!libxl__string_is_default(&p->u.pv.kernel)) {
                    s = yajl_gen_string(hand, (const unsigned char *)"kernel", sizeof("kernel")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl__string_gen_json(hand, p->u.pv.kernel);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                if (p->u.pv.slack_memkb != LIBXL_MEMKB_DEFAULT) {
                    s = yajl_gen_string(hand, (const unsigned char *)"slack_memkb", sizeof("slack_memkb")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl__uint64_gen_json(hand, p->u.pv.slack_memkb);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                if (!libxl__string_is_default(&p->u.pv.bootloader)) {
                    s = yajl_gen_string(hand, (const unsigned char *)"bootloader", sizeof("bootloader")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl__string_gen_json(hand, p->u.pv.bootloader);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                if (!libxl__string_list_is_empty(&p->u.pv.bootloader_args)) {
                    s = yajl_gen_string(hand, (const unsigned char *)"bootloader_args", sizeof("bootloader_args")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl_string_list_gen_json(hand, &p->u.pv.bootloader_args);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                if (!libxl__string_is_default(&p->u.pv.cmdline)) {
                    s = yajl_gen_string(hand, (const unsigned char *)"cmdline", sizeof("cmdline")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl__string_gen_json(hand, p->u.pv.cmdline);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                if (!libxl__string_is_default(&p->u.pv.ramdisk)) {
                    s = yajl_gen_string(hand, (const unsigned char *)"ramdisk", sizeof("ramdisk")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl__string_gen_json(hand, p->u.pv.ramdisk);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                if (!libxl__defbool_is_default(&p->u.pv.e820_host)) {
                    s = yajl_gen_string(hand, (const unsigned char *)"e820_host", sizeof("e820_host")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl_defbool_gen_json(hand, &p->u.pv.e820_host);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                s = yajl_gen_map_close(hand);
                if (s != yajl_gen_status_ok)
                    goto out;
            break;
        case LIBXL_DOMAIN_TYPE_PVH:
            s = yajl_gen_map_open(hand);
            if (s != yajl_gen_status_ok)
                goto out;
            s = yajl_gen_map_close(hand);
            if (s != yajl_gen_status_ok)
                goto out;
            break;
        case LIBXL_DOMAIN_TYPE_INVALID:
            s = yajl_gen_map_open(hand);
            if (s != yajl_gen_status_ok)
                goto out;
            s = yajl_gen_map_close(hand);
            if (s != yajl_gen_status_ok)
                goto out;
            break;
        }
    }
    if (1 /* always generate JSON output for aggregate type */) {
        s = yajl_gen_string(hand, (const unsigned char *)"arch_arm", sizeof("arch_arm")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_map_open(hand);
        if (s != yajl_gen_status_ok)
            goto out;
        if (p->arch_arm.gic_version != LIBXL_GIC_VERSION_DEFAULT) {
            s = yajl_gen_string(hand, (const unsigned char *)"gic_version", sizeof("gic_version")-1);
            if (s != yajl_gen_status_ok)
                goto out;
            s = libxl__yajl_gen_enum(hand, libxl_gic_version_to_string(p->arch_arm.gic_version));
            if (s != yajl_gen_status_ok)
                goto out;
        }
        if (p->arch_arm.vuart) {
            s = yajl_gen_string(hand, (const unsigned char *)"vuart", sizeof("vuart")-1);
            if (s != yajl_gen_status_ok)
                goto out;
            s = libxl__yajl_gen_enum(hand, libxl_vuart_type_to_string(p->arch_arm.vuart));
            if (s != yajl_gen_status_ok)
                goto out;
        }
        s = yajl_gen_map_close(hand);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->altp2m != LIBXL_ALTP2M_MODE_DISABLED) {
        s = yajl_gen_string(hand, (const unsigned char *)"altp2m", sizeof("altp2m")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__yajl_gen_enum(hand, libxl_altp2m_mode_to_string(p->altp2m));
        if (s != yajl_gen_status_ok)
            goto out;
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_domain_build_info_to_json(libxl_ctx *ctx, libxl_domain_build_info *p)
{
    return libxl__object_to_json(ctx, "libxl_domain_build_info", (libxl__gen_json_callback)&libxl_domain_build_info_gen_json, (void *)p);
}

yajl_gen_status libxl_device_vfb_gen_json(yajl_gen hand, libxl_device_vfb *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    if (p->backend_domid) {
        s = yajl_gen_string(hand, (const unsigned char *)"backend_domid", sizeof("backend_domid")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->backend_domid);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->backend_domname)) {
        s = yajl_gen_string(hand, (const unsigned char *)"backend_domname", sizeof("backend_domname")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->backend_domname);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->devid != -1) {
        s = yajl_gen_string(hand, (const unsigned char *)"devid", sizeof("devid")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->devid);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (1 /* always generate JSON output for aggregate type */) {
        s = yajl_gen_string(hand, (const unsigned char *)"vnc", sizeof("vnc")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_vnc_info_gen_json(hand, &p->vnc);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (1 /* always generate JSON output for aggregate type */) {
        s = yajl_gen_string(hand, (const unsigned char *)"sdl", sizeof("sdl")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_sdl_info_gen_json(hand, &p->sdl);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->keymap)) {
        s = yajl_gen_string(hand, (const unsigned char *)"keymap", sizeof("keymap")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->keymap);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_device_vfb_to_json(libxl_ctx *ctx, libxl_device_vfb *p)
{
    return libxl__object_to_json(ctx, "libxl_device_vfb", (libxl__gen_json_callback)&libxl_device_vfb_gen_json, (void *)p);
}

yajl_gen_status libxl_device_vkb_gen_json(yajl_gen hand, libxl_device_vkb *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    if (p->backend_domid) {
        s = yajl_gen_string(hand, (const unsigned char *)"backend_domid", sizeof("backend_domid")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->backend_domid);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->backend_domname)) {
        s = yajl_gen_string(hand, (const unsigned char *)"backend_domname", sizeof("backend_domname")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->backend_domname);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->devid != -1) {
        s = yajl_gen_string(hand, (const unsigned char *)"devid", sizeof("devid")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->devid);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_device_vkb_to_json(libxl_ctx *ctx, libxl_device_vkb *p)
{
    return libxl__object_to_json(ctx, "libxl_device_vkb", (libxl__gen_json_callback)&libxl_device_vkb_gen_json, (void *)p);
}

yajl_gen_status libxl_device_disk_gen_json(yajl_gen hand, libxl_device_disk *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    if (p->backend_domid) {
        s = yajl_gen_string(hand, (const unsigned char *)"backend_domid", sizeof("backend_domid")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->backend_domid);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->backend_domname)) {
        s = yajl_gen_string(hand, (const unsigned char *)"backend_domname", sizeof("backend_domname")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->backend_domname);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->pdev_path)) {
        s = yajl_gen_string(hand, (const unsigned char *)"pdev_path", sizeof("pdev_path")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->pdev_path);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->vdev)) {
        s = yajl_gen_string(hand, (const unsigned char *)"vdev", sizeof("vdev")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->vdev);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->backend) {
        s = yajl_gen_string(hand, (const unsigned char *)"backend", sizeof("backend")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__yajl_gen_enum(hand, libxl_disk_backend_to_string(p->backend));
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->format) {
        s = yajl_gen_string(hand, (const unsigned char *)"format", sizeof("format")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__yajl_gen_enum(hand, libxl_disk_format_to_string(p->format));
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->script)) {
        s = yajl_gen_string(hand, (const unsigned char *)"script", sizeof("script")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->script);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->removable) {
        s = yajl_gen_string(hand, (const unsigned char *)"removable", sizeof("removable")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->removable);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->readwrite) {
        s = yajl_gen_string(hand, (const unsigned char *)"readwrite", sizeof("readwrite")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->readwrite);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->is_cdrom) {
        s = yajl_gen_string(hand, (const unsigned char *)"is_cdrom", sizeof("is_cdrom")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->is_cdrom);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->direct_io_safe) {
        s = yajl_gen_string(hand, (const unsigned char *)"direct_io_safe", sizeof("direct_io_safe")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_bool(hand, p->direct_io_safe);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__defbool_is_default(&p->discard_enable)) {
        s = yajl_gen_string(hand, (const unsigned char *)"discard_enable", sizeof("discard_enable")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_defbool_gen_json(hand, &p->discard_enable);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__defbool_is_default(&p->colo_enable)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_enable", sizeof("colo_enable")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_defbool_gen_json(hand, &p->colo_enable);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__defbool_is_default(&p->colo_restore_enable)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_restore_enable", sizeof("colo_restore_enable")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_defbool_gen_json(hand, &p->colo_restore_enable);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->colo_host)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_host", sizeof("colo_host")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->colo_host);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->colo_port) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_port", sizeof("colo_port")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->colo_port);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->colo_export)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_export", sizeof("colo_export")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->colo_export);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->active_disk)) {
        s = yajl_gen_string(hand, (const unsigned char *)"active_disk", sizeof("active_disk")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->active_disk);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->hidden_disk)) {
        s = yajl_gen_string(hand, (const unsigned char *)"hidden_disk", sizeof("hidden_disk")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->hidden_disk);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_device_disk_to_json(libxl_ctx *ctx, libxl_device_disk *p)
{
    return libxl__object_to_json(ctx, "libxl_device_disk", (libxl__gen_json_callback)&libxl_device_disk_gen_json, (void *)p);
}

yajl_gen_status libxl_device_nic_gen_json(yajl_gen hand, libxl_device_nic *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    if (p->backend_domid) {
        s = yajl_gen_string(hand, (const unsigned char *)"backend_domid", sizeof("backend_domid")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->backend_domid);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->backend_domname)) {
        s = yajl_gen_string(hand, (const unsigned char *)"backend_domname", sizeof("backend_domname")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->backend_domname);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->devid != -1) {
        s = yajl_gen_string(hand, (const unsigned char *)"devid", sizeof("devid")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->devid);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->mtu) {
        s = yajl_gen_string(hand, (const unsigned char *)"mtu", sizeof("mtu")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->mtu);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->model)) {
        s = yajl_gen_string(hand, (const unsigned char *)"model", sizeof("model")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->model);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__mac_is_default(&p->mac)) {
        s = yajl_gen_string(hand, (const unsigned char *)"mac", sizeof("mac")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_mac_gen_json(hand, &p->mac);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->ip)) {
        s = yajl_gen_string(hand, (const unsigned char *)"ip", sizeof("ip")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->ip);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->bridge)) {
        s = yajl_gen_string(hand, (const unsigned char *)"bridge", sizeof("bridge")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->bridge);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->ifname)) {
        s = yajl_gen_string(hand, (const unsigned char *)"ifname", sizeof("ifname")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->ifname);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->script)) {
        s = yajl_gen_string(hand, (const unsigned char *)"script", sizeof("script")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->script);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->nictype) {
        s = yajl_gen_string(hand, (const unsigned char *)"nictype", sizeof("nictype")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__yajl_gen_enum(hand, libxl_nic_type_to_string(p->nictype));
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->rate_bytes_per_interval) {
        s = yajl_gen_string(hand, (const unsigned char *)"rate_bytes_per_interval", sizeof("rate_bytes_per_interval")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__uint64_gen_json(hand, p->rate_bytes_per_interval);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->rate_interval_usecs) {
        s = yajl_gen_string(hand, (const unsigned char *)"rate_interval_usecs", sizeof("rate_interval_usecs")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->rate_interval_usecs);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->gatewaydev)) {
        s = yajl_gen_string(hand, (const unsigned char *)"gatewaydev", sizeof("gatewaydev")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->gatewaydev);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->coloft_forwarddev)) {
        s = yajl_gen_string(hand, (const unsigned char *)"coloft_forwarddev", sizeof("coloft_forwarddev")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->coloft_forwarddev);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->colo_sock_mirror_id)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_sock_mirror_id", sizeof("colo_sock_mirror_id")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->colo_sock_mirror_id);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->colo_sock_mirror_ip)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_sock_mirror_ip", sizeof("colo_sock_mirror_ip")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->colo_sock_mirror_ip);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->colo_sock_mirror_port)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_sock_mirror_port", sizeof("colo_sock_mirror_port")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->colo_sock_mirror_port);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->colo_sock_compare_pri_in_id)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_sock_compare_pri_in_id", sizeof("colo_sock_compare_pri_in_id")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->colo_sock_compare_pri_in_id);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->colo_sock_compare_pri_in_ip)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_sock_compare_pri_in_ip", sizeof("colo_sock_compare_pri_in_ip")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->colo_sock_compare_pri_in_ip);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->colo_sock_compare_pri_in_port)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_sock_compare_pri_in_port", sizeof("colo_sock_compare_pri_in_port")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->colo_sock_compare_pri_in_port);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->colo_sock_compare_sec_in_id)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_sock_compare_sec_in_id", sizeof("colo_sock_compare_sec_in_id")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->colo_sock_compare_sec_in_id);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->colo_sock_compare_sec_in_ip)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_sock_compare_sec_in_ip", sizeof("colo_sock_compare_sec_in_ip")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->colo_sock_compare_sec_in_ip);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->colo_sock_compare_sec_in_port)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_sock_compare_sec_in_port", sizeof("colo_sock_compare_sec_in_port")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->colo_sock_compare_sec_in_port);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->colo_sock_compare_notify_id)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_sock_compare_notify_id", sizeof("colo_sock_compare_notify_id")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->colo_sock_compare_notify_id);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->colo_sock_compare_notify_ip)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_sock_compare_notify_ip", sizeof("colo_sock_compare_notify_ip")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->colo_sock_compare_notify_ip);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->colo_sock_compare_notify_port)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_sock_compare_notify_port", sizeof("colo_sock_compare_notify_port")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->colo_sock_compare_notify_port);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->colo_sock_redirector0_id)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_sock_redirector0_id", sizeof("colo_sock_redirector0_id")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->colo_sock_redirector0_id);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->colo_sock_redirector0_ip)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_sock_redirector0_ip", sizeof("colo_sock_redirector0_ip")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->colo_sock_redirector0_ip);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->colo_sock_redirector0_port)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_sock_redirector0_port", sizeof("colo_sock_redirector0_port")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->colo_sock_redirector0_port);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->colo_sock_redirector1_id)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_sock_redirector1_id", sizeof("colo_sock_redirector1_id")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->colo_sock_redirector1_id);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->colo_sock_redirector1_ip)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_sock_redirector1_ip", sizeof("colo_sock_redirector1_ip")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->colo_sock_redirector1_ip);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->colo_sock_redirector1_port)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_sock_redirector1_port", sizeof("colo_sock_redirector1_port")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->colo_sock_redirector1_port);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->colo_sock_redirector2_id)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_sock_redirector2_id", sizeof("colo_sock_redirector2_id")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->colo_sock_redirector2_id);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->colo_sock_redirector2_ip)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_sock_redirector2_ip", sizeof("colo_sock_redirector2_ip")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->colo_sock_redirector2_ip);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->colo_sock_redirector2_port)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_sock_redirector2_port", sizeof("colo_sock_redirector2_port")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->colo_sock_redirector2_port);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->colo_filter_mirror_queue)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_filter_mirror_queue", sizeof("colo_filter_mirror_queue")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->colo_filter_mirror_queue);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->colo_filter_mirror_outdev)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_filter_mirror_outdev", sizeof("colo_filter_mirror_outdev")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->colo_filter_mirror_outdev);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->colo_filter_redirector0_queue)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_filter_redirector0_queue", sizeof("colo_filter_redirector0_queue")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->colo_filter_redirector0_queue);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->colo_filter_redirector0_indev)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_filter_redirector0_indev", sizeof("colo_filter_redirector0_indev")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->colo_filter_redirector0_indev);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->colo_filter_redirector0_outdev)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_filter_redirector0_outdev", sizeof("colo_filter_redirector0_outdev")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->colo_filter_redirector0_outdev);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->colo_filter_redirector1_queue)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_filter_redirector1_queue", sizeof("colo_filter_redirector1_queue")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->colo_filter_redirector1_queue);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->colo_filter_redirector1_indev)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_filter_redirector1_indev", sizeof("colo_filter_redirector1_indev")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->colo_filter_redirector1_indev);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->colo_filter_redirector1_outdev)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_filter_redirector1_outdev", sizeof("colo_filter_redirector1_outdev")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->colo_filter_redirector1_outdev);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->colo_compare_pri_in)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_compare_pri_in", sizeof("colo_compare_pri_in")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->colo_compare_pri_in);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->colo_compare_sec_in)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_compare_sec_in", sizeof("colo_compare_sec_in")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->colo_compare_sec_in);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->colo_compare_out)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_compare_out", sizeof("colo_compare_out")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->colo_compare_out);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->colo_compare_notify_dev)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_compare_notify_dev", sizeof("colo_compare_notify_dev")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->colo_compare_notify_dev);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->colo_sock_sec_redirector0_id)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_sock_sec_redirector0_id", sizeof("colo_sock_sec_redirector0_id")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->colo_sock_sec_redirector0_id);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->colo_sock_sec_redirector0_ip)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_sock_sec_redirector0_ip", sizeof("colo_sock_sec_redirector0_ip")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->colo_sock_sec_redirector0_ip);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->colo_sock_sec_redirector0_port)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_sock_sec_redirector0_port", sizeof("colo_sock_sec_redirector0_port")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->colo_sock_sec_redirector0_port);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->colo_sock_sec_redirector1_id)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_sock_sec_redirector1_id", sizeof("colo_sock_sec_redirector1_id")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->colo_sock_sec_redirector1_id);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->colo_sock_sec_redirector1_ip)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_sock_sec_redirector1_ip", sizeof("colo_sock_sec_redirector1_ip")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->colo_sock_sec_redirector1_ip);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->colo_sock_sec_redirector1_port)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_sock_sec_redirector1_port", sizeof("colo_sock_sec_redirector1_port")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->colo_sock_sec_redirector1_port);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->colo_filter_sec_redirector0_queue)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_filter_sec_redirector0_queue", sizeof("colo_filter_sec_redirector0_queue")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->colo_filter_sec_redirector0_queue);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->colo_filter_sec_redirector0_indev)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_filter_sec_redirector0_indev", sizeof("colo_filter_sec_redirector0_indev")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->colo_filter_sec_redirector0_indev);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->colo_filter_sec_redirector0_outdev)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_filter_sec_redirector0_outdev", sizeof("colo_filter_sec_redirector0_outdev")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->colo_filter_sec_redirector0_outdev);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->colo_filter_sec_redirector1_queue)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_filter_sec_redirector1_queue", sizeof("colo_filter_sec_redirector1_queue")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->colo_filter_sec_redirector1_queue);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->colo_filter_sec_redirector1_indev)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_filter_sec_redirector1_indev", sizeof("colo_filter_sec_redirector1_indev")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->colo_filter_sec_redirector1_indev);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->colo_filter_sec_redirector1_outdev)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_filter_sec_redirector1_outdev", sizeof("colo_filter_sec_redirector1_outdev")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->colo_filter_sec_redirector1_outdev);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->colo_filter_sec_rewriter0_queue)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_filter_sec_rewriter0_queue", sizeof("colo_filter_sec_rewriter0_queue")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->colo_filter_sec_rewriter0_queue);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->colo_checkpoint_host)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_checkpoint_host", sizeof("colo_checkpoint_host")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->colo_checkpoint_host);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->colo_checkpoint_port)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo_checkpoint_port", sizeof("colo_checkpoint_port")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->colo_checkpoint_port);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_device_nic_to_json(libxl_ctx *ctx, libxl_device_nic *p)
{
    return libxl__object_to_json(ctx, "libxl_device_nic", (libxl__gen_json_callback)&libxl_device_nic_gen_json, (void *)p);
}

yajl_gen_status libxl_device_pci_gen_json(yajl_gen hand, libxl_device_pci *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    if (p->func) {
        s = yajl_gen_string(hand, (const unsigned char *)"func", sizeof("func")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->func);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->dev) {
        s = yajl_gen_string(hand, (const unsigned char *)"dev", sizeof("dev")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->dev);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->bus) {
        s = yajl_gen_string(hand, (const unsigned char *)"bus", sizeof("bus")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->bus);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->domain) {
        s = yajl_gen_string(hand, (const unsigned char *)"domain", sizeof("domain")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->domain);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->vdevfn) {
        s = yajl_gen_string(hand, (const unsigned char *)"vdevfn", sizeof("vdevfn")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->vdevfn);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->vfunc_mask) {
        s = yajl_gen_string(hand, (const unsigned char *)"vfunc_mask", sizeof("vfunc_mask")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->vfunc_mask);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->msitranslate) {
        s = yajl_gen_string(hand, (const unsigned char *)"msitranslate", sizeof("msitranslate")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_bool(hand, p->msitranslate);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->power_mgmt) {
        s = yajl_gen_string(hand, (const unsigned char *)"power_mgmt", sizeof("power_mgmt")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_bool(hand, p->power_mgmt);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->permissive) {
        s = yajl_gen_string(hand, (const unsigned char *)"permissive", sizeof("permissive")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_bool(hand, p->permissive);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->seize) {
        s = yajl_gen_string(hand, (const unsigned char *)"seize", sizeof("seize")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_bool(hand, p->seize);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->rdm_policy != LIBXL_RDM_RESERVE_POLICY_INVALID) {
        s = yajl_gen_string(hand, (const unsigned char *)"rdm_policy", sizeof("rdm_policy")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__yajl_gen_enum(hand, libxl_rdm_reserve_policy_to_string(p->rdm_policy));
        if (s != yajl_gen_status_ok)
            goto out;
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_device_pci_to_json(libxl_ctx *ctx, libxl_device_pci *p)
{
    return libxl__object_to_json(ctx, "libxl_device_pci", (libxl__gen_json_callback)&libxl_device_pci_gen_json, (void *)p);
}

yajl_gen_status libxl_device_rdm_gen_json(yajl_gen hand, libxl_device_rdm *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    if (p->start) {
        s = yajl_gen_string(hand, (const unsigned char *)"start", sizeof("start")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__uint64_gen_json(hand, p->start);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->size) {
        s = yajl_gen_string(hand, (const unsigned char *)"size", sizeof("size")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__uint64_gen_json(hand, p->size);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->policy != LIBXL_RDM_RESERVE_POLICY_INVALID) {
        s = yajl_gen_string(hand, (const unsigned char *)"policy", sizeof("policy")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__yajl_gen_enum(hand, libxl_rdm_reserve_policy_to_string(p->policy));
        if (s != yajl_gen_status_ok)
            goto out;
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_device_rdm_to_json(libxl_ctx *ctx, libxl_device_rdm *p)
{
    return libxl__object_to_json(ctx, "libxl_device_rdm", (libxl__gen_json_callback)&libxl_device_rdm_gen_json, (void *)p);
}

yajl_gen_status libxl_usbctrl_type_gen_json(yajl_gen hand, libxl_usbctrl_type *p)
{
    yajl_gen_status s;
    s = libxl__yajl_gen_enum(hand, libxl_usbctrl_type_to_string(*p));
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_usbctrl_type_to_json(libxl_ctx *ctx, libxl_usbctrl_type p)
{
    return libxl__object_to_json(ctx, "libxl_usbctrl_type", (libxl__gen_json_callback)&libxl_usbctrl_type_gen_json, (void *)&p);
}

yajl_gen_status libxl_usbdev_type_gen_json(yajl_gen hand, libxl_usbdev_type *p)
{
    yajl_gen_status s;
    s = libxl__yajl_gen_enum(hand, libxl_usbdev_type_to_string(*p));
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_usbdev_type_to_json(libxl_ctx *ctx, libxl_usbdev_type p)
{
    return libxl__object_to_json(ctx, "libxl_usbdev_type", (libxl__gen_json_callback)&libxl_usbdev_type_gen_json, (void *)&p);
}

yajl_gen_status libxl_device_usbctrl_gen_json(yajl_gen hand, libxl_device_usbctrl *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    if (p->type) {
        s = yajl_gen_string(hand, (const unsigned char *)"type", sizeof("type")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__yajl_gen_enum(hand, libxl_usbctrl_type_to_string(p->type));
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->devid != -1) {
        s = yajl_gen_string(hand, (const unsigned char *)"devid", sizeof("devid")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->devid);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->version) {
        s = yajl_gen_string(hand, (const unsigned char *)"version", sizeof("version")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->version);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->ports) {
        s = yajl_gen_string(hand, (const unsigned char *)"ports", sizeof("ports")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->ports);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->backend_domid) {
        s = yajl_gen_string(hand, (const unsigned char *)"backend_domid", sizeof("backend_domid")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->backend_domid);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->backend_domname)) {
        s = yajl_gen_string(hand, (const unsigned char *)"backend_domname", sizeof("backend_domname")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->backend_domname);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_device_usbctrl_to_json(libxl_ctx *ctx, libxl_device_usbctrl *p)
{
    return libxl__object_to_json(ctx, "libxl_device_usbctrl", (libxl__gen_json_callback)&libxl_device_usbctrl_gen_json, (void *)p);
}

yajl_gen_status libxl_device_usbdev_gen_json(yajl_gen hand, libxl_device_usbdev *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    if (p->ctrl != -1) {
        s = yajl_gen_string(hand, (const unsigned char *)"ctrl", sizeof("ctrl")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->ctrl);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->port) {
        s = yajl_gen_string(hand, (const unsigned char *)"port", sizeof("port")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->port);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (1 /* always generate JSON output for aggregate type */) {
        switch (p->type) {
        case LIBXL_USBDEV_TYPE_HOSTDEV:
            s = yajl_gen_string(hand, (const unsigned char *)"type.hostdev", sizeof("type.hostdev")-1);
            if (s != yajl_gen_status_ok)
                goto out;
            break;
        }
        switch (p->type) {
        case LIBXL_USBDEV_TYPE_HOSTDEV:
                s = yajl_gen_map_open(hand);
                if (s != yajl_gen_status_ok)
                    goto out;
                if (p->u.hostdev.hostbus) {
                    s = yajl_gen_string(hand, (const unsigned char *)"hostbus", sizeof("hostbus")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = yajl_gen_integer(hand, p->u.hostdev.hostbus);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                if (p->u.hostdev.hostaddr) {
                    s = yajl_gen_string(hand, (const unsigned char *)"hostaddr", sizeof("hostaddr")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = yajl_gen_integer(hand, p->u.hostdev.hostaddr);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                s = yajl_gen_map_close(hand);
                if (s != yajl_gen_status_ok)
                    goto out;
            break;
        }
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_device_usbdev_to_json(libxl_ctx *ctx, libxl_device_usbdev *p)
{
    return libxl__object_to_json(ctx, "libxl_device_usbdev", (libxl__gen_json_callback)&libxl_device_usbdev_gen_json, (void *)p);
}

yajl_gen_status libxl_device_dtdev_gen_json(yajl_gen hand, libxl_device_dtdev *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    if (!libxl__string_is_default(&p->path)) {
        s = yajl_gen_string(hand, (const unsigned char *)"path", sizeof("path")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->path);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_device_dtdev_to_json(libxl_ctx *ctx, libxl_device_dtdev *p)
{
    return libxl__object_to_json(ctx, "libxl_device_dtdev", (libxl__gen_json_callback)&libxl_device_dtdev_gen_json, (void *)p);
}

yajl_gen_status libxl_device_vtpm_gen_json(yajl_gen hand, libxl_device_vtpm *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    if (p->backend_domid) {
        s = yajl_gen_string(hand, (const unsigned char *)"backend_domid", sizeof("backend_domid")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->backend_domid);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->backend_domname)) {
        s = yajl_gen_string(hand, (const unsigned char *)"backend_domname", sizeof("backend_domname")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->backend_domname);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->devid != -1) {
        s = yajl_gen_string(hand, (const unsigned char *)"devid", sizeof("devid")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->devid);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl_uuid_is_nil(&p->uuid)) {
        s = yajl_gen_string(hand, (const unsigned char *)"uuid", sizeof("uuid")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_uuid_gen_json(hand, &p->uuid);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_device_vtpm_to_json(libxl_ctx *ctx, libxl_device_vtpm *p)
{
    return libxl__object_to_json(ctx, "libxl_device_vtpm", (libxl__gen_json_callback)&libxl_device_vtpm_gen_json, (void *)p);
}

yajl_gen_status libxl_device_p9_gen_json(yajl_gen hand, libxl_device_p9 *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    if (p->backend_domid) {
        s = yajl_gen_string(hand, (const unsigned char *)"backend_domid", sizeof("backend_domid")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->backend_domid);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->backend_domname)) {
        s = yajl_gen_string(hand, (const unsigned char *)"backend_domname", sizeof("backend_domname")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->backend_domname);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->tag)) {
        s = yajl_gen_string(hand, (const unsigned char *)"tag", sizeof("tag")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->tag);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->path)) {
        s = yajl_gen_string(hand, (const unsigned char *)"path", sizeof("path")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->path);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->security_model)) {
        s = yajl_gen_string(hand, (const unsigned char *)"security_model", sizeof("security_model")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->security_model);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->devid != -1) {
        s = yajl_gen_string(hand, (const unsigned char *)"devid", sizeof("devid")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->devid);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_device_p9_to_json(libxl_ctx *ctx, libxl_device_p9 *p)
{
    return libxl__object_to_json(ctx, "libxl_device_p9", (libxl__gen_json_callback)&libxl_device_p9_gen_json, (void *)p);
}

yajl_gen_status libxl_device_channel_gen_json(yajl_gen hand, libxl_device_channel *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    if (p->backend_domid) {
        s = yajl_gen_string(hand, (const unsigned char *)"backend_domid", sizeof("backend_domid")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->backend_domid);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->backend_domname)) {
        s = yajl_gen_string(hand, (const unsigned char *)"backend_domname", sizeof("backend_domname")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->backend_domname);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->devid != -1) {
        s = yajl_gen_string(hand, (const unsigned char *)"devid", sizeof("devid")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->devid);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->name)) {
        s = yajl_gen_string(hand, (const unsigned char *)"name", sizeof("name")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->name);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (1 /* always generate JSON output for aggregate type */) {
        switch (p->connection) {
        case LIBXL_CHANNEL_CONNECTION_UNKNOWN:
            s = yajl_gen_string(hand, (const unsigned char *)"connection.unknown", sizeof("connection.unknown")-1);
            if (s != yajl_gen_status_ok)
                goto out;
            break;
        case LIBXL_CHANNEL_CONNECTION_PTY:
            s = yajl_gen_string(hand, (const unsigned char *)"connection.pty", sizeof("connection.pty")-1);
            if (s != yajl_gen_status_ok)
                goto out;
            break;
        case LIBXL_CHANNEL_CONNECTION_SOCKET:
            s = yajl_gen_string(hand, (const unsigned char *)"connection.socket", sizeof("connection.socket")-1);
            if (s != yajl_gen_status_ok)
                goto out;
            break;
        }
        switch (p->connection) {
        case LIBXL_CHANNEL_CONNECTION_UNKNOWN:
            s = yajl_gen_map_open(hand);
            if (s != yajl_gen_status_ok)
                goto out;
            s = yajl_gen_map_close(hand);
            if (s != yajl_gen_status_ok)
                goto out;
            break;
        case LIBXL_CHANNEL_CONNECTION_PTY:
            s = yajl_gen_map_open(hand);
            if (s != yajl_gen_status_ok)
                goto out;
            s = yajl_gen_map_close(hand);
            if (s != yajl_gen_status_ok)
                goto out;
            break;
        case LIBXL_CHANNEL_CONNECTION_SOCKET:
                s = yajl_gen_map_open(hand);
                if (s != yajl_gen_status_ok)
                    goto out;
                if (!libxl__string_is_default(&p->u.socket.path)) {
                    s = yajl_gen_string(hand, (const unsigned char *)"path", sizeof("path")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl__string_gen_json(hand, p->u.socket.path);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                s = yajl_gen_map_close(hand);
                if (s != yajl_gen_status_ok)
                    goto out;
            break;
        }
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_device_channel_to_json(libxl_ctx *ctx, libxl_device_channel *p)
{
    return libxl__object_to_json(ctx, "libxl_device_channel", (libxl__gen_json_callback)&libxl_device_channel_gen_json, (void *)p);
}

yajl_gen_status libxl_connector_param_gen_json(yajl_gen hand, libxl_connector_param *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    if (!libxl__string_is_default(&p->id)) {
        s = yajl_gen_string(hand, (const unsigned char *)"id", sizeof("id")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->id);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->width) {
        s = yajl_gen_string(hand, (const unsigned char *)"width", sizeof("width")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->width);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->height) {
        s = yajl_gen_string(hand, (const unsigned char *)"height", sizeof("height")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->height);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_connector_param_to_json(libxl_ctx *ctx, libxl_connector_param *p)
{
    return libxl__object_to_json(ctx, "libxl_connector_param", (libxl__gen_json_callback)&libxl_connector_param_gen_json, (void *)p);
}

yajl_gen_status libxl_device_vdispl_gen_json(yajl_gen hand, libxl_device_vdispl *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    if (p->backend_domid) {
        s = yajl_gen_string(hand, (const unsigned char *)"backend_domid", sizeof("backend_domid")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->backend_domid);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->backend_domname)) {
        s = yajl_gen_string(hand, (const unsigned char *)"backend_domname", sizeof("backend_domname")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->backend_domname);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->devid != -1) {
        s = yajl_gen_string(hand, (const unsigned char *)"devid", sizeof("devid")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->devid);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->be_alloc) {
        s = yajl_gen_string(hand, (const unsigned char *)"be_alloc", sizeof("be_alloc")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_bool(hand, p->be_alloc);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->connectors && p->num_connectors) {
        s = yajl_gen_string(hand, (const unsigned char *)"connectors", sizeof("connectors")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        {
            int i;
            s = yajl_gen_array_open(hand);
            if (s != yajl_gen_status_ok)
                goto out;
            for (i=0; i<p->num_connectors; i++) {
                    s = libxl_connector_param_gen_json(hand, &p->connectors[i]);
                    if (s != yajl_gen_status_ok)
                        goto out;
            }
            s = yajl_gen_array_close(hand);
            if (s != yajl_gen_status_ok)
                goto out;
        }
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_device_vdispl_to_json(libxl_ctx *ctx, libxl_device_vdispl *p)
{
    return libxl__object_to_json(ctx, "libxl_device_vdispl", (libxl__gen_json_callback)&libxl_device_vdispl_gen_json, (void *)p);
}

yajl_gen_status libxl_domain_config_gen_json(yajl_gen hand, libxl_domain_config *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    if (1 /* always generate JSON output for aggregate type */) {
        s = yajl_gen_string(hand, (const unsigned char *)"c_info", sizeof("c_info")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_domain_create_info_gen_json(hand, &p->c_info);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (1 /* always generate JSON output for aggregate type */) {
        s = yajl_gen_string(hand, (const unsigned char *)"b_info", sizeof("b_info")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_domain_build_info_gen_json(hand, &p->b_info);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->disks && p->num_disks) {
        s = yajl_gen_string(hand, (const unsigned char *)"disks", sizeof("disks")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        {
            int i;
            s = yajl_gen_array_open(hand);
            if (s != yajl_gen_status_ok)
                goto out;
            for (i=0; i<p->num_disks; i++) {
                    s = libxl_device_disk_gen_json(hand, &p->disks[i]);
                    if (s != yajl_gen_status_ok)
                        goto out;
            }
            s = yajl_gen_array_close(hand);
            if (s != yajl_gen_status_ok)
                goto out;
        }
    }
    if (p->nics && p->num_nics) {
        s = yajl_gen_string(hand, (const unsigned char *)"nics", sizeof("nics")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        {
            int i;
            s = yajl_gen_array_open(hand);
            if (s != yajl_gen_status_ok)
                goto out;
            for (i=0; i<p->num_nics; i++) {
                    s = libxl_device_nic_gen_json(hand, &p->nics[i]);
                    if (s != yajl_gen_status_ok)
                        goto out;
            }
            s = yajl_gen_array_close(hand);
            if (s != yajl_gen_status_ok)
                goto out;
        }
    }
    if (p->pcidevs && p->num_pcidevs) {
        s = yajl_gen_string(hand, (const unsigned char *)"pcidevs", sizeof("pcidevs")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        {
            int i;
            s = yajl_gen_array_open(hand);
            if (s != yajl_gen_status_ok)
                goto out;
            for (i=0; i<p->num_pcidevs; i++) {
                    s = libxl_device_pci_gen_json(hand, &p->pcidevs[i]);
                    if (s != yajl_gen_status_ok)
                        goto out;
            }
            s = yajl_gen_array_close(hand);
            if (s != yajl_gen_status_ok)
                goto out;
        }
    }
    if (p->rdms && p->num_rdms) {
        s = yajl_gen_string(hand, (const unsigned char *)"rdms", sizeof("rdms")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        {
            int i;
            s = yajl_gen_array_open(hand);
            if (s != yajl_gen_status_ok)
                goto out;
            for (i=0; i<p->num_rdms; i++) {
                    s = libxl_device_rdm_gen_json(hand, &p->rdms[i]);
                    if (s != yajl_gen_status_ok)
                        goto out;
            }
            s = yajl_gen_array_close(hand);
            if (s != yajl_gen_status_ok)
                goto out;
        }
    }
    if (p->dtdevs && p->num_dtdevs) {
        s = yajl_gen_string(hand, (const unsigned char *)"dtdevs", sizeof("dtdevs")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        {
            int i;
            s = yajl_gen_array_open(hand);
            if (s != yajl_gen_status_ok)
                goto out;
            for (i=0; i<p->num_dtdevs; i++) {
                    s = libxl_device_dtdev_gen_json(hand, &p->dtdevs[i]);
                    if (s != yajl_gen_status_ok)
                        goto out;
            }
            s = yajl_gen_array_close(hand);
            if (s != yajl_gen_status_ok)
                goto out;
        }
    }
    if (p->vfbs && p->num_vfbs) {
        s = yajl_gen_string(hand, (const unsigned char *)"vfbs", sizeof("vfbs")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        {
            int i;
            s = yajl_gen_array_open(hand);
            if (s != yajl_gen_status_ok)
                goto out;
            for (i=0; i<p->num_vfbs; i++) {
                    s = libxl_device_vfb_gen_json(hand, &p->vfbs[i]);
                    if (s != yajl_gen_status_ok)
                        goto out;
            }
            s = yajl_gen_array_close(hand);
            if (s != yajl_gen_status_ok)
                goto out;
        }
    }
    if (p->vkbs && p->num_vkbs) {
        s = yajl_gen_string(hand, (const unsigned char *)"vkbs", sizeof("vkbs")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        {
            int i;
            s = yajl_gen_array_open(hand);
            if (s != yajl_gen_status_ok)
                goto out;
            for (i=0; i<p->num_vkbs; i++) {
                    s = libxl_device_vkb_gen_json(hand, &p->vkbs[i]);
                    if (s != yajl_gen_status_ok)
                        goto out;
            }
            s = yajl_gen_array_close(hand);
            if (s != yajl_gen_status_ok)
                goto out;
        }
    }
    if (p->vtpms && p->num_vtpms) {
        s = yajl_gen_string(hand, (const unsigned char *)"vtpms", sizeof("vtpms")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        {
            int i;
            s = yajl_gen_array_open(hand);
            if (s != yajl_gen_status_ok)
                goto out;
            for (i=0; i<p->num_vtpms; i++) {
                    s = libxl_device_vtpm_gen_json(hand, &p->vtpms[i]);
                    if (s != yajl_gen_status_ok)
                        goto out;
            }
            s = yajl_gen_array_close(hand);
            if (s != yajl_gen_status_ok)
                goto out;
        }
    }
    if (p->p9s && p->num_p9s) {
        s = yajl_gen_string(hand, (const unsigned char *)"p9s", sizeof("p9s")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        {
            int i;
            s = yajl_gen_array_open(hand);
            if (s != yajl_gen_status_ok)
                goto out;
            for (i=0; i<p->num_p9s; i++) {
                    s = libxl_device_p9_gen_json(hand, &p->p9s[i]);
                    if (s != yajl_gen_status_ok)
                        goto out;
            }
            s = yajl_gen_array_close(hand);
            if (s != yajl_gen_status_ok)
                goto out;
        }
    }
    if (p->vdispls && p->num_vdispls) {
        s = yajl_gen_string(hand, (const unsigned char *)"vdispls", sizeof("vdispls")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        {
            int i;
            s = yajl_gen_array_open(hand);
            if (s != yajl_gen_status_ok)
                goto out;
            for (i=0; i<p->num_vdispls; i++) {
                    s = libxl_device_vdispl_gen_json(hand, &p->vdispls[i]);
                    if (s != yajl_gen_status_ok)
                        goto out;
            }
            s = yajl_gen_array_close(hand);
            if (s != yajl_gen_status_ok)
                goto out;
        }
    }
    if (p->channels && p->num_channels) {
        s = yajl_gen_string(hand, (const unsigned char *)"channels", sizeof("channels")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        {
            int i;
            s = yajl_gen_array_open(hand);
            if (s != yajl_gen_status_ok)
                goto out;
            for (i=0; i<p->num_channels; i++) {
                    s = libxl_device_channel_gen_json(hand, &p->channels[i]);
                    if (s != yajl_gen_status_ok)
                        goto out;
            }
            s = yajl_gen_array_close(hand);
            if (s != yajl_gen_status_ok)
                goto out;
        }
    }
    if (p->usbctrls && p->num_usbctrls) {
        s = yajl_gen_string(hand, (const unsigned char *)"usbctrls", sizeof("usbctrls")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        {
            int i;
            s = yajl_gen_array_open(hand);
            if (s != yajl_gen_status_ok)
                goto out;
            for (i=0; i<p->num_usbctrls; i++) {
                    s = libxl_device_usbctrl_gen_json(hand, &p->usbctrls[i]);
                    if (s != yajl_gen_status_ok)
                        goto out;
            }
            s = yajl_gen_array_close(hand);
            if (s != yajl_gen_status_ok)
                goto out;
        }
    }
    if (p->usbdevs && p->num_usbdevs) {
        s = yajl_gen_string(hand, (const unsigned char *)"usbdevs", sizeof("usbdevs")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        {
            int i;
            s = yajl_gen_array_open(hand);
            if (s != yajl_gen_status_ok)
                goto out;
            for (i=0; i<p->num_usbdevs; i++) {
                    s = libxl_device_usbdev_gen_json(hand, &p->usbdevs[i]);
                    if (s != yajl_gen_status_ok)
                        goto out;
            }
            s = yajl_gen_array_close(hand);
            if (s != yajl_gen_status_ok)
                goto out;
        }
    }
    if (p->on_poweroff != LIBXL_ACTION_ON_SHUTDOWN_DESTROY) {
        s = yajl_gen_string(hand, (const unsigned char *)"on_poweroff", sizeof("on_poweroff")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__yajl_gen_enum(hand, libxl_action_on_shutdown_to_string(p->on_poweroff));
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->on_reboot != LIBXL_ACTION_ON_SHUTDOWN_DESTROY) {
        s = yajl_gen_string(hand, (const unsigned char *)"on_reboot", sizeof("on_reboot")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__yajl_gen_enum(hand, libxl_action_on_shutdown_to_string(p->on_reboot));
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->on_watchdog != LIBXL_ACTION_ON_SHUTDOWN_DESTROY) {
        s = yajl_gen_string(hand, (const unsigned char *)"on_watchdog", sizeof("on_watchdog")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__yajl_gen_enum(hand, libxl_action_on_shutdown_to_string(p->on_watchdog));
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->on_crash != LIBXL_ACTION_ON_SHUTDOWN_DESTROY) {
        s = yajl_gen_string(hand, (const unsigned char *)"on_crash", sizeof("on_crash")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__yajl_gen_enum(hand, libxl_action_on_shutdown_to_string(p->on_crash));
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->on_soft_reset != LIBXL_ACTION_ON_SHUTDOWN_DESTROY) {
        s = yajl_gen_string(hand, (const unsigned char *)"on_soft_reset", sizeof("on_soft_reset")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__yajl_gen_enum(hand, libxl_action_on_shutdown_to_string(p->on_soft_reset));
        if (s != yajl_gen_status_ok)
            goto out;
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_domain_config_to_json(libxl_ctx *ctx, libxl_domain_config *p)
{
    return libxl__object_to_json(ctx, "libxl_domain_config", (libxl__gen_json_callback)&libxl_domain_config_gen_json, (void *)p);
}

yajl_gen_status libxl_diskinfo_gen_json(yajl_gen hand, libxl_diskinfo *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    if (!libxl__string_is_default(&p->backend)) {
        s = yajl_gen_string(hand, (const unsigned char *)"backend", sizeof("backend")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->backend);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->backend_id) {
        s = yajl_gen_string(hand, (const unsigned char *)"backend_id", sizeof("backend_id")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->backend_id);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->frontend)) {
        s = yajl_gen_string(hand, (const unsigned char *)"frontend", sizeof("frontend")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->frontend);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->frontend_id) {
        s = yajl_gen_string(hand, (const unsigned char *)"frontend_id", sizeof("frontend_id")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->frontend_id);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->devid != -1) {
        s = yajl_gen_string(hand, (const unsigned char *)"devid", sizeof("devid")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->devid);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->state) {
        s = yajl_gen_string(hand, (const unsigned char *)"state", sizeof("state")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->state);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->evtch) {
        s = yajl_gen_string(hand, (const unsigned char *)"evtch", sizeof("evtch")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->evtch);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->rref) {
        s = yajl_gen_string(hand, (const unsigned char *)"rref", sizeof("rref")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->rref);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_diskinfo_to_json(libxl_ctx *ctx, libxl_diskinfo *p)
{
    return libxl__object_to_json(ctx, "libxl_diskinfo", (libxl__gen_json_callback)&libxl_diskinfo_gen_json, (void *)p);
}

yajl_gen_status libxl_nicinfo_gen_json(yajl_gen hand, libxl_nicinfo *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    if (!libxl__string_is_default(&p->backend)) {
        s = yajl_gen_string(hand, (const unsigned char *)"backend", sizeof("backend")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->backend);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->backend_id) {
        s = yajl_gen_string(hand, (const unsigned char *)"backend_id", sizeof("backend_id")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->backend_id);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->frontend)) {
        s = yajl_gen_string(hand, (const unsigned char *)"frontend", sizeof("frontend")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->frontend);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->frontend_id) {
        s = yajl_gen_string(hand, (const unsigned char *)"frontend_id", sizeof("frontend_id")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->frontend_id);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->devid != -1) {
        s = yajl_gen_string(hand, (const unsigned char *)"devid", sizeof("devid")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->devid);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->state) {
        s = yajl_gen_string(hand, (const unsigned char *)"state", sizeof("state")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->state);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->evtch) {
        s = yajl_gen_string(hand, (const unsigned char *)"evtch", sizeof("evtch")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->evtch);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->rref_tx) {
        s = yajl_gen_string(hand, (const unsigned char *)"rref_tx", sizeof("rref_tx")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->rref_tx);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->rref_rx) {
        s = yajl_gen_string(hand, (const unsigned char *)"rref_rx", sizeof("rref_rx")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->rref_rx);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_nicinfo_to_json(libxl_ctx *ctx, libxl_nicinfo *p)
{
    return libxl__object_to_json(ctx, "libxl_nicinfo", (libxl__gen_json_callback)&libxl_nicinfo_gen_json, (void *)p);
}

yajl_gen_status libxl_vtpminfo_gen_json(yajl_gen hand, libxl_vtpminfo *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    if (!libxl__string_is_default(&p->backend)) {
        s = yajl_gen_string(hand, (const unsigned char *)"backend", sizeof("backend")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->backend);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->backend_id) {
        s = yajl_gen_string(hand, (const unsigned char *)"backend_id", sizeof("backend_id")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->backend_id);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->frontend)) {
        s = yajl_gen_string(hand, (const unsigned char *)"frontend", sizeof("frontend")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->frontend);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->frontend_id) {
        s = yajl_gen_string(hand, (const unsigned char *)"frontend_id", sizeof("frontend_id")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->frontend_id);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->devid != -1) {
        s = yajl_gen_string(hand, (const unsigned char *)"devid", sizeof("devid")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->devid);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->state) {
        s = yajl_gen_string(hand, (const unsigned char *)"state", sizeof("state")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->state);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->evtch) {
        s = yajl_gen_string(hand, (const unsigned char *)"evtch", sizeof("evtch")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->evtch);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->rref) {
        s = yajl_gen_string(hand, (const unsigned char *)"rref", sizeof("rref")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->rref);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl_uuid_is_nil(&p->uuid)) {
        s = yajl_gen_string(hand, (const unsigned char *)"uuid", sizeof("uuid")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_uuid_gen_json(hand, &p->uuid);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_vtpminfo_to_json(libxl_ctx *ctx, libxl_vtpminfo *p)
{
    return libxl__object_to_json(ctx, "libxl_vtpminfo", (libxl__gen_json_callback)&libxl_vtpminfo_gen_json, (void *)p);
}

yajl_gen_status libxl_usbctrlinfo_gen_json(yajl_gen hand, libxl_usbctrlinfo *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    if (p->type) {
        s = yajl_gen_string(hand, (const unsigned char *)"type", sizeof("type")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__yajl_gen_enum(hand, libxl_usbctrl_type_to_string(p->type));
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->devid != -1) {
        s = yajl_gen_string(hand, (const unsigned char *)"devid", sizeof("devid")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->devid);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->version) {
        s = yajl_gen_string(hand, (const unsigned char *)"version", sizeof("version")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->version);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->ports) {
        s = yajl_gen_string(hand, (const unsigned char *)"ports", sizeof("ports")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->ports);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->backend)) {
        s = yajl_gen_string(hand, (const unsigned char *)"backend", sizeof("backend")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->backend);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->backend_id) {
        s = yajl_gen_string(hand, (const unsigned char *)"backend_id", sizeof("backend_id")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->backend_id);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->frontend)) {
        s = yajl_gen_string(hand, (const unsigned char *)"frontend", sizeof("frontend")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->frontend);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->frontend_id) {
        s = yajl_gen_string(hand, (const unsigned char *)"frontend_id", sizeof("frontend_id")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->frontend_id);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->state) {
        s = yajl_gen_string(hand, (const unsigned char *)"state", sizeof("state")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->state);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->evtch) {
        s = yajl_gen_string(hand, (const unsigned char *)"evtch", sizeof("evtch")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->evtch);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->ref_urb) {
        s = yajl_gen_string(hand, (const unsigned char *)"ref_urb", sizeof("ref_urb")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->ref_urb);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->ref_conn) {
        s = yajl_gen_string(hand, (const unsigned char *)"ref_conn", sizeof("ref_conn")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->ref_conn);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_usbctrlinfo_to_json(libxl_ctx *ctx, libxl_usbctrlinfo *p)
{
    return libxl__object_to_json(ctx, "libxl_usbctrlinfo", (libxl__gen_json_callback)&libxl_usbctrlinfo_gen_json, (void *)p);
}

yajl_gen_status libxl_vcpuinfo_gen_json(yajl_gen hand, libxl_vcpuinfo *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    if (p->vcpuid) {
        s = yajl_gen_string(hand, (const unsigned char *)"vcpuid", sizeof("vcpuid")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->vcpuid);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->cpu) {
        s = yajl_gen_string(hand, (const unsigned char *)"cpu", sizeof("cpu")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->cpu);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->online) {
        s = yajl_gen_string(hand, (const unsigned char *)"online", sizeof("online")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_bool(hand, p->online);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->blocked) {
        s = yajl_gen_string(hand, (const unsigned char *)"blocked", sizeof("blocked")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_bool(hand, p->blocked);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->running) {
        s = yajl_gen_string(hand, (const unsigned char *)"running", sizeof("running")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_bool(hand, p->running);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->vcpu_time) {
        s = yajl_gen_string(hand, (const unsigned char *)"vcpu_time", sizeof("vcpu_time")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__uint64_gen_json(hand, p->vcpu_time);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl_bitmap_is_empty(&p->cpumap)) {
        s = yajl_gen_string(hand, (const unsigned char *)"cpumap", sizeof("cpumap")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_bitmap_gen_json(hand, &p->cpumap);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl_bitmap_is_empty(&p->cpumap_soft)) {
        s = yajl_gen_string(hand, (const unsigned char *)"cpumap_soft", sizeof("cpumap_soft")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_bitmap_gen_json(hand, &p->cpumap_soft);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_vcpuinfo_to_json(libxl_ctx *ctx, libxl_vcpuinfo *p)
{
    return libxl__object_to_json(ctx, "libxl_vcpuinfo", (libxl__gen_json_callback)&libxl_vcpuinfo_gen_json, (void *)p);
}

yajl_gen_status libxl_physinfo_gen_json(yajl_gen hand, libxl_physinfo *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    if (p->domain_unpriv) {
        s = yajl_gen_string(hand, (const unsigned char *)"domain_unpriv", sizeof("domain_unpriv")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__yajl_gen_enum(hand, libxl_domain_unpriv_to_string(p->domain_unpriv));
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->threads_per_core) {
        s = yajl_gen_string(hand, (const unsigned char *)"threads_per_core", sizeof("threads_per_core")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->threads_per_core);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->cores_per_socket) {
        s = yajl_gen_string(hand, (const unsigned char *)"cores_per_socket", sizeof("cores_per_socket")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->cores_per_socket);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->max_cpu_id) {
        s = yajl_gen_string(hand, (const unsigned char *)"max_cpu_id", sizeof("max_cpu_id")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->max_cpu_id);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->nr_cpus) {
        s = yajl_gen_string(hand, (const unsigned char *)"nr_cpus", sizeof("nr_cpus")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->nr_cpus);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->cpu_khz) {
        s = yajl_gen_string(hand, (const unsigned char *)"cpu_khz", sizeof("cpu_khz")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->cpu_khz);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->total_pages) {
        s = yajl_gen_string(hand, (const unsigned char *)"total_pages", sizeof("total_pages")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__uint64_gen_json(hand, p->total_pages);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->free_pages) {
        s = yajl_gen_string(hand, (const unsigned char *)"free_pages", sizeof("free_pages")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__uint64_gen_json(hand, p->free_pages);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->scrub_pages) {
        s = yajl_gen_string(hand, (const unsigned char *)"scrub_pages", sizeof("scrub_pages")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__uint64_gen_json(hand, p->scrub_pages);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->outstanding_pages) {
        s = yajl_gen_string(hand, (const unsigned char *)"outstanding_pages", sizeof("outstanding_pages")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__uint64_gen_json(hand, p->outstanding_pages);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->sharing_freed_pages) {
        s = yajl_gen_string(hand, (const unsigned char *)"sharing_freed_pages", sizeof("sharing_freed_pages")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__uint64_gen_json(hand, p->sharing_freed_pages);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->sharing_used_frames) {
        s = yajl_gen_string(hand, (const unsigned char *)"sharing_used_frames", sizeof("sharing_used_frames")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__uint64_gen_json(hand, p->sharing_used_frames);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->max_possible_mfn) {
        s = yajl_gen_string(hand, (const unsigned char *)"max_possible_mfn", sizeof("max_possible_mfn")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__uint64_gen_json(hand, p->max_possible_mfn);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->nr_nodes) {
        s = yajl_gen_string(hand, (const unsigned char *)"nr_nodes", sizeof("nr_nodes")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->nr_nodes);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__hwcap_is_default(&p->hw_cap)) {
        s = yajl_gen_string(hand, (const unsigned char *)"hw_cap", sizeof("hw_cap")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_hwcap_gen_json(hand, &p->hw_cap);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->cap_hvm) {
        s = yajl_gen_string(hand, (const unsigned char *)"cap_hvm", sizeof("cap_hvm")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_bool(hand, p->cap_hvm);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->cap_hvm_directio) {
        s = yajl_gen_string(hand, (const unsigned char *)"cap_hvm_directio", sizeof("cap_hvm_directio")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_bool(hand, p->cap_hvm_directio);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_physinfo_to_json(libxl_ctx *ctx, libxl_physinfo *p)
{
    return libxl__object_to_json(ctx, "libxl_physinfo", (libxl__gen_json_callback)&libxl_physinfo_gen_json, (void *)p);
}

yajl_gen_status libxl_connectorinfo_gen_json(yajl_gen hand, libxl_connectorinfo *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    if (!libxl__string_is_default(&p->id)) {
        s = yajl_gen_string(hand, (const unsigned char *)"id", sizeof("id")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->id);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->width) {
        s = yajl_gen_string(hand, (const unsigned char *)"width", sizeof("width")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->width);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->height) {
        s = yajl_gen_string(hand, (const unsigned char *)"height", sizeof("height")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->height);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->req_evtch) {
        s = yajl_gen_string(hand, (const unsigned char *)"req_evtch", sizeof("req_evtch")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->req_evtch);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->req_rref) {
        s = yajl_gen_string(hand, (const unsigned char *)"req_rref", sizeof("req_rref")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->req_rref);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->evt_evtch) {
        s = yajl_gen_string(hand, (const unsigned char *)"evt_evtch", sizeof("evt_evtch")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->evt_evtch);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->evt_rref) {
        s = yajl_gen_string(hand, (const unsigned char *)"evt_rref", sizeof("evt_rref")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->evt_rref);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_connectorinfo_to_json(libxl_ctx *ctx, libxl_connectorinfo *p)
{
    return libxl__object_to_json(ctx, "libxl_connectorinfo", (libxl__gen_json_callback)&libxl_connectorinfo_gen_json, (void *)p);
}

yajl_gen_status libxl_vdisplinfo_gen_json(yajl_gen hand, libxl_vdisplinfo *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    if (!libxl__string_is_default(&p->backend)) {
        s = yajl_gen_string(hand, (const unsigned char *)"backend", sizeof("backend")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->backend);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->backend_id) {
        s = yajl_gen_string(hand, (const unsigned char *)"backend_id", sizeof("backend_id")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->backend_id);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->frontend)) {
        s = yajl_gen_string(hand, (const unsigned char *)"frontend", sizeof("frontend")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->frontend);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->frontend_id) {
        s = yajl_gen_string(hand, (const unsigned char *)"frontend_id", sizeof("frontend_id")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->frontend_id);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->devid != -1) {
        s = yajl_gen_string(hand, (const unsigned char *)"devid", sizeof("devid")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->devid);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->state) {
        s = yajl_gen_string(hand, (const unsigned char *)"state", sizeof("state")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->state);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->be_alloc) {
        s = yajl_gen_string(hand, (const unsigned char *)"be_alloc", sizeof("be_alloc")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_bool(hand, p->be_alloc);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->connectors && p->num_connectors) {
        s = yajl_gen_string(hand, (const unsigned char *)"connectors", sizeof("connectors")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        {
            int i;
            s = yajl_gen_array_open(hand);
            if (s != yajl_gen_status_ok)
                goto out;
            for (i=0; i<p->num_connectors; i++) {
                    s = libxl_connectorinfo_gen_json(hand, &p->connectors[i]);
                    if (s != yajl_gen_status_ok)
                        goto out;
            }
            s = yajl_gen_array_close(hand);
            if (s != yajl_gen_status_ok)
                goto out;
        }
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_vdisplinfo_to_json(libxl_ctx *ctx, libxl_vdisplinfo *p)
{
    return libxl__object_to_json(ctx, "libxl_vdisplinfo", (libxl__gen_json_callback)&libxl_vdisplinfo_gen_json, (void *)p);
}

yajl_gen_status libxl_numainfo_gen_json(yajl_gen hand, libxl_numainfo *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    if (p->size) {
        s = yajl_gen_string(hand, (const unsigned char *)"size", sizeof("size")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__uint64_gen_json(hand, p->size);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->free) {
        s = yajl_gen_string(hand, (const unsigned char *)"free", sizeof("free")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__uint64_gen_json(hand, p->free);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->dists && p->num_dists) {
        s = yajl_gen_string(hand, (const unsigned char *)"dists", sizeof("dists")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        {
            int i;
            s = yajl_gen_array_open(hand);
            if (s != yajl_gen_status_ok)
                goto out;
            for (i=0; i<p->num_dists; i++) {
                    s = yajl_gen_integer(hand, p->dists[i]);
                    if (s != yajl_gen_status_ok)
                        goto out;
            }
            s = yajl_gen_array_close(hand);
            if (s != yajl_gen_status_ok)
                goto out;
        }
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_numainfo_to_json(libxl_ctx *ctx, libxl_numainfo *p)
{
    return libxl__object_to_json(ctx, "libxl_numainfo", (libxl__gen_json_callback)&libxl_numainfo_gen_json, (void *)p);
}

yajl_gen_status libxl_cputopology_gen_json(yajl_gen hand, libxl_cputopology *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    if (p->core) {
        s = yajl_gen_string(hand, (const unsigned char *)"core", sizeof("core")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->core);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->socket) {
        s = yajl_gen_string(hand, (const unsigned char *)"socket", sizeof("socket")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->socket);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->node) {
        s = yajl_gen_string(hand, (const unsigned char *)"node", sizeof("node")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->node);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_cputopology_to_json(libxl_ctx *ctx, libxl_cputopology *p)
{
    return libxl__object_to_json(ctx, "libxl_cputopology", (libxl__gen_json_callback)&libxl_cputopology_gen_json, (void *)p);
}

yajl_gen_status libxl_pcitopology_gen_json(yajl_gen hand, libxl_pcitopology *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    if (p->seg) {
        s = yajl_gen_string(hand, (const unsigned char *)"seg", sizeof("seg")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->seg);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->bus) {
        s = yajl_gen_string(hand, (const unsigned char *)"bus", sizeof("bus")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->bus);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->devfn) {
        s = yajl_gen_string(hand, (const unsigned char *)"devfn", sizeof("devfn")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->devfn);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->node) {
        s = yajl_gen_string(hand, (const unsigned char *)"node", sizeof("node")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->node);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_pcitopology_to_json(libxl_ctx *ctx, libxl_pcitopology *p)
{
    return libxl__object_to_json(ctx, "libxl_pcitopology", (libxl__gen_json_callback)&libxl_pcitopology_gen_json, (void *)p);
}

yajl_gen_status libxl_sched_credit_params_gen_json(yajl_gen hand, libxl_sched_credit_params *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    if (p->tslice_ms) {
        s = yajl_gen_string(hand, (const unsigned char *)"tslice_ms", sizeof("tslice_ms")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->tslice_ms);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->ratelimit_us) {
        s = yajl_gen_string(hand, (const unsigned char *)"ratelimit_us", sizeof("ratelimit_us")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->ratelimit_us);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_sched_credit_params_to_json(libxl_ctx *ctx, libxl_sched_credit_params *p)
{
    return libxl__object_to_json(ctx, "libxl_sched_credit_params", (libxl__gen_json_callback)&libxl_sched_credit_params_gen_json, (void *)p);
}

yajl_gen_status libxl_sched_credit2_params_gen_json(yajl_gen hand, libxl_sched_credit2_params *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    if (p->ratelimit_us) {
        s = yajl_gen_string(hand, (const unsigned char *)"ratelimit_us", sizeof("ratelimit_us")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->ratelimit_us);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_sched_credit2_params_to_json(libxl_ctx *ctx, libxl_sched_credit2_params *p)
{
    return libxl__object_to_json(ctx, "libxl_sched_credit2_params", (libxl__gen_json_callback)&libxl_sched_credit2_params_gen_json, (void *)p);
}

yajl_gen_status libxl_domain_remus_info_gen_json(yajl_gen hand, libxl_domain_remus_info *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    if (p->interval) {
        s = yajl_gen_string(hand, (const unsigned char *)"interval", sizeof("interval")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->interval);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__defbool_is_default(&p->allow_unsafe)) {
        s = yajl_gen_string(hand, (const unsigned char *)"allow_unsafe", sizeof("allow_unsafe")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_defbool_gen_json(hand, &p->allow_unsafe);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__defbool_is_default(&p->blackhole)) {
        s = yajl_gen_string(hand, (const unsigned char *)"blackhole", sizeof("blackhole")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_defbool_gen_json(hand, &p->blackhole);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__defbool_is_default(&p->compression)) {
        s = yajl_gen_string(hand, (const unsigned char *)"compression", sizeof("compression")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_defbool_gen_json(hand, &p->compression);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__defbool_is_default(&p->netbuf)) {
        s = yajl_gen_string(hand, (const unsigned char *)"netbuf", sizeof("netbuf")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_defbool_gen_json(hand, &p->netbuf);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__string_is_default(&p->netbufscript)) {
        s = yajl_gen_string(hand, (const unsigned char *)"netbufscript", sizeof("netbufscript")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl__string_gen_json(hand, p->netbufscript);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__defbool_is_default(&p->diskbuf)) {
        s = yajl_gen_string(hand, (const unsigned char *)"diskbuf", sizeof("diskbuf")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_defbool_gen_json(hand, &p->diskbuf);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__defbool_is_default(&p->colo)) {
        s = yajl_gen_string(hand, (const unsigned char *)"colo", sizeof("colo")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_defbool_gen_json(hand, &p->colo);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl__defbool_is_default(&p->userspace_colo_proxy)) {
        s = yajl_gen_string(hand, (const unsigned char *)"userspace_colo_proxy", sizeof("userspace_colo_proxy")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_defbool_gen_json(hand, &p->userspace_colo_proxy);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_domain_remus_info_to_json(libxl_ctx *ctx, libxl_domain_remus_info *p)
{
    return libxl__object_to_json(ctx, "libxl_domain_remus_info", (libxl__gen_json_callback)&libxl_domain_remus_info_gen_json, (void *)p);
}

yajl_gen_status libxl_event_type_gen_json(yajl_gen hand, libxl_event_type *p)
{
    yajl_gen_status s;
    s = libxl__yajl_gen_enum(hand, libxl_event_type_to_string(*p));
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_event_type_to_json(libxl_ctx *ctx, libxl_event_type p)
{
    return libxl__object_to_json(ctx, "libxl_event_type", (libxl__gen_json_callback)&libxl_event_type_gen_json, (void *)&p);
}

yajl_gen_status libxl_event_gen_json(yajl_gen hand, libxl_event *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    if (p->domid) {
        s = yajl_gen_string(hand, (const unsigned char *)"domid", sizeof("domid")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->domid);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (!libxl_uuid_is_nil(&p->domuuid)) {
        s = yajl_gen_string(hand, (const unsigned char *)"domuuid", sizeof("domuuid")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = libxl_uuid_gen_json(hand, &p->domuuid);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->for_user) {
        s = yajl_gen_string(hand, (const unsigned char *)"for_user", sizeof("for_user")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->for_user);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (1 /* always generate JSON output for aggregate type */) {
        switch (p->type) {
        case LIBXL_EVENT_TYPE_DOMAIN_SHUTDOWN:
            s = yajl_gen_string(hand, (const unsigned char *)"type.domain_shutdown", sizeof("type.domain_shutdown")-1);
            if (s != yajl_gen_status_ok)
                goto out;
            break;
        case LIBXL_EVENT_TYPE_DOMAIN_DEATH:
            s = yajl_gen_string(hand, (const unsigned char *)"type.domain_death", sizeof("type.domain_death")-1);
            if (s != yajl_gen_status_ok)
                goto out;
            break;
        case LIBXL_EVENT_TYPE_DISK_EJECT:
            s = yajl_gen_string(hand, (const unsigned char *)"type.disk_eject", sizeof("type.disk_eject")-1);
            if (s != yajl_gen_status_ok)
                goto out;
            break;
        case LIBXL_EVENT_TYPE_OPERATION_COMPLETE:
            s = yajl_gen_string(hand, (const unsigned char *)"type.operation_complete", sizeof("type.operation_complete")-1);
            if (s != yajl_gen_status_ok)
                goto out;
            break;
        case LIBXL_EVENT_TYPE_DOMAIN_CREATE_CONSOLE_AVAILABLE:
            s = yajl_gen_string(hand, (const unsigned char *)"type.domain_create_console_available", sizeof("type.domain_create_console_available")-1);
            if (s != yajl_gen_status_ok)
                goto out;
            break;
        }
        switch (p->type) {
        case LIBXL_EVENT_TYPE_DOMAIN_SHUTDOWN:
                s = yajl_gen_map_open(hand);
                if (s != yajl_gen_status_ok)
                    goto out;
                if (p->u.domain_shutdown.shutdown_reason) {
                    s = yajl_gen_string(hand, (const unsigned char *)"shutdown_reason", sizeof("shutdown_reason")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = yajl_gen_integer(hand, p->u.domain_shutdown.shutdown_reason);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                s = yajl_gen_map_close(hand);
                if (s != yajl_gen_status_ok)
                    goto out;
            break;
        case LIBXL_EVENT_TYPE_DOMAIN_DEATH:
            s = yajl_gen_map_open(hand);
            if (s != yajl_gen_status_ok)
                goto out;
            s = yajl_gen_map_close(hand);
            if (s != yajl_gen_status_ok)
                goto out;
            break;
        case LIBXL_EVENT_TYPE_DISK_EJECT:
                s = yajl_gen_map_open(hand);
                if (s != yajl_gen_status_ok)
                    goto out;
                if (!libxl__string_is_default(&p->u.disk_eject.vdev)) {
                    s = yajl_gen_string(hand, (const unsigned char *)"vdev", sizeof("vdev")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl__string_gen_json(hand, p->u.disk_eject.vdev);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                if (1 /* always generate JSON output for aggregate type */) {
                    s = yajl_gen_string(hand, (const unsigned char *)"disk", sizeof("disk")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = libxl_device_disk_gen_json(hand, &p->u.disk_eject.disk);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                s = yajl_gen_map_close(hand);
                if (s != yajl_gen_status_ok)
                    goto out;
            break;
        case LIBXL_EVENT_TYPE_OPERATION_COMPLETE:
                s = yajl_gen_map_open(hand);
                if (s != yajl_gen_status_ok)
                    goto out;
                if (p->u.operation_complete.rc) {
                    s = yajl_gen_string(hand, (const unsigned char *)"rc", sizeof("rc")-1);
                    if (s != yajl_gen_status_ok)
                        goto out;
                    s = yajl_gen_integer(hand, p->u.operation_complete.rc);
                    if (s != yajl_gen_status_ok)
                        goto out;
                }
                s = yajl_gen_map_close(hand);
                if (s != yajl_gen_status_ok)
                    goto out;
            break;
        case LIBXL_EVENT_TYPE_DOMAIN_CREATE_CONSOLE_AVAILABLE:
            s = yajl_gen_map_open(hand);
            if (s != yajl_gen_status_ok)
                goto out;
            s = yajl_gen_map_close(hand);
            if (s != yajl_gen_status_ok)
                goto out;
            break;
        }
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_event_to_json(libxl_ctx *ctx, libxl_event *p)
{
    return libxl__object_to_json(ctx, "libxl_event", (libxl__gen_json_callback)&libxl_event_gen_json, (void *)p);
}

yajl_gen_status libxl_psr_cmt_type_gen_json(yajl_gen hand, libxl_psr_cmt_type *p)
{
    yajl_gen_status s;
    s = libxl__yajl_gen_enum(hand, libxl_psr_cmt_type_to_string(*p));
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_psr_cmt_type_to_json(libxl_ctx *ctx, libxl_psr_cmt_type p)
{
    return libxl__object_to_json(ctx, "libxl_psr_cmt_type", (libxl__gen_json_callback)&libxl_psr_cmt_type_gen_json, (void *)&p);
}

yajl_gen_status libxl_psr_cbm_type_gen_json(yajl_gen hand, libxl_psr_cbm_type *p)
{
    yajl_gen_status s;
    s = libxl__yajl_gen_enum(hand, libxl_psr_cbm_type_to_string(*p));
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_psr_cbm_type_to_json(libxl_ctx *ctx, libxl_psr_cbm_type p)
{
    return libxl__object_to_json(ctx, "libxl_psr_cbm_type", (libxl__gen_json_callback)&libxl_psr_cbm_type_gen_json, (void *)&p);
}

yajl_gen_status libxl_psr_cat_info_gen_json(yajl_gen hand, libxl_psr_cat_info *p)
{
    yajl_gen_status s;
    s = yajl_gen_map_open(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    if (p->id) {
        s = yajl_gen_string(hand, (const unsigned char *)"id", sizeof("id")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->id);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->cos_max) {
        s = yajl_gen_string(hand, (const unsigned char *)"cos_max", sizeof("cos_max")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->cos_max);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->cbm_len) {
        s = yajl_gen_string(hand, (const unsigned char *)"cbm_len", sizeof("cbm_len")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_integer(hand, p->cbm_len);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    if (p->cdp_enabled) {
        s = yajl_gen_string(hand, (const unsigned char *)"cdp_enabled", sizeof("cdp_enabled")-1);
        if (s != yajl_gen_status_ok)
            goto out;
        s = yajl_gen_bool(hand, p->cdp_enabled);
        if (s != yajl_gen_status_ok)
            goto out;
    }
    s = yajl_gen_map_close(hand);
    if (s != yajl_gen_status_ok)
        goto out;
    out:
    return s;
}

char *libxl_psr_cat_info_to_json(libxl_ctx *ctx, libxl_psr_cat_info *p)
{
    return libxl__object_to_json(ctx, "libxl_psr_cat_info", (libxl__gen_json_callback)&libxl_psr_cat_info_gen_json, (void *)p);
}

int libxl__domain_unpriv_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_domain_unpriv *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const char *enum_str;
        if (!libxl__json_object_is_string(o)) {
            rc = -1;
            goto out;
        }
        enum_str = libxl__json_object_get_string(o);
        rc = libxl_domain_unpriv_from_string(enum_str, p);
        if (rc)
            goto out;
    }
    out:
    return rc;
}

int libxl_domain_unpriv_from_json(libxl_ctx *ctx, libxl_domain_unpriv *p, const char *s)
{
    return libxl__object_from_json(ctx, "libxl_domain_unpriv", (libxl__json_parse_callback)&libxl__domain_unpriv_parse_json, p, s);
}

int libxl__error_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_error *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const char *enum_str;
        if (!libxl__json_object_is_string(o)) {
            rc = -1;
            goto out;
        }
        enum_str = libxl__json_object_get_string(o);
        rc = libxl_error_from_string(enum_str, p);
        if (rc)
            goto out;
    }
    out:
    return rc;
}

int libxl_error_from_json(libxl_ctx *ctx, libxl_error *p, const char *s)
{
    return libxl__object_from_json(ctx, "libxl_error", (libxl__json_parse_callback)&libxl__error_parse_json, p, s);
}

int libxl__domain_type_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_domain_type *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const char *enum_str;
        if (!libxl__json_object_is_string(o)) {
            rc = -1;
            goto out;
        }
        enum_str = libxl__json_object_get_string(o);
        rc = libxl_domain_type_from_string(enum_str, p);
        if (rc)
            goto out;
    }
    out:
    return rc;
}

int libxl_domain_type_from_json(libxl_ctx *ctx, libxl_domain_type *p, const char *s)
{
    return libxl__object_from_json(ctx, "libxl_domain_type", (libxl__json_parse_callback)&libxl__domain_type_parse_json, p, s);
}

int libxl__rdm_reserve_strategy_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_rdm_reserve_strategy *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const char *enum_str;
        if (!libxl__json_object_is_string(o)) {
            rc = -1;
            goto out;
        }
        enum_str = libxl__json_object_get_string(o);
        rc = libxl_rdm_reserve_strategy_from_string(enum_str, p);
        if (rc)
            goto out;
    }
    out:
    return rc;
}

int libxl_rdm_reserve_strategy_from_json(libxl_ctx *ctx, libxl_rdm_reserve_strategy *p, const char *s)
{
    return libxl__object_from_json(ctx, "libxl_rdm_reserve_strategy", (libxl__json_parse_callback)&libxl__rdm_reserve_strategy_parse_json, p, s);
}

int libxl__rdm_reserve_policy_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_rdm_reserve_policy *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const char *enum_str;
        if (!libxl__json_object_is_string(o)) {
            rc = -1;
            goto out;
        }
        enum_str = libxl__json_object_get_string(o);
        rc = libxl_rdm_reserve_policy_from_string(enum_str, p);
        if (rc)
            goto out;
    }
    out:
    return rc;
}

int libxl_rdm_reserve_policy_from_json(libxl_ctx *ctx, libxl_rdm_reserve_policy *p, const char *s)
{
    return libxl__object_from_json(ctx, "libxl_rdm_reserve_policy", (libxl__json_parse_callback)&libxl__rdm_reserve_policy_parse_json, p, s);
}

int libxl__channel_connection_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_channel_connection *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const char *enum_str;
        if (!libxl__json_object_is_string(o)) {
            rc = -1;
            goto out;
        }
        enum_str = libxl__json_object_get_string(o);
        rc = libxl_channel_connection_from_string(enum_str, p);
        if (rc)
            goto out;
    }
    out:
    return rc;
}

int libxl_channel_connection_from_json(libxl_ctx *ctx, libxl_channel_connection *p, const char *s)
{
    return libxl__object_from_json(ctx, "libxl_channel_connection", (libxl__json_parse_callback)&libxl__channel_connection_parse_json, p, s);
}

int libxl__device_model_version_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_device_model_version *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const char *enum_str;
        if (!libxl__json_object_is_string(o)) {
            rc = -1;
            goto out;
        }
        enum_str = libxl__json_object_get_string(o);
        rc = libxl_device_model_version_from_string(enum_str, p);
        if (rc)
            goto out;
    }
    out:
    return rc;
}

int libxl_device_model_version_from_json(libxl_ctx *ctx, libxl_device_model_version *p, const char *s)
{
    return libxl__object_from_json(ctx, "libxl_device_model_version", (libxl__json_parse_callback)&libxl__device_model_version_parse_json, p, s);
}

int libxl__console_type_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_console_type *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const char *enum_str;
        if (!libxl__json_object_is_string(o)) {
            rc = -1;
            goto out;
        }
        enum_str = libxl__json_object_get_string(o);
        rc = libxl_console_type_from_string(enum_str, p);
        if (rc)
            goto out;
    }
    out:
    return rc;
}

int libxl_console_type_from_json(libxl_ctx *ctx, libxl_console_type *p, const char *s)
{
    return libxl__object_from_json(ctx, "libxl_console_type", (libxl__json_parse_callback)&libxl__console_type_parse_json, p, s);
}

int libxl__disk_format_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_disk_format *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const char *enum_str;
        if (!libxl__json_object_is_string(o)) {
            rc = -1;
            goto out;
        }
        enum_str = libxl__json_object_get_string(o);
        rc = libxl_disk_format_from_string(enum_str, p);
        if (rc)
            goto out;
    }
    out:
    return rc;
}

int libxl_disk_format_from_json(libxl_ctx *ctx, libxl_disk_format *p, const char *s)
{
    return libxl__object_from_json(ctx, "libxl_disk_format", (libxl__json_parse_callback)&libxl__disk_format_parse_json, p, s);
}

int libxl__disk_backend_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_disk_backend *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const char *enum_str;
        if (!libxl__json_object_is_string(o)) {
            rc = -1;
            goto out;
        }
        enum_str = libxl__json_object_get_string(o);
        rc = libxl_disk_backend_from_string(enum_str, p);
        if (rc)
            goto out;
    }
    out:
    return rc;
}

int libxl_disk_backend_from_json(libxl_ctx *ctx, libxl_disk_backend *p, const char *s)
{
    return libxl__object_from_json(ctx, "libxl_disk_backend", (libxl__json_parse_callback)&libxl__disk_backend_parse_json, p, s);
}

int libxl__nic_type_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_nic_type *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const char *enum_str;
        if (!libxl__json_object_is_string(o)) {
            rc = -1;
            goto out;
        }
        enum_str = libxl__json_object_get_string(o);
        rc = libxl_nic_type_from_string(enum_str, p);
        if (rc)
            goto out;
    }
    out:
    return rc;
}

int libxl_nic_type_from_json(libxl_ctx *ctx, libxl_nic_type *p, const char *s)
{
    return libxl__object_from_json(ctx, "libxl_nic_type", (libxl__json_parse_callback)&libxl__nic_type_parse_json, p, s);
}

int libxl__action_on_shutdown_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_action_on_shutdown *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const char *enum_str;
        if (!libxl__json_object_is_string(o)) {
            rc = -1;
            goto out;
        }
        enum_str = libxl__json_object_get_string(o);
        rc = libxl_action_on_shutdown_from_string(enum_str, p);
        if (rc)
            goto out;
    }
    out:
    return rc;
}

int libxl_action_on_shutdown_from_json(libxl_ctx *ctx, libxl_action_on_shutdown *p, const char *s)
{
    return libxl__object_from_json(ctx, "libxl_action_on_shutdown", (libxl__json_parse_callback)&libxl__action_on_shutdown_parse_json, p, s);
}

int libxl__trigger_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_trigger *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const char *enum_str;
        if (!libxl__json_object_is_string(o)) {
            rc = -1;
            goto out;
        }
        enum_str = libxl__json_object_get_string(o);
        rc = libxl_trigger_from_string(enum_str, p);
        if (rc)
            goto out;
    }
    out:
    return rc;
}

int libxl_trigger_from_json(libxl_ctx *ctx, libxl_trigger *p, const char *s)
{
    return libxl__object_from_json(ctx, "libxl_trigger", (libxl__json_parse_callback)&libxl__trigger_parse_json, p, s);
}

int libxl__tsc_mode_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_tsc_mode *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const char *enum_str;
        if (!libxl__json_object_is_string(o)) {
            rc = -1;
            goto out;
        }
        enum_str = libxl__json_object_get_string(o);
        rc = libxl_tsc_mode_from_string(enum_str, p);
        if (rc)
            goto out;
    }
    out:
    return rc;
}

int libxl_tsc_mode_from_json(libxl_ctx *ctx, libxl_tsc_mode *p, const char *s)
{
    return libxl__object_from_json(ctx, "libxl_tsc_mode", (libxl__json_parse_callback)&libxl__tsc_mode_parse_json, p, s);
}

int libxl__gfx_passthru_kind_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_gfx_passthru_kind *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const char *enum_str;
        if (!libxl__json_object_is_string(o)) {
            rc = -1;
            goto out;
        }
        enum_str = libxl__json_object_get_string(o);
        rc = libxl_gfx_passthru_kind_from_string(enum_str, p);
        if (rc)
            goto out;
    }
    out:
    return rc;
}

int libxl_gfx_passthru_kind_from_json(libxl_ctx *ctx, libxl_gfx_passthru_kind *p, const char *s)
{
    return libxl__object_from_json(ctx, "libxl_gfx_passthru_kind", (libxl__json_parse_callback)&libxl__gfx_passthru_kind_parse_json, p, s);
}

int libxl__timer_mode_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_timer_mode *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const char *enum_str;
        if (!libxl__json_object_is_string(o)) {
            rc = -1;
            goto out;
        }
        enum_str = libxl__json_object_get_string(o);
        rc = libxl_timer_mode_from_string(enum_str, p);
        if (rc)
            goto out;
    }
    out:
    return rc;
}

int libxl_timer_mode_from_json(libxl_ctx *ctx, libxl_timer_mode *p, const char *s)
{
    return libxl__object_from_json(ctx, "libxl_timer_mode", (libxl__json_parse_callback)&libxl__timer_mode_parse_json, p, s);
}

int libxl__bios_type_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_bios_type *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const char *enum_str;
        if (!libxl__json_object_is_string(o)) {
            rc = -1;
            goto out;
        }
        enum_str = libxl__json_object_get_string(o);
        rc = libxl_bios_type_from_string(enum_str, p);
        if (rc)
            goto out;
    }
    out:
    return rc;
}

int libxl_bios_type_from_json(libxl_ctx *ctx, libxl_bios_type *p, const char *s)
{
    return libxl__object_from_json(ctx, "libxl_bios_type", (libxl__json_parse_callback)&libxl__bios_type_parse_json, p, s);
}

int libxl__scheduler_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_scheduler *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const char *enum_str;
        if (!libxl__json_object_is_string(o)) {
            rc = -1;
            goto out;
        }
        enum_str = libxl__json_object_get_string(o);
        rc = libxl_scheduler_from_string(enum_str, p);
        if (rc)
            goto out;
    }
    out:
    return rc;
}

int libxl_scheduler_from_json(libxl_ctx *ctx, libxl_scheduler *p, const char *s)
{
    return libxl__object_from_json(ctx, "libxl_scheduler", (libxl__json_parse_callback)&libxl__scheduler_parse_json, p, s);
}

int libxl__shutdown_reason_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_shutdown_reason *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const char *enum_str;
        if (!libxl__json_object_is_string(o)) {
            rc = -1;
            goto out;
        }
        enum_str = libxl__json_object_get_string(o);
        rc = libxl_shutdown_reason_from_string(enum_str, p);
        if (rc)
            goto out;
    }
    out:
    return rc;
}

int libxl_shutdown_reason_from_json(libxl_ctx *ctx, libxl_shutdown_reason *p, const char *s)
{
    return libxl__object_from_json(ctx, "libxl_shutdown_reason", (libxl__json_parse_callback)&libxl__shutdown_reason_parse_json, p, s);
}

int libxl__vga_interface_type_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_vga_interface_type *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const char *enum_str;
        if (!libxl__json_object_is_string(o)) {
            rc = -1;
            goto out;
        }
        enum_str = libxl__json_object_get_string(o);
        rc = libxl_vga_interface_type_from_string(enum_str, p);
        if (rc)
            goto out;
    }
    out:
    return rc;
}

int libxl_vga_interface_type_from_json(libxl_ctx *ctx, libxl_vga_interface_type *p, const char *s)
{
    return libxl__object_from_json(ctx, "libxl_vga_interface_type", (libxl__json_parse_callback)&libxl__vga_interface_type_parse_json, p, s);
}

int libxl__vendor_device_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_vendor_device *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const char *enum_str;
        if (!libxl__json_object_is_string(o)) {
            rc = -1;
            goto out;
        }
        enum_str = libxl__json_object_get_string(o);
        rc = libxl_vendor_device_from_string(enum_str, p);
        if (rc)
            goto out;
    }
    out:
    return rc;
}

int libxl_vendor_device_from_json(libxl_ctx *ctx, libxl_vendor_device *p, const char *s)
{
    return libxl__object_from_json(ctx, "libxl_vendor_device", (libxl__json_parse_callback)&libxl__vendor_device_parse_json, p, s);
}

int libxl__viridian_enlightenment_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_viridian_enlightenment *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const char *enum_str;
        if (!libxl__json_object_is_string(o)) {
            rc = -1;
            goto out;
        }
        enum_str = libxl__json_object_get_string(o);
        rc = libxl_viridian_enlightenment_from_string(enum_str, p);
        if (rc)
            goto out;
    }
    out:
    return rc;
}

int libxl_viridian_enlightenment_from_json(libxl_ctx *ctx, libxl_viridian_enlightenment *p, const char *s)
{
    return libxl__object_from_json(ctx, "libxl_viridian_enlightenment", (libxl__json_parse_callback)&libxl__viridian_enlightenment_parse_json, p, s);
}

int libxl__hdtype_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_hdtype *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const char *enum_str;
        if (!libxl__json_object_is_string(o)) {
            rc = -1;
            goto out;
        }
        enum_str = libxl__json_object_get_string(o);
        rc = libxl_hdtype_from_string(enum_str, p);
        if (rc)
            goto out;
    }
    out:
    return rc;
}

int libxl_hdtype_from_json(libxl_ctx *ctx, libxl_hdtype *p, const char *s)
{
    return libxl__object_from_json(ctx, "libxl_hdtype", (libxl__json_parse_callback)&libxl__hdtype_parse_json, p, s);
}

int libxl__checkpointed_stream_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_checkpointed_stream *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const char *enum_str;
        if (!libxl__json_object_is_string(o)) {
            rc = -1;
            goto out;
        }
        enum_str = libxl__json_object_get_string(o);
        rc = libxl_checkpointed_stream_from_string(enum_str, p);
        if (rc)
            goto out;
    }
    out:
    return rc;
}

int libxl_checkpointed_stream_from_json(libxl_ctx *ctx, libxl_checkpointed_stream *p, const char *s)
{
    return libxl__object_from_json(ctx, "libxl_checkpointed_stream", (libxl__json_parse_callback)&libxl__checkpointed_stream_parse_json, p, s);
}

int libxl__vuart_type_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_vuart_type *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const char *enum_str;
        if (!libxl__json_object_is_string(o)) {
            rc = -1;
            goto out;
        }
        enum_str = libxl__json_object_get_string(o);
        rc = libxl_vuart_type_from_string(enum_str, p);
        if (rc)
            goto out;
    }
    out:
    return rc;
}

int libxl_vuart_type_from_json(libxl_ctx *ctx, libxl_vuart_type *p, const char *s)
{
    return libxl__object_from_json(ctx, "libxl_vuart_type", (libxl__json_parse_callback)&libxl__vuart_type_parse_json, p, s);
}

int libxl__ioport_range_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_ioport_range *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const libxl__json_object *saved_first = x;
        x = libxl__json_map_get("first", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->first);
            if (rc)
                goto out;
        }
        x = saved_first;
    }
    {
        const libxl__json_object *saved_number = x;
        x = libxl__json_map_get("number", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->number);
            if (rc)
                goto out;
        }
        x = saved_number;
    }
    out:
    return rc;
}

int libxl_ioport_range_from_json(libxl_ctx *ctx, libxl_ioport_range *p, const char *s)
{
    libxl_ioport_range_init(p);
    return libxl__object_from_json(ctx, "libxl_ioport_range", (libxl__json_parse_callback)&libxl__ioport_range_parse_json, p, s);
}

int libxl__iomem_range_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_iomem_range *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const libxl__json_object *saved_start = x;
        x = libxl__json_map_get("start", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint64_parse_json(gc, x, &p->start);
            if (rc)
                goto out;
        }
        x = saved_start;
    }
    {
        const libxl__json_object *saved_number = x;
        x = libxl__json_map_get("number", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint64_parse_json(gc, x, &p->number);
            if (rc)
                goto out;
        }
        x = saved_number;
    }
    {
        const libxl__json_object *saved_gfn = x;
        x = libxl__json_map_get("gfn", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint64_parse_json(gc, x, &p->gfn);
            if (rc)
                goto out;
        }
        x = saved_gfn;
    }
    out:
    return rc;
}

int libxl_iomem_range_from_json(libxl_ctx *ctx, libxl_iomem_range *p, const char *s)
{
    libxl_iomem_range_init(p);
    return libxl__object_from_json(ctx, "libxl_iomem_range", (libxl__json_parse_callback)&libxl__iomem_range_parse_json, p, s);
}

int libxl__vga_interface_info_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_vga_interface_info *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const libxl__json_object *saved_kind = x;
        x = libxl__json_map_get("kind", o, JSON_STRING);
        if (x) {
            {
                const char *enum_str;
                if (!libxl__json_object_is_string(x)) {
                    rc = -1;
                    goto out;
                }
                enum_str = libxl__json_object_get_string(x);
                rc = libxl_vga_interface_type_from_string(enum_str, &p->kind);
                if (rc)
                    goto out;
            }
        }
        x = saved_kind;
    }
    out:
    return rc;
}

int libxl_vga_interface_info_from_json(libxl_ctx *ctx, libxl_vga_interface_info *p, const char *s)
{
    libxl_vga_interface_info_init(p);
    return libxl__object_from_json(ctx, "libxl_vga_interface_info", (libxl__json_parse_callback)&libxl__vga_interface_info_parse_json, p, s);
}

int libxl__vnc_info_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_vnc_info *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const libxl__json_object *saved_enable = x;
        x = libxl__json_map_get("enable", o, JSON_STRING);
        if (x) {
            rc = libxl__defbool_parse_json(gc, x, &p->enable);
            if (rc)
                goto out;
        }
        x = saved_enable;
    }
    {
        const libxl__json_object *saved_listen = x;
        x = libxl__json_map_get("listen", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->listen);
            if (rc)
                goto out;
        }
        x = saved_listen;
    }
    {
        const libxl__json_object *saved_passwd = x;
        x = libxl__json_map_get("passwd", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->passwd);
            if (rc)
                goto out;
        }
        x = saved_passwd;
    }
    {
        const libxl__json_object *saved_display = x;
        x = libxl__json_map_get("display", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->display);
            if (rc)
                goto out;
        }
        x = saved_display;
    }
    {
        const libxl__json_object *saved_findunused = x;
        x = libxl__json_map_get("findunused", o, JSON_STRING);
        if (x) {
            rc = libxl__defbool_parse_json(gc, x, &p->findunused);
            if (rc)
                goto out;
        }
        x = saved_findunused;
    }
    out:
    return rc;
}

int libxl_vnc_info_from_json(libxl_ctx *ctx, libxl_vnc_info *p, const char *s)
{
    libxl_vnc_info_init(p);
    return libxl__object_from_json(ctx, "libxl_vnc_info", (libxl__json_parse_callback)&libxl__vnc_info_parse_json, p, s);
}

int libxl__spice_info_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_spice_info *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const libxl__json_object *saved_enable = x;
        x = libxl__json_map_get("enable", o, JSON_STRING);
        if (x) {
            rc = libxl__defbool_parse_json(gc, x, &p->enable);
            if (rc)
                goto out;
        }
        x = saved_enable;
    }
    {
        const libxl__json_object *saved_port = x;
        x = libxl__json_map_get("port", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->port);
            if (rc)
                goto out;
        }
        x = saved_port;
    }
    {
        const libxl__json_object *saved_tls_port = x;
        x = libxl__json_map_get("tls_port", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->tls_port);
            if (rc)
                goto out;
        }
        x = saved_tls_port;
    }
    {
        const libxl__json_object *saved_host = x;
        x = libxl__json_map_get("host", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->host);
            if (rc)
                goto out;
        }
        x = saved_host;
    }
    {
        const libxl__json_object *saved_disable_ticketing = x;
        x = libxl__json_map_get("disable_ticketing", o, JSON_STRING);
        if (x) {
            rc = libxl__defbool_parse_json(gc, x, &p->disable_ticketing);
            if (rc)
                goto out;
        }
        x = saved_disable_ticketing;
    }
    {
        const libxl__json_object *saved_passwd = x;
        x = libxl__json_map_get("passwd", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->passwd);
            if (rc)
                goto out;
        }
        x = saved_passwd;
    }
    {
        const libxl__json_object *saved_agent_mouse = x;
        x = libxl__json_map_get("agent_mouse", o, JSON_STRING);
        if (x) {
            rc = libxl__defbool_parse_json(gc, x, &p->agent_mouse);
            if (rc)
                goto out;
        }
        x = saved_agent_mouse;
    }
    {
        const libxl__json_object *saved_vdagent = x;
        x = libxl__json_map_get("vdagent", o, JSON_STRING);
        if (x) {
            rc = libxl__defbool_parse_json(gc, x, &p->vdagent);
            if (rc)
                goto out;
        }
        x = saved_vdagent;
    }
    {
        const libxl__json_object *saved_clipboard_sharing = x;
        x = libxl__json_map_get("clipboard_sharing", o, JSON_STRING);
        if (x) {
            rc = libxl__defbool_parse_json(gc, x, &p->clipboard_sharing);
            if (rc)
                goto out;
        }
        x = saved_clipboard_sharing;
    }
    {
        const libxl__json_object *saved_usbredirection = x;
        x = libxl__json_map_get("usbredirection", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->usbredirection);
            if (rc)
                goto out;
        }
        x = saved_usbredirection;
    }
    {
        const libxl__json_object *saved_image_compression = x;
        x = libxl__json_map_get("image_compression", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->image_compression);
            if (rc)
                goto out;
        }
        x = saved_image_compression;
    }
    {
        const libxl__json_object *saved_streaming_video = x;
        x = libxl__json_map_get("streaming_video", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->streaming_video);
            if (rc)
                goto out;
        }
        x = saved_streaming_video;
    }
    out:
    return rc;
}

int libxl_spice_info_from_json(libxl_ctx *ctx, libxl_spice_info *p, const char *s)
{
    libxl_spice_info_init(p);
    return libxl__object_from_json(ctx, "libxl_spice_info", (libxl__json_parse_callback)&libxl__spice_info_parse_json, p, s);
}

int libxl__sdl_info_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_sdl_info *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const libxl__json_object *saved_enable = x;
        x = libxl__json_map_get("enable", o, JSON_STRING);
        if (x) {
            rc = libxl__defbool_parse_json(gc, x, &p->enable);
            if (rc)
                goto out;
        }
        x = saved_enable;
    }
    {
        const libxl__json_object *saved_opengl = x;
        x = libxl__json_map_get("opengl", o, JSON_STRING);
        if (x) {
            rc = libxl__defbool_parse_json(gc, x, &p->opengl);
            if (rc)
                goto out;
        }
        x = saved_opengl;
    }
    {
        const libxl__json_object *saved_display = x;
        x = libxl__json_map_get("display", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->display);
            if (rc)
                goto out;
        }
        x = saved_display;
    }
    {
        const libxl__json_object *saved_xauthority = x;
        x = libxl__json_map_get("xauthority", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->xauthority);
            if (rc)
                goto out;
        }
        x = saved_xauthority;
    }
    out:
    return rc;
}

int libxl_sdl_info_from_json(libxl_ctx *ctx, libxl_sdl_info *p, const char *s)
{
    libxl_sdl_info_init(p);
    return libxl__object_from_json(ctx, "libxl_sdl_info", (libxl__json_parse_callback)&libxl__sdl_info_parse_json, p, s);
}

int libxl__dominfo_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_dominfo *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const libxl__json_object *saved_uuid = x;
        x = libxl__json_map_get("uuid", o, JSON_STRING);
        if (x) {
            rc = libxl__uuid_parse_json(gc, x, &p->uuid);
            if (rc)
                goto out;
        }
        x = saved_uuid;
    }
    {
        const libxl__json_object *saved_domid = x;
        x = libxl__json_map_get("domid", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->domid);
            if (rc)
                goto out;
        }
        x = saved_domid;
    }
    {
        const libxl__json_object *saved_ssidref = x;
        x = libxl__json_map_get("ssidref", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->ssidref);
            if (rc)
                goto out;
        }
        x = saved_ssidref;
    }
    {
        const libxl__json_object *saved_ssid_label = x;
        x = libxl__json_map_get("ssid_label", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->ssid_label);
            if (rc)
                goto out;
        }
        x = saved_ssid_label;
    }
    {
        const libxl__json_object *saved_running = x;
        x = libxl__json_map_get("running", o, JSON_BOOL);
        if (x) {
            rc = libxl__bool_parse_json(gc, x, &p->running);
            if (rc)
                goto out;
        }
        x = saved_running;
    }
    {
        const libxl__json_object *saved_blocked = x;
        x = libxl__json_map_get("blocked", o, JSON_BOOL);
        if (x) {
            rc = libxl__bool_parse_json(gc, x, &p->blocked);
            if (rc)
                goto out;
        }
        x = saved_blocked;
    }
    {
        const libxl__json_object *saved_paused = x;
        x = libxl__json_map_get("paused", o, JSON_BOOL);
        if (x) {
            rc = libxl__bool_parse_json(gc, x, &p->paused);
            if (rc)
                goto out;
        }
        x = saved_paused;
    }
    {
        const libxl__json_object *saved_shutdown = x;
        x = libxl__json_map_get("shutdown", o, JSON_BOOL);
        if (x) {
            rc = libxl__bool_parse_json(gc, x, &p->shutdown);
            if (rc)
                goto out;
        }
        x = saved_shutdown;
    }
    {
        const libxl__json_object *saved_dying = x;
        x = libxl__json_map_get("dying", o, JSON_BOOL);
        if (x) {
            rc = libxl__bool_parse_json(gc, x, &p->dying);
            if (rc)
                goto out;
        }
        x = saved_dying;
    }
    {
        const libxl__json_object *saved_never_stop = x;
        x = libxl__json_map_get("never_stop", o, JSON_BOOL);
        if (x) {
            rc = libxl__bool_parse_json(gc, x, &p->never_stop);
            if (rc)
                goto out;
        }
        x = saved_never_stop;
    }
    {
        const libxl__json_object *saved_shutdown_reason = x;
        x = libxl__json_map_get("shutdown_reason", o, JSON_STRING);
        if (x) {
            {
                const char *enum_str;
                if (!libxl__json_object_is_string(x)) {
                    rc = -1;
                    goto out;
                }
                enum_str = libxl__json_object_get_string(x);
                rc = libxl_shutdown_reason_from_string(enum_str, &p->shutdown_reason);
                if (rc)
                    goto out;
            }
        }
        x = saved_shutdown_reason;
    }
    {
        const libxl__json_object *saved_outstanding_memkb = x;
        x = libxl__json_map_get("outstanding_memkb", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint64_parse_json(gc, x, &p->outstanding_memkb);
            if (rc)
                goto out;
        }
        x = saved_outstanding_memkb;
    }
    {
        const libxl__json_object *saved_current_memkb = x;
        x = libxl__json_map_get("current_memkb", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint64_parse_json(gc, x, &p->current_memkb);
            if (rc)
                goto out;
        }
        x = saved_current_memkb;
    }
    {
        const libxl__json_object *saved_shared_memkb = x;
        x = libxl__json_map_get("shared_memkb", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint64_parse_json(gc, x, &p->shared_memkb);
            if (rc)
                goto out;
        }
        x = saved_shared_memkb;
    }
    {
        const libxl__json_object *saved_paged_memkb = x;
        x = libxl__json_map_get("paged_memkb", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint64_parse_json(gc, x, &p->paged_memkb);
            if (rc)
                goto out;
        }
        x = saved_paged_memkb;
    }
    {
        const libxl__json_object *saved_max_memkb = x;
        x = libxl__json_map_get("max_memkb", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint64_parse_json(gc, x, &p->max_memkb);
            if (rc)
                goto out;
        }
        x = saved_max_memkb;
    }
    {
        const libxl__json_object *saved_cpu_time = x;
        x = libxl__json_map_get("cpu_time", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint64_parse_json(gc, x, &p->cpu_time);
            if (rc)
                goto out;
        }
        x = saved_cpu_time;
    }
    {
        const libxl__json_object *saved_vcpu_max_id = x;
        x = libxl__json_map_get("vcpu_max_id", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->vcpu_max_id);
            if (rc)
                goto out;
        }
        x = saved_vcpu_max_id;
    }
    {
        const libxl__json_object *saved_vcpu_online = x;
        x = libxl__json_map_get("vcpu_online", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->vcpu_online);
            if (rc)
                goto out;
        }
        x = saved_vcpu_online;
    }
    {
        const libxl__json_object *saved_cpupool = x;
        x = libxl__json_map_get("cpupool", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->cpupool);
            if (rc)
                goto out;
        }
        x = saved_cpupool;
    }
    {
        const libxl__json_object *saved_domain_type = x;
        x = libxl__json_map_get("domain_type", o, JSON_STRING);
        if (x) {
            {
                const char *enum_str;
                if (!libxl__json_object_is_string(x)) {
                    rc = -1;
                    goto out;
                }
                enum_str = libxl__json_object_get_string(x);
                rc = libxl_domain_type_from_string(enum_str, &p->domain_type);
                if (rc)
                    goto out;
            }
        }
        x = saved_domain_type;
    }
    out:
    return rc;
}

int libxl_dominfo_from_json(libxl_ctx *ctx, libxl_dominfo *p, const char *s)
{
    libxl_dominfo_init(p);
    return libxl__object_from_json(ctx, "libxl_dominfo", (libxl__json_parse_callback)&libxl__dominfo_parse_json, p, s);
}

int libxl__cpupoolinfo_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_cpupoolinfo *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const libxl__json_object *saved_poolid = x;
        x = libxl__json_map_get("poolid", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->poolid);
            if (rc)
                goto out;
        }
        x = saved_poolid;
    }
    {
        const libxl__json_object *saved_pool_name = x;
        x = libxl__json_map_get("pool_name", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->pool_name);
            if (rc)
                goto out;
        }
        x = saved_pool_name;
    }
    {
        const libxl__json_object *saved_sched = x;
        x = libxl__json_map_get("sched", o, JSON_STRING);
        if (x) {
            {
                const char *enum_str;
                if (!libxl__json_object_is_string(x)) {
                    rc = -1;
                    goto out;
                }
                enum_str = libxl__json_object_get_string(x);
                rc = libxl_scheduler_from_string(enum_str, &p->sched);
                if (rc)
                    goto out;
            }
        }
        x = saved_sched;
    }
    {
        const libxl__json_object *saved_n_dom = x;
        x = libxl__json_map_get("n_dom", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->n_dom);
            if (rc)
                goto out;
        }
        x = saved_n_dom;
    }
    {
        const libxl__json_object *saved_cpumap = x;
        x = libxl__json_map_get("cpumap", o, JSON_ARRAY);
        if (x) {
            rc = libxl__bitmap_parse_json(gc, x, &p->cpumap);
            if (rc)
                goto out;
        }
        x = saved_cpumap;
    }
    out:
    return rc;
}

int libxl_cpupoolinfo_from_json(libxl_ctx *ctx, libxl_cpupoolinfo *p, const char *s)
{
    libxl_cpupoolinfo_init(p);
    return libxl__object_from_json(ctx, "libxl_cpupoolinfo", (libxl__json_parse_callback)&libxl__cpupoolinfo_parse_json, p, s);
}

int libxl__channelinfo_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_channelinfo *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const libxl__json_object *saved_backend = x;
        x = libxl__json_map_get("backend", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->backend);
            if (rc)
                goto out;
        }
        x = saved_backend;
    }
    {
        const libxl__json_object *saved_backend_id = x;
        x = libxl__json_map_get("backend_id", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->backend_id);
            if (rc)
                goto out;
        }
        x = saved_backend_id;
    }
    {
        const libxl__json_object *saved_frontend = x;
        x = libxl__json_map_get("frontend", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->frontend);
            if (rc)
                goto out;
        }
        x = saved_frontend;
    }
    {
        const libxl__json_object *saved_frontend_id = x;
        x = libxl__json_map_get("frontend_id", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->frontend_id);
            if (rc)
                goto out;
        }
        x = saved_frontend_id;
    }
    {
        const libxl__json_object *saved_devid = x;
        x = libxl__json_map_get("devid", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->devid);
            if (rc)
                goto out;
        }
        x = saved_devid;
    }
    {
        const libxl__json_object *saved_state = x;
        x = libxl__json_map_get("state", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->state);
            if (rc)
                goto out;
        }
        x = saved_state;
    }
    {
        const libxl__json_object *saved_evtch = x;
        x = libxl__json_map_get("evtch", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->evtch);
            if (rc)
                goto out;
        }
        x = saved_evtch;
    }
    {
        const libxl__json_object *saved_rref = x;
        x = libxl__json_map_get("rref", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->rref);
            if (rc)
                goto out;
        }
        x = saved_rref;
    }
    {
        const libxl__json_object *saved_u = x;
        x = libxl__json_map_get("connection.unknown", o, JSON_MAP);
        if (x) {
            libxl_channelinfo_init_connection(p, LIBXL_CHANNEL_CONNECTION_UNKNOWN);
        }
        x = libxl__json_map_get("connection.pty", o, JSON_MAP);
        if (x) {
            libxl_channelinfo_init_connection(p, LIBXL_CHANNEL_CONNECTION_PTY);
            {
                const libxl__json_object *saved_path = x;
                x = libxl__json_map_get("path", x, JSON_STRING | JSON_NULL);
                if (x) {
                    rc = libxl__string_parse_json(gc, x, &p->u.pty.path);
                    if (rc)
                        goto out;
                }
                x = saved_path;
            }
        }
        x = libxl__json_map_get("connection.socket", o, JSON_MAP);
        if (x) {
            libxl_channelinfo_init_connection(p, LIBXL_CHANNEL_CONNECTION_SOCKET);
        }
        x = saved_u;
    }
    out:
    return rc;
}

int libxl_channelinfo_from_json(libxl_ctx *ctx, libxl_channelinfo *p, const char *s)
{
    libxl_channelinfo_init(p);
    return libxl__object_from_json(ctx, "libxl_channelinfo", (libxl__json_parse_callback)&libxl__channelinfo_parse_json, p, s);
}

int libxl__vminfo_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_vminfo *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const libxl__json_object *saved_uuid = x;
        x = libxl__json_map_get("uuid", o, JSON_STRING);
        if (x) {
            rc = libxl__uuid_parse_json(gc, x, &p->uuid);
            if (rc)
                goto out;
        }
        x = saved_uuid;
    }
    {
        const libxl__json_object *saved_domid = x;
        x = libxl__json_map_get("domid", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->domid);
            if (rc)
                goto out;
        }
        x = saved_domid;
    }
    out:
    return rc;
}

int libxl_vminfo_from_json(libxl_ctx *ctx, libxl_vminfo *p, const char *s)
{
    libxl_vminfo_init(p);
    return libxl__object_from_json(ctx, "libxl_vminfo", (libxl__json_parse_callback)&libxl__vminfo_parse_json, p, s);
}

int libxl__version_info_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_version_info *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const libxl__json_object *saved_xen_version_major = x;
        x = libxl__json_map_get("xen_version_major", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->xen_version_major);
            if (rc)
                goto out;
        }
        x = saved_xen_version_major;
    }
    {
        const libxl__json_object *saved_xen_version_minor = x;
        x = libxl__json_map_get("xen_version_minor", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->xen_version_minor);
            if (rc)
                goto out;
        }
        x = saved_xen_version_minor;
    }
    {
        const libxl__json_object *saved_xen_version_extra = x;
        x = libxl__json_map_get("xen_version_extra", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->xen_version_extra);
            if (rc)
                goto out;
        }
        x = saved_xen_version_extra;
    }
    {
        const libxl__json_object *saved_compiler = x;
        x = libxl__json_map_get("compiler", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->compiler);
            if (rc)
                goto out;
        }
        x = saved_compiler;
    }
    {
        const libxl__json_object *saved_compile_by = x;
        x = libxl__json_map_get("compile_by", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->compile_by);
            if (rc)
                goto out;
        }
        x = saved_compile_by;
    }
    {
        const libxl__json_object *saved_compile_domain = x;
        x = libxl__json_map_get("compile_domain", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->compile_domain);
            if (rc)
                goto out;
        }
        x = saved_compile_domain;
    }
    {
        const libxl__json_object *saved_compile_date = x;
        x = libxl__json_map_get("compile_date", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->compile_date);
            if (rc)
                goto out;
        }
        x = saved_compile_date;
    }
    {
        const libxl__json_object *saved_capabilities = x;
        x = libxl__json_map_get("capabilities", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->capabilities);
            if (rc)
                goto out;
        }
        x = saved_capabilities;
    }
    {
        const libxl__json_object *saved_changeset = x;
        x = libxl__json_map_get("changeset", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->changeset);
            if (rc)
                goto out;
        }
        x = saved_changeset;
    }
    {
        const libxl__json_object *saved_virt_start = x;
        x = libxl__json_map_get("virt_start", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint64_parse_json(gc, x, &p->virt_start);
            if (rc)
                goto out;
        }
        x = saved_virt_start;
    }
    {
        const libxl__json_object *saved_pagesize = x;
        x = libxl__json_map_get("pagesize", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->pagesize);
            if (rc)
                goto out;
        }
        x = saved_pagesize;
    }
    {
        const libxl__json_object *saved_commandline = x;
        x = libxl__json_map_get("commandline", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->commandline);
            if (rc)
                goto out;
        }
        x = saved_commandline;
    }
    {
        const libxl__json_object *saved_build_id = x;
        x = libxl__json_map_get("build_id", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->build_id);
            if (rc)
                goto out;
        }
        x = saved_build_id;
    }
    out:
    return rc;
}

int libxl_version_info_from_json(libxl_ctx *ctx, libxl_version_info *p, const char *s)
{
    libxl_version_info_init(p);
    return libxl__object_from_json(ctx, "libxl_version_info", (libxl__json_parse_callback)&libxl__version_info_parse_json, p, s);
}

int libxl__domain_create_info_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_domain_create_info *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const libxl__json_object *saved_type = x;
        x = libxl__json_map_get("type", o, JSON_STRING);
        if (x) {
            {
                const char *enum_str;
                if (!libxl__json_object_is_string(x)) {
                    rc = -1;
                    goto out;
                }
                enum_str = libxl__json_object_get_string(x);
                rc = libxl_domain_type_from_string(enum_str, &p->type);
                if (rc)
                    goto out;
            }
        }
        x = saved_type;
    }
    {
        const libxl__json_object *saved_hap = x;
        x = libxl__json_map_get("hap", o, JSON_STRING);
        if (x) {
            rc = libxl__defbool_parse_json(gc, x, &p->hap);
            if (rc)
                goto out;
        }
        x = saved_hap;
    }
    {
        const libxl__json_object *saved_oos = x;
        x = libxl__json_map_get("oos", o, JSON_STRING);
        if (x) {
            rc = libxl__defbool_parse_json(gc, x, &p->oos);
            if (rc)
                goto out;
        }
        x = saved_oos;
    }
    {
        const libxl__json_object *saved_ssidref = x;
        x = libxl__json_map_get("ssidref", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->ssidref);
            if (rc)
                goto out;
        }
        x = saved_ssidref;
    }
    {
        const libxl__json_object *saved_ssid_label = x;
        x = libxl__json_map_get("ssid_label", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->ssid_label);
            if (rc)
                goto out;
        }
        x = saved_ssid_label;
    }
    {
        const libxl__json_object *saved_name = x;
        x = libxl__json_map_get("name", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->name);
            if (rc)
                goto out;
        }
        x = saved_name;
    }
    {
        const libxl__json_object *saved_uuid = x;
        x = libxl__json_map_get("uuid", o, JSON_STRING);
        if (x) {
            rc = libxl__uuid_parse_json(gc, x, &p->uuid);
            if (rc)
                goto out;
        }
        x = saved_uuid;
    }
    {
        const libxl__json_object *saved_xsdata = x;
        x = libxl__json_map_get("xsdata", o, JSON_MAP);
        if (x) {
            rc = libxl__key_value_list_parse_json(gc, x, &p->xsdata);
            if (rc)
                goto out;
        }
        x = saved_xsdata;
    }
    {
        const libxl__json_object *saved_platformdata = x;
        x = libxl__json_map_get("platformdata", o, JSON_MAP);
        if (x) {
            rc = libxl__key_value_list_parse_json(gc, x, &p->platformdata);
            if (rc)
                goto out;
        }
        x = saved_platformdata;
    }
    {
        const libxl__json_object *saved_poolid = x;
        x = libxl__json_map_get("poolid", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->poolid);
            if (rc)
                goto out;
        }
        x = saved_poolid;
    }
    {
        const libxl__json_object *saved_pool_name = x;
        x = libxl__json_map_get("pool_name", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->pool_name);
            if (rc)
                goto out;
        }
        x = saved_pool_name;
    }
    {
        const libxl__json_object *saved_run_hotplug_scripts = x;
        x = libxl__json_map_get("run_hotplug_scripts", o, JSON_STRING);
        if (x) {
            rc = libxl__defbool_parse_json(gc, x, &p->run_hotplug_scripts);
            if (rc)
                goto out;
        }
        x = saved_run_hotplug_scripts;
    }
    {
        const libxl__json_object *saved_driver_domain = x;
        x = libxl__json_map_get("driver_domain", o, JSON_STRING);
        if (x) {
            rc = libxl__defbool_parse_json(gc, x, &p->driver_domain);
            if (rc)
                goto out;
        }
        x = saved_driver_domain;
    }
    out:
    return rc;
}

int libxl_domain_create_info_from_json(libxl_ctx *ctx, libxl_domain_create_info *p, const char *s)
{
    libxl_domain_create_info_init(p);
    return libxl__object_from_json(ctx, "libxl_domain_create_info", (libxl__json_parse_callback)&libxl__domain_create_info_parse_json, p, s);
}

int libxl__domain_restore_params_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_domain_restore_params *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const libxl__json_object *saved_checkpointed_stream = x;
        x = libxl__json_map_get("checkpointed_stream", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->checkpointed_stream);
            if (rc)
                goto out;
        }
        x = saved_checkpointed_stream;
    }
    {
        const libxl__json_object *saved_stream_version = x;
        x = libxl__json_map_get("stream_version", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->stream_version);
            if (rc)
                goto out;
        }
        x = saved_stream_version;
    }
    {
        const libxl__json_object *saved_colo_proxy_script = x;
        x = libxl__json_map_get("colo_proxy_script", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->colo_proxy_script);
            if (rc)
                goto out;
        }
        x = saved_colo_proxy_script;
    }
    {
        const libxl__json_object *saved_userspace_colo_proxy = x;
        x = libxl__json_map_get("userspace_colo_proxy", o, JSON_STRING);
        if (x) {
            rc = libxl__defbool_parse_json(gc, x, &p->userspace_colo_proxy);
            if (rc)
                goto out;
        }
        x = saved_userspace_colo_proxy;
    }
    out:
    return rc;
}

int libxl_domain_restore_params_from_json(libxl_ctx *ctx, libxl_domain_restore_params *p, const char *s)
{
    libxl_domain_restore_params_init(p);
    return libxl__object_from_json(ctx, "libxl_domain_restore_params", (libxl__json_parse_callback)&libxl__domain_restore_params_parse_json, p, s);
}

int libxl__sched_params_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_sched_params *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const libxl__json_object *saved_vcpuid = x;
        x = libxl__json_map_get("vcpuid", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->vcpuid);
            if (rc)
                goto out;
        }
        x = saved_vcpuid;
    }
    {
        const libxl__json_object *saved_weight = x;
        x = libxl__json_map_get("weight", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->weight);
            if (rc)
                goto out;
        }
        x = saved_weight;
    }
    {
        const libxl__json_object *saved_cap = x;
        x = libxl__json_map_get("cap", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->cap);
            if (rc)
                goto out;
        }
        x = saved_cap;
    }
    {
        const libxl__json_object *saved_period = x;
        x = libxl__json_map_get("period", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->period);
            if (rc)
                goto out;
        }
        x = saved_period;
    }
    {
        const libxl__json_object *saved_extratime = x;
        x = libxl__json_map_get("extratime", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->extratime);
            if (rc)
                goto out;
        }
        x = saved_extratime;
    }
    {
        const libxl__json_object *saved_budget = x;
        x = libxl__json_map_get("budget", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->budget);
            if (rc)
                goto out;
        }
        x = saved_budget;
    }
    out:
    return rc;
}

int libxl_sched_params_from_json(libxl_ctx *ctx, libxl_sched_params *p, const char *s)
{
    libxl_sched_params_init(p);
    return libxl__object_from_json(ctx, "libxl_sched_params", (libxl__json_parse_callback)&libxl__sched_params_parse_json, p, s);
}

int libxl__vcpu_sched_params_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_vcpu_sched_params *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const libxl__json_object *saved_sched = x;
        x = libxl__json_map_get("sched", o, JSON_STRING);
        if (x) {
            {
                const char *enum_str;
                if (!libxl__json_object_is_string(x)) {
                    rc = -1;
                    goto out;
                }
                enum_str = libxl__json_object_get_string(x);
                rc = libxl_scheduler_from_string(enum_str, &p->sched);
                if (rc)
                    goto out;
            }
        }
        x = saved_sched;
    }
    {
        const libxl__json_object *saved_vcpus = x;
        x = libxl__json_map_get("vcpus", o, JSON_ARRAY);
        if (x) {
            {
                libxl__json_object *t;
                int i;
                if (!libxl__json_object_is_array(x)) {
                    rc = -1;
                    goto out;
                }
                p->num_vcpus = x->u.array->count;
                p->vcpus = libxl__calloc(NOGC, p->num_vcpus, sizeof(*p->vcpus));
                if (!p->vcpus && p->num_vcpus != 0) {
                    rc = -1;
                    goto out;
                }
                for (i=0; (t=libxl__json_array_get(x,i)); i++) {
                        rc = libxl__sched_params_parse_json(gc, t, &p->vcpus[i]);
                        if (rc)
                            goto out;
                }
                if (i != p->num_vcpus) {
                    rc = -1;
                    goto out;
                }
            }
        }
        x = saved_vcpus;
    }
    out:
    return rc;
}

int libxl_vcpu_sched_params_from_json(libxl_ctx *ctx, libxl_vcpu_sched_params *p, const char *s)
{
    libxl_vcpu_sched_params_init(p);
    return libxl__object_from_json(ctx, "libxl_vcpu_sched_params", (libxl__json_parse_callback)&libxl__vcpu_sched_params_parse_json, p, s);
}

int libxl__domain_sched_params_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_domain_sched_params *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const libxl__json_object *saved_sched = x;
        x = libxl__json_map_get("sched", o, JSON_STRING);
        if (x) {
            {
                const char *enum_str;
                if (!libxl__json_object_is_string(x)) {
                    rc = -1;
                    goto out;
                }
                enum_str = libxl__json_object_get_string(x);
                rc = libxl_scheduler_from_string(enum_str, &p->sched);
                if (rc)
                    goto out;
            }
        }
        x = saved_sched;
    }
    {
        const libxl__json_object *saved_weight = x;
        x = libxl__json_map_get("weight", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->weight);
            if (rc)
                goto out;
        }
        x = saved_weight;
    }
    {
        const libxl__json_object *saved_cap = x;
        x = libxl__json_map_get("cap", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->cap);
            if (rc)
                goto out;
        }
        x = saved_cap;
    }
    {
        const libxl__json_object *saved_period = x;
        x = libxl__json_map_get("period", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->period);
            if (rc)
                goto out;
        }
        x = saved_period;
    }
    {
        const libxl__json_object *saved_budget = x;
        x = libxl__json_map_get("budget", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->budget);
            if (rc)
                goto out;
        }
        x = saved_budget;
    }
    {
        const libxl__json_object *saved_extratime = x;
        x = libxl__json_map_get("extratime", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->extratime);
            if (rc)
                goto out;
        }
        x = saved_extratime;
    }
    {
        const libxl__json_object *saved_slice = x;
        x = libxl__json_map_get("slice", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->slice);
            if (rc)
                goto out;
        }
        x = saved_slice;
    }
    {
        const libxl__json_object *saved_latency = x;
        x = libxl__json_map_get("latency", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->latency);
            if (rc)
                goto out;
        }
        x = saved_latency;
    }
    out:
    return rc;
}

int libxl_domain_sched_params_from_json(libxl_ctx *ctx, libxl_domain_sched_params *p, const char *s)
{
    libxl_domain_sched_params_init(p);
    return libxl__object_from_json(ctx, "libxl_domain_sched_params", (libxl__json_parse_callback)&libxl__domain_sched_params_parse_json, p, s);
}

int libxl__vnode_info_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_vnode_info *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const libxl__json_object *saved_memkb = x;
        x = libxl__json_map_get("memkb", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint64_parse_json(gc, x, &p->memkb);
            if (rc)
                goto out;
        }
        x = saved_memkb;
    }
    {
        const libxl__json_object *saved_distances = x;
        x = libxl__json_map_get("distances", o, JSON_ARRAY);
        if (x) {
            {
                libxl__json_object *t;
                int i;
                if (!libxl__json_object_is_array(x)) {
                    rc = -1;
                    goto out;
                }
                p->num_distances = x->u.array->count;
                p->distances = libxl__calloc(NOGC, p->num_distances, sizeof(*p->distances));
                if (!p->distances && p->num_distances != 0) {
                    rc = -1;
                    goto out;
                }
                for (i=0; (t=libxl__json_array_get(x,i)); i++) {
                        rc = libxl__uint32_parse_json(gc, t, &p->distances[i]);
                        if (rc)
                            goto out;
                }
                if (i != p->num_distances) {
                    rc = -1;
                    goto out;
                }
            }
        }
        x = saved_distances;
    }
    {
        const libxl__json_object *saved_pnode = x;
        x = libxl__json_map_get("pnode", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->pnode);
            if (rc)
                goto out;
        }
        x = saved_pnode;
    }
    {
        const libxl__json_object *saved_vcpus = x;
        x = libxl__json_map_get("vcpus", o, JSON_ARRAY);
        if (x) {
            rc = libxl__bitmap_parse_json(gc, x, &p->vcpus);
            if (rc)
                goto out;
        }
        x = saved_vcpus;
    }
    out:
    return rc;
}

int libxl_vnode_info_from_json(libxl_ctx *ctx, libxl_vnode_info *p, const char *s)
{
    libxl_vnode_info_init(p);
    return libxl__object_from_json(ctx, "libxl_vnode_info", (libxl__json_parse_callback)&libxl__vnode_info_parse_json, p, s);
}

int libxl__gic_version_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_gic_version *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const char *enum_str;
        if (!libxl__json_object_is_string(o)) {
            rc = -1;
            goto out;
        }
        enum_str = libxl__json_object_get_string(o);
        rc = libxl_gic_version_from_string(enum_str, p);
        if (rc)
            goto out;
    }
    out:
    return rc;
}

int libxl_gic_version_from_json(libxl_ctx *ctx, libxl_gic_version *p, const char *s)
{
    return libxl__object_from_json(ctx, "libxl_gic_version", (libxl__json_parse_callback)&libxl__gic_version_parse_json, p, s);
}

int libxl__rdm_reserve_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_rdm_reserve *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const libxl__json_object *saved_strategy = x;
        x = libxl__json_map_get("strategy", o, JSON_STRING);
        if (x) {
            {
                const char *enum_str;
                if (!libxl__json_object_is_string(x)) {
                    rc = -1;
                    goto out;
                }
                enum_str = libxl__json_object_get_string(x);
                rc = libxl_rdm_reserve_strategy_from_string(enum_str, &p->strategy);
                if (rc)
                    goto out;
            }
        }
        x = saved_strategy;
    }
    {
        const libxl__json_object *saved_policy = x;
        x = libxl__json_map_get("policy", o, JSON_STRING);
        if (x) {
            {
                const char *enum_str;
                if (!libxl__json_object_is_string(x)) {
                    rc = -1;
                    goto out;
                }
                enum_str = libxl__json_object_get_string(x);
                rc = libxl_rdm_reserve_policy_from_string(enum_str, &p->policy);
                if (rc)
                    goto out;
            }
        }
        x = saved_policy;
    }
    out:
    return rc;
}

int libxl_rdm_reserve_from_json(libxl_ctx *ctx, libxl_rdm_reserve *p, const char *s)
{
    libxl_rdm_reserve_init(p);
    return libxl__object_from_json(ctx, "libxl_rdm_reserve", (libxl__json_parse_callback)&libxl__rdm_reserve_parse_json, p, s);
}

int libxl__altp2m_mode_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_altp2m_mode *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const char *enum_str;
        if (!libxl__json_object_is_string(o)) {
            rc = -1;
            goto out;
        }
        enum_str = libxl__json_object_get_string(o);
        rc = libxl_altp2m_mode_from_string(enum_str, p);
        if (rc)
            goto out;
    }
    out:
    return rc;
}

int libxl_altp2m_mode_from_json(libxl_ctx *ctx, libxl_altp2m_mode *p, const char *s)
{
    return libxl__object_from_json(ctx, "libxl_altp2m_mode", (libxl__json_parse_callback)&libxl__altp2m_mode_parse_json, p, s);
}

int libxl__domain_build_info_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_domain_build_info *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const libxl__json_object *saved_max_vcpus = x;
        x = libxl__json_map_get("max_vcpus", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->max_vcpus);
            if (rc)
                goto out;
        }
        x = saved_max_vcpus;
    }
    {
        const libxl__json_object *saved_avail_vcpus = x;
        x = libxl__json_map_get("avail_vcpus", o, JSON_ARRAY);
        if (x) {
            rc = libxl__bitmap_parse_json(gc, x, &p->avail_vcpus);
            if (rc)
                goto out;
        }
        x = saved_avail_vcpus;
    }
    {
        const libxl__json_object *saved_cpumap = x;
        x = libxl__json_map_get("cpumap", o, JSON_ARRAY);
        if (x) {
            rc = libxl__bitmap_parse_json(gc, x, &p->cpumap);
            if (rc)
                goto out;
        }
        x = saved_cpumap;
    }
    {
        const libxl__json_object *saved_nodemap = x;
        x = libxl__json_map_get("nodemap", o, JSON_ARRAY);
        if (x) {
            rc = libxl__bitmap_parse_json(gc, x, &p->nodemap);
            if (rc)
                goto out;
        }
        x = saved_nodemap;
    }
    {
        const libxl__json_object *saved_vcpu_hard_affinity = x;
        x = libxl__json_map_get("vcpu_hard_affinity", o, JSON_ARRAY);
        if (x) {
            {
                libxl__json_object *t;
                int i;
                if (!libxl__json_object_is_array(x)) {
                    rc = -1;
                    goto out;
                }
                p->num_vcpu_hard_affinity = x->u.array->count;
                p->vcpu_hard_affinity = libxl__calloc(NOGC, p->num_vcpu_hard_affinity, sizeof(*p->vcpu_hard_affinity));
                if (!p->vcpu_hard_affinity && p->num_vcpu_hard_affinity != 0) {
                    rc = -1;
                    goto out;
                }
                for (i=0; (t=libxl__json_array_get(x,i)); i++) {
                        rc = libxl__bitmap_parse_json(gc, t, &p->vcpu_hard_affinity[i]);
                        if (rc)
                            goto out;
                }
                if (i != p->num_vcpu_hard_affinity) {
                    rc = -1;
                    goto out;
                }
            }
        }
        x = saved_vcpu_hard_affinity;
    }
    {
        const libxl__json_object *saved_vcpu_soft_affinity = x;
        x = libxl__json_map_get("vcpu_soft_affinity", o, JSON_ARRAY);
        if (x) {
            {
                libxl__json_object *t;
                int i;
                if (!libxl__json_object_is_array(x)) {
                    rc = -1;
                    goto out;
                }
                p->num_vcpu_soft_affinity = x->u.array->count;
                p->vcpu_soft_affinity = libxl__calloc(NOGC, p->num_vcpu_soft_affinity, sizeof(*p->vcpu_soft_affinity));
                if (!p->vcpu_soft_affinity && p->num_vcpu_soft_affinity != 0) {
                    rc = -1;
                    goto out;
                }
                for (i=0; (t=libxl__json_array_get(x,i)); i++) {
                        rc = libxl__bitmap_parse_json(gc, t, &p->vcpu_soft_affinity[i]);
                        if (rc)
                            goto out;
                }
                if (i != p->num_vcpu_soft_affinity) {
                    rc = -1;
                    goto out;
                }
            }
        }
        x = saved_vcpu_soft_affinity;
    }
    {
        const libxl__json_object *saved_numa_placement = x;
        x = libxl__json_map_get("numa_placement", o, JSON_STRING);
        if (x) {
            rc = libxl__defbool_parse_json(gc, x, &p->numa_placement);
            if (rc)
                goto out;
        }
        x = saved_numa_placement;
    }
    {
        const libxl__json_object *saved_tsc_mode = x;
        x = libxl__json_map_get("tsc_mode", o, JSON_STRING);
        if (x) {
            {
                const char *enum_str;
                if (!libxl__json_object_is_string(x)) {
                    rc = -1;
                    goto out;
                }
                enum_str = libxl__json_object_get_string(x);
                rc = libxl_tsc_mode_from_string(enum_str, &p->tsc_mode);
                if (rc)
                    goto out;
            }
        }
        x = saved_tsc_mode;
    }
    {
        const libxl__json_object *saved_max_memkb = x;
        x = libxl__json_map_get("max_memkb", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint64_parse_json(gc, x, &p->max_memkb);
            if (rc)
                goto out;
        }
        x = saved_max_memkb;
    }
    {
        const libxl__json_object *saved_target_memkb = x;
        x = libxl__json_map_get("target_memkb", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint64_parse_json(gc, x, &p->target_memkb);
            if (rc)
                goto out;
        }
        x = saved_target_memkb;
    }
    {
        const libxl__json_object *saved_video_memkb = x;
        x = libxl__json_map_get("video_memkb", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint64_parse_json(gc, x, &p->video_memkb);
            if (rc)
                goto out;
        }
        x = saved_video_memkb;
    }
    {
        const libxl__json_object *saved_shadow_memkb = x;
        x = libxl__json_map_get("shadow_memkb", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint64_parse_json(gc, x, &p->shadow_memkb);
            if (rc)
                goto out;
        }
        x = saved_shadow_memkb;
    }
    {
        const libxl__json_object *saved_rtc_timeoffset = x;
        x = libxl__json_map_get("rtc_timeoffset", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->rtc_timeoffset);
            if (rc)
                goto out;
        }
        x = saved_rtc_timeoffset;
    }
    {
        const libxl__json_object *saved_exec_ssidref = x;
        x = libxl__json_map_get("exec_ssidref", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->exec_ssidref);
            if (rc)
                goto out;
        }
        x = saved_exec_ssidref;
    }
    {
        const libxl__json_object *saved_exec_ssid_label = x;
        x = libxl__json_map_get("exec_ssid_label", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->exec_ssid_label);
            if (rc)
                goto out;
        }
        x = saved_exec_ssid_label;
    }
    {
        const libxl__json_object *saved_localtime = x;
        x = libxl__json_map_get("localtime", o, JSON_STRING);
        if (x) {
            rc = libxl__defbool_parse_json(gc, x, &p->localtime);
            if (rc)
                goto out;
        }
        x = saved_localtime;
    }
    {
        const libxl__json_object *saved_disable_migrate = x;
        x = libxl__json_map_get("disable_migrate", o, JSON_STRING);
        if (x) {
            rc = libxl__defbool_parse_json(gc, x, &p->disable_migrate);
            if (rc)
                goto out;
        }
        x = saved_disable_migrate;
    }
    {
        const libxl__json_object *saved_cpuid = x;
        x = libxl__json_map_get("cpuid", o, JSON_ARRAY);
        if (x) {
            rc = libxl__cpuid_policy_list_parse_json(gc, x, &p->cpuid);
            if (rc)
                goto out;
        }
        x = saved_cpuid;
    }
    {
        const libxl__json_object *saved_blkdev_start = x;
        x = libxl__json_map_get("blkdev_start", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->blkdev_start);
            if (rc)
                goto out;
        }
        x = saved_blkdev_start;
    }
    {
        const libxl__json_object *saved_vnuma_nodes = x;
        x = libxl__json_map_get("vnuma_nodes", o, JSON_ARRAY);
        if (x) {
            {
                libxl__json_object *t;
                int i;
                if (!libxl__json_object_is_array(x)) {
                    rc = -1;
                    goto out;
                }
                p->num_vnuma_nodes = x->u.array->count;
                p->vnuma_nodes = libxl__calloc(NOGC, p->num_vnuma_nodes, sizeof(*p->vnuma_nodes));
                if (!p->vnuma_nodes && p->num_vnuma_nodes != 0) {
                    rc = -1;
                    goto out;
                }
                for (i=0; (t=libxl__json_array_get(x,i)); i++) {
                        rc = libxl__vnode_info_parse_json(gc, t, &p->vnuma_nodes[i]);
                        if (rc)
                            goto out;
                }
                if (i != p->num_vnuma_nodes) {
                    rc = -1;
                    goto out;
                }
            }
        }
        x = saved_vnuma_nodes;
    }
    {
        const libxl__json_object *saved_max_grant_frames = x;
        x = libxl__json_map_get("max_grant_frames", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->max_grant_frames);
            if (rc)
                goto out;
        }
        x = saved_max_grant_frames;
    }
    {
        const libxl__json_object *saved_max_maptrack_frames = x;
        x = libxl__json_map_get("max_maptrack_frames", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->max_maptrack_frames);
            if (rc)
                goto out;
        }
        x = saved_max_maptrack_frames;
    }
    {
        const libxl__json_object *saved_device_model_version = x;
        x = libxl__json_map_get("device_model_version", o, JSON_STRING);
        if (x) {
            {
                const char *enum_str;
                if (!libxl__json_object_is_string(x)) {
                    rc = -1;
                    goto out;
                }
                enum_str = libxl__json_object_get_string(x);
                rc = libxl_device_model_version_from_string(enum_str, &p->device_model_version);
                if (rc)
                    goto out;
            }
        }
        x = saved_device_model_version;
    }
    {
        const libxl__json_object *saved_device_model_stubdomain = x;
        x = libxl__json_map_get("device_model_stubdomain", o, JSON_STRING);
        if (x) {
            rc = libxl__defbool_parse_json(gc, x, &p->device_model_stubdomain);
            if (rc)
                goto out;
        }
        x = saved_device_model_stubdomain;
    }
    {
        const libxl__json_object *saved_device_model = x;
        x = libxl__json_map_get("device_model", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->device_model);
            if (rc)
                goto out;
        }
        x = saved_device_model;
    }
    {
        const libxl__json_object *saved_device_model_ssidref = x;
        x = libxl__json_map_get("device_model_ssidref", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->device_model_ssidref);
            if (rc)
                goto out;
        }
        x = saved_device_model_ssidref;
    }
    {
        const libxl__json_object *saved_device_model_ssid_label = x;
        x = libxl__json_map_get("device_model_ssid_label", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->device_model_ssid_label);
            if (rc)
                goto out;
        }
        x = saved_device_model_ssid_label;
    }
    {
        const libxl__json_object *saved_device_model_user = x;
        x = libxl__json_map_get("device_model_user", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->device_model_user);
            if (rc)
                goto out;
        }
        x = saved_device_model_user;
    }
    {
        const libxl__json_object *saved_extra = x;
        x = libxl__json_map_get("extra", o, JSON_ARRAY);
        if (x) {
            rc = libxl__string_list_parse_json(gc, x, &p->extra);
            if (rc)
                goto out;
        }
        x = saved_extra;
    }
    {
        const libxl__json_object *saved_extra_pv = x;
        x = libxl__json_map_get("extra_pv", o, JSON_ARRAY);
        if (x) {
            rc = libxl__string_list_parse_json(gc, x, &p->extra_pv);
            if (rc)
                goto out;
        }
        x = saved_extra_pv;
    }
    {
        const libxl__json_object *saved_extra_hvm = x;
        x = libxl__json_map_get("extra_hvm", o, JSON_ARRAY);
        if (x) {
            rc = libxl__string_list_parse_json(gc, x, &p->extra_hvm);
            if (rc)
                goto out;
        }
        x = saved_extra_hvm;
    }
    {
        const libxl__json_object *saved_sched_params = x;
        x = libxl__json_map_get("sched_params", o, JSON_MAP);
        if (x) {
            rc = libxl__domain_sched_params_parse_json(gc, x, &p->sched_params);
            if (rc)
                goto out;
        }
        x = saved_sched_params;
    }
    {
        const libxl__json_object *saved_ioports = x;
        x = libxl__json_map_get("ioports", o, JSON_ARRAY);
        if (x) {
            {
                libxl__json_object *t;
                int i;
                if (!libxl__json_object_is_array(x)) {
                    rc = -1;
                    goto out;
                }
                p->num_ioports = x->u.array->count;
                p->ioports = libxl__calloc(NOGC, p->num_ioports, sizeof(*p->ioports));
                if (!p->ioports && p->num_ioports != 0) {
                    rc = -1;
                    goto out;
                }
                for (i=0; (t=libxl__json_array_get(x,i)); i++) {
                        rc = libxl__ioport_range_parse_json(gc, t, &p->ioports[i]);
                        if (rc)
                            goto out;
                }
                if (i != p->num_ioports) {
                    rc = -1;
                    goto out;
                }
            }
        }
        x = saved_ioports;
    }
    {
        const libxl__json_object *saved_irqs = x;
        x = libxl__json_map_get("irqs", o, JSON_ARRAY);
        if (x) {
            {
                libxl__json_object *t;
                int i;
                if (!libxl__json_object_is_array(x)) {
                    rc = -1;
                    goto out;
                }
                p->num_irqs = x->u.array->count;
                p->irqs = libxl__calloc(NOGC, p->num_irqs, sizeof(*p->irqs));
                if (!p->irqs && p->num_irqs != 0) {
                    rc = -1;
                    goto out;
                }
                for (i=0; (t=libxl__json_array_get(x,i)); i++) {
                        rc = libxl__uint32_parse_json(gc, t, &p->irqs[i]);
                        if (rc)
                            goto out;
                }
                if (i != p->num_irqs) {
                    rc = -1;
                    goto out;
                }
            }
        }
        x = saved_irqs;
    }
    {
        const libxl__json_object *saved_iomem = x;
        x = libxl__json_map_get("iomem", o, JSON_ARRAY);
        if (x) {
            {
                libxl__json_object *t;
                int i;
                if (!libxl__json_object_is_array(x)) {
                    rc = -1;
                    goto out;
                }
                p->num_iomem = x->u.array->count;
                p->iomem = libxl__calloc(NOGC, p->num_iomem, sizeof(*p->iomem));
                if (!p->iomem && p->num_iomem != 0) {
                    rc = -1;
                    goto out;
                }
                for (i=0; (t=libxl__json_array_get(x,i)); i++) {
                        rc = libxl__iomem_range_parse_json(gc, t, &p->iomem[i]);
                        if (rc)
                            goto out;
                }
                if (i != p->num_iomem) {
                    rc = -1;
                    goto out;
                }
            }
        }
        x = saved_iomem;
    }
    {
        const libxl__json_object *saved_claim_mode = x;
        x = libxl__json_map_get("claim_mode", o, JSON_STRING);
        if (x) {
            rc = libxl__defbool_parse_json(gc, x, &p->claim_mode);
            if (rc)
                goto out;
        }
        x = saved_claim_mode;
    }
    {
        const libxl__json_object *saved_event_channels = x;
        x = libxl__json_map_get("event_channels", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->event_channels);
            if (rc)
                goto out;
        }
        x = saved_event_channels;
    }
    {
        const libxl__json_object *saved_kernel = x;
        x = libxl__json_map_get("kernel", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->kernel);
            if (rc)
                goto out;
        }
        x = saved_kernel;
    }
    {
        const libxl__json_object *saved_cmdline = x;
        x = libxl__json_map_get("cmdline", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->cmdline);
            if (rc)
                goto out;
        }
        x = saved_cmdline;
    }
    {
        const libxl__json_object *saved_ramdisk = x;
        x = libxl__json_map_get("ramdisk", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->ramdisk);
            if (rc)
                goto out;
        }
        x = saved_ramdisk;
    }
    {
        const libxl__json_object *saved_device_tree = x;
        x = libxl__json_map_get("device_tree", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->device_tree);
            if (rc)
                goto out;
        }
        x = saved_device_tree;
    }
    {
        const libxl__json_object *saved_acpi = x;
        x = libxl__json_map_get("acpi", o, JSON_STRING);
        if (x) {
            rc = libxl__defbool_parse_json(gc, x, &p->acpi);
            if (rc)
                goto out;
        }
        x = saved_acpi;
    }
    {
        const libxl__json_object *saved_bootloader = x;
        x = libxl__json_map_get("bootloader", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->bootloader);
            if (rc)
                goto out;
        }
        x = saved_bootloader;
    }
    {
        const libxl__json_object *saved_bootloader_args = x;
        x = libxl__json_map_get("bootloader_args", o, JSON_ARRAY);
        if (x) {
            rc = libxl__string_list_parse_json(gc, x, &p->bootloader_args);
            if (rc)
                goto out;
        }
        x = saved_bootloader_args;
    }
    {
        const libxl__json_object *saved_timer_mode = x;
        x = libxl__json_map_get("timer_mode", o, JSON_STRING);
        if (x) {
            {
                const char *enum_str;
                if (!libxl__json_object_is_string(x)) {
                    rc = -1;
                    goto out;
                }
                enum_str = libxl__json_object_get_string(x);
                rc = libxl_timer_mode_from_string(enum_str, &p->timer_mode);
                if (rc)
                    goto out;
            }
        }
        x = saved_timer_mode;
    }
    {
        const libxl__json_object *saved_nested_hvm = x;
        x = libxl__json_map_get("nested_hvm", o, JSON_STRING);
        if (x) {
            rc = libxl__defbool_parse_json(gc, x, &p->nested_hvm);
            if (rc)
                goto out;
        }
        x = saved_nested_hvm;
    }
    {
        const libxl__json_object *saved_apic = x;
        x = libxl__json_map_get("apic", o, JSON_STRING);
        if (x) {
            rc = libxl__defbool_parse_json(gc, x, &p->apic);
            if (rc)
                goto out;
        }
        x = saved_apic;
    }
    {
        const libxl__json_object *saved_dm_restrict = x;
        x = libxl__json_map_get("dm_restrict", o, JSON_STRING);
        if (x) {
            rc = libxl__defbool_parse_json(gc, x, &p->dm_restrict);
            if (rc)
                goto out;
        }
        x = saved_dm_restrict;
    }
    {
        const libxl__json_object *saved_u = x;
        x = libxl__json_map_get("type.hvm", o, JSON_MAP);
        if (x) {
            libxl_domain_build_info_init_type(p, LIBXL_DOMAIN_TYPE_HVM);
            {
                const libxl__json_object *saved_firmware = x;
                x = libxl__json_map_get("firmware", x, JSON_STRING | JSON_NULL);
                if (x) {
                    rc = libxl__string_parse_json(gc, x, &p->u.hvm.firmware);
                    if (rc)
                        goto out;
                }
                x = saved_firmware;
            }
            {
                const libxl__json_object *saved_bios = x;
                x = libxl__json_map_get("bios", x, JSON_STRING);
                if (x) {
                    {
                        const char *enum_str;
                        if (!libxl__json_object_is_string(x)) {
                            rc = -1;
                            goto out;
                        }
                        enum_str = libxl__json_object_get_string(x);
                        rc = libxl_bios_type_from_string(enum_str, &p->u.hvm.bios);
                        if (rc)
                            goto out;
                    }
                }
                x = saved_bios;
            }
            {
                const libxl__json_object *saved_pae = x;
                x = libxl__json_map_get("pae", x, JSON_STRING);
                if (x) {
                    rc = libxl__defbool_parse_json(gc, x, &p->u.hvm.pae);
                    if (rc)
                        goto out;
                }
                x = saved_pae;
            }
            {
                const libxl__json_object *saved_apic = x;
                x = libxl__json_map_get("apic", x, JSON_STRING);
                if (x) {
                    rc = libxl__defbool_parse_json(gc, x, &p->u.hvm.apic);
                    if (rc)
                        goto out;
                }
                x = saved_apic;
            }
            {
                const libxl__json_object *saved_acpi = x;
                x = libxl__json_map_get("acpi", x, JSON_STRING);
                if (x) {
                    rc = libxl__defbool_parse_json(gc, x, &p->u.hvm.acpi);
                    if (rc)
                        goto out;
                }
                x = saved_acpi;
            }
            {
                const libxl__json_object *saved_acpi_s3 = x;
                x = libxl__json_map_get("acpi_s3", x, JSON_STRING);
                if (x) {
                    rc = libxl__defbool_parse_json(gc, x, &p->u.hvm.acpi_s3);
                    if (rc)
                        goto out;
                }
                x = saved_acpi_s3;
            }
            {
                const libxl__json_object *saved_acpi_s4 = x;
                x = libxl__json_map_get("acpi_s4", x, JSON_STRING);
                if (x) {
                    rc = libxl__defbool_parse_json(gc, x, &p->u.hvm.acpi_s4);
                    if (rc)
                        goto out;
                }
                x = saved_acpi_s4;
            }
            {
                const libxl__json_object *saved_acpi_laptop_slate = x;
                x = libxl__json_map_get("acpi_laptop_slate", x, JSON_STRING);
                if (x) {
                    rc = libxl__defbool_parse_json(gc, x, &p->u.hvm.acpi_laptop_slate);
                    if (rc)
                        goto out;
                }
                x = saved_acpi_laptop_slate;
            }
            {
                const libxl__json_object *saved_nx = x;
                x = libxl__json_map_get("nx", x, JSON_STRING);
                if (x) {
                    rc = libxl__defbool_parse_json(gc, x, &p->u.hvm.nx);
                    if (rc)
                        goto out;
                }
                x = saved_nx;
            }
            {
                const libxl__json_object *saved_viridian = x;
                x = libxl__json_map_get("viridian", x, JSON_STRING);
                if (x) {
                    rc = libxl__defbool_parse_json(gc, x, &p->u.hvm.viridian);
                    if (rc)
                        goto out;
                }
                x = saved_viridian;
            }
            {
                const libxl__json_object *saved_viridian_enable = x;
                x = libxl__json_map_get("viridian_enable", x, JSON_ARRAY);
                if (x) {
                    rc = libxl__bitmap_parse_json(gc, x, &p->u.hvm.viridian_enable);
                    if (rc)
                        goto out;
                }
                x = saved_viridian_enable;
            }
            {
                const libxl__json_object *saved_viridian_disable = x;
                x = libxl__json_map_get("viridian_disable", x, JSON_ARRAY);
                if (x) {
                    rc = libxl__bitmap_parse_json(gc, x, &p->u.hvm.viridian_disable);
                    if (rc)
                        goto out;
                }
                x = saved_viridian_disable;
            }
            {
                const libxl__json_object *saved_timeoffset = x;
                x = libxl__json_map_get("timeoffset", x, JSON_STRING | JSON_NULL);
                if (x) {
                    rc = libxl__string_parse_json(gc, x, &p->u.hvm.timeoffset);
                    if (rc)
                        goto out;
                }
                x = saved_timeoffset;
            }
            {
                const libxl__json_object *saved_hpet = x;
                x = libxl__json_map_get("hpet", x, JSON_STRING);
                if (x) {
                    rc = libxl__defbool_parse_json(gc, x, &p->u.hvm.hpet);
                    if (rc)
                        goto out;
                }
                x = saved_hpet;
            }
            {
                const libxl__json_object *saved_vpt_align = x;
                x = libxl__json_map_get("vpt_align", x, JSON_STRING);
                if (x) {
                    rc = libxl__defbool_parse_json(gc, x, &p->u.hvm.vpt_align);
                    if (rc)
                        goto out;
                }
                x = saved_vpt_align;
            }
            {
                const libxl__json_object *saved_mmio_hole_memkb = x;
                x = libxl__json_map_get("mmio_hole_memkb", x, JSON_INTEGER);
                if (x) {
                    rc = libxl__uint64_parse_json(gc, x, &p->u.hvm.mmio_hole_memkb);
                    if (rc)
                        goto out;
                }
                x = saved_mmio_hole_memkb;
            }
            {
                const libxl__json_object *saved_timer_mode = x;
                x = libxl__json_map_get("timer_mode", x, JSON_STRING);
                if (x) {
                    {
                        const char *enum_str;
                        if (!libxl__json_object_is_string(x)) {
                            rc = -1;
                            goto out;
                        }
                        enum_str = libxl__json_object_get_string(x);
                        rc = libxl_timer_mode_from_string(enum_str, &p->u.hvm.timer_mode);
                        if (rc)
                            goto out;
                    }
                }
                x = saved_timer_mode;
            }
            {
                const libxl__json_object *saved_nested_hvm = x;
                x = libxl__json_map_get("nested_hvm", x, JSON_STRING);
                if (x) {
                    rc = libxl__defbool_parse_json(gc, x, &p->u.hvm.nested_hvm);
                    if (rc)
                        goto out;
                }
                x = saved_nested_hvm;
            }
            {
                const libxl__json_object *saved_altp2m = x;
                x = libxl__json_map_get("altp2m", x, JSON_STRING);
                if (x) {
                    rc = libxl__defbool_parse_json(gc, x, &p->u.hvm.altp2m);
                    if (rc)
                        goto out;
                }
                x = saved_altp2m;
            }
            {
                const libxl__json_object *saved_system_firmware = x;
                x = libxl__json_map_get("system_firmware", x, JSON_STRING | JSON_NULL);
                if (x) {
                    rc = libxl__string_parse_json(gc, x, &p->u.hvm.system_firmware);
                    if (rc)
                        goto out;
                }
                x = saved_system_firmware;
            }
            {
                const libxl__json_object *saved_smbios_firmware = x;
                x = libxl__json_map_get("smbios_firmware", x, JSON_STRING | JSON_NULL);
                if (x) {
                    rc = libxl__string_parse_json(gc, x, &p->u.hvm.smbios_firmware);
                    if (rc)
                        goto out;
                }
                x = saved_smbios_firmware;
            }
            {
                const libxl__json_object *saved_acpi_firmware = x;
                x = libxl__json_map_get("acpi_firmware", x, JSON_STRING | JSON_NULL);
                if (x) {
                    rc = libxl__string_parse_json(gc, x, &p->u.hvm.acpi_firmware);
                    if (rc)
                        goto out;
                }
                x = saved_acpi_firmware;
            }
            {
                const libxl__json_object *saved_hdtype = x;
                x = libxl__json_map_get("hdtype", x, JSON_STRING);
                if (x) {
                    {
                        const char *enum_str;
                        if (!libxl__json_object_is_string(x)) {
                            rc = -1;
                            goto out;
                        }
                        enum_str = libxl__json_object_get_string(x);
                        rc = libxl_hdtype_from_string(enum_str, &p->u.hvm.hdtype);
                        if (rc)
                            goto out;
                    }
                }
                x = saved_hdtype;
            }
            {
                const libxl__json_object *saved_nographic = x;
                x = libxl__json_map_get("nographic", x, JSON_STRING);
                if (x) {
                    rc = libxl__defbool_parse_json(gc, x, &p->u.hvm.nographic);
                    if (rc)
                        goto out;
                }
                x = saved_nographic;
            }
            {
                const libxl__json_object *saved_vga = x;
                x = libxl__json_map_get("vga", x, JSON_MAP);
                if (x) {
                    rc = libxl__vga_interface_info_parse_json(gc, x, &p->u.hvm.vga);
                    if (rc)
                        goto out;
                }
                x = saved_vga;
            }
            {
                const libxl__json_object *saved_vnc = x;
                x = libxl__json_map_get("vnc", x, JSON_MAP);
                if (x) {
                    rc = libxl__vnc_info_parse_json(gc, x, &p->u.hvm.vnc);
                    if (rc)
                        goto out;
                }
                x = saved_vnc;
            }
            {
                const libxl__json_object *saved_keymap = x;
                x = libxl__json_map_get("keymap", x, JSON_STRING | JSON_NULL);
                if (x) {
                    rc = libxl__string_parse_json(gc, x, &p->u.hvm.keymap);
                    if (rc)
                        goto out;
                }
                x = saved_keymap;
            }
            {
                const libxl__json_object *saved_sdl = x;
                x = libxl__json_map_get("sdl", x, JSON_MAP);
                if (x) {
                    rc = libxl__sdl_info_parse_json(gc, x, &p->u.hvm.sdl);
                    if (rc)
                        goto out;
                }
                x = saved_sdl;
            }
            {
                const libxl__json_object *saved_spice = x;
                x = libxl__json_map_get("spice", x, JSON_MAP);
                if (x) {
                    rc = libxl__spice_info_parse_json(gc, x, &p->u.hvm.spice);
                    if (rc)
                        goto out;
                }
                x = saved_spice;
            }
            {
                const libxl__json_object *saved_gfx_passthru = x;
                x = libxl__json_map_get("gfx_passthru", x, JSON_STRING);
                if (x) {
                    rc = libxl__defbool_parse_json(gc, x, &p->u.hvm.gfx_passthru);
                    if (rc)
                        goto out;
                }
                x = saved_gfx_passthru;
            }
            {
                const libxl__json_object *saved_gfx_passthru_kind = x;
                x = libxl__json_map_get("gfx_passthru_kind", x, JSON_STRING);
                if (x) {
                    {
                        const char *enum_str;
                        if (!libxl__json_object_is_string(x)) {
                            rc = -1;
                            goto out;
                        }
                        enum_str = libxl__json_object_get_string(x);
                        rc = libxl_gfx_passthru_kind_from_string(enum_str, &p->u.hvm.gfx_passthru_kind);
                        if (rc)
                            goto out;
                    }
                }
                x = saved_gfx_passthru_kind;
            }
            {
                const libxl__json_object *saved_serial = x;
                x = libxl__json_map_get("serial", x, JSON_STRING | JSON_NULL);
                if (x) {
                    rc = libxl__string_parse_json(gc, x, &p->u.hvm.serial);
                    if (rc)
                        goto out;
                }
                x = saved_serial;
            }
            {
                const libxl__json_object *saved_boot = x;
                x = libxl__json_map_get("boot", x, JSON_STRING | JSON_NULL);
                if (x) {
                    rc = libxl__string_parse_json(gc, x, &p->u.hvm.boot);
                    if (rc)
                        goto out;
                }
                x = saved_boot;
            }
            {
                const libxl__json_object *saved_usb = x;
                x = libxl__json_map_get("usb", x, JSON_STRING);
                if (x) {
                    rc = libxl__defbool_parse_json(gc, x, &p->u.hvm.usb);
                    if (rc)
                        goto out;
                }
                x = saved_usb;
            }
            {
                const libxl__json_object *saved_usbversion = x;
                x = libxl__json_map_get("usbversion", x, JSON_INTEGER);
                if (x) {
                    rc = libxl__int_parse_json(gc, x, &p->u.hvm.usbversion);
                    if (rc)
                        goto out;
                }
                x = saved_usbversion;
            }
            {
                const libxl__json_object *saved_usbdevice = x;
                x = libxl__json_map_get("usbdevice", x, JSON_STRING | JSON_NULL);
                if (x) {
                    rc = libxl__string_parse_json(gc, x, &p->u.hvm.usbdevice);
                    if (rc)
                        goto out;
                }
                x = saved_usbdevice;
            }
            {
                const libxl__json_object *saved_soundhw = x;
                x = libxl__json_map_get("soundhw", x, JSON_STRING | JSON_NULL);
                if (x) {
                    rc = libxl__string_parse_json(gc, x, &p->u.hvm.soundhw);
                    if (rc)
                        goto out;
                }
                x = saved_soundhw;
            }
            {
                const libxl__json_object *saved_xen_platform_pci = x;
                x = libxl__json_map_get("xen_platform_pci", x, JSON_STRING);
                if (x) {
                    rc = libxl__defbool_parse_json(gc, x, &p->u.hvm.xen_platform_pci);
                    if (rc)
                        goto out;
                }
                x = saved_xen_platform_pci;
            }
            {
                const libxl__json_object *saved_usbdevice_list = x;
                x = libxl__json_map_get("usbdevice_list", x, JSON_ARRAY);
                if (x) {
                    rc = libxl__string_list_parse_json(gc, x, &p->u.hvm.usbdevice_list);
                    if (rc)
                        goto out;
                }
                x = saved_usbdevice_list;
            }
            {
                const libxl__json_object *saved_vendor_device = x;
                x = libxl__json_map_get("vendor_device", x, JSON_STRING);
                if (x) {
                    {
                        const char *enum_str;
                        if (!libxl__json_object_is_string(x)) {
                            rc = -1;
                            goto out;
                        }
                        enum_str = libxl__json_object_get_string(x);
                        rc = libxl_vendor_device_from_string(enum_str, &p->u.hvm.vendor_device);
                        if (rc)
                            goto out;
                    }
                }
                x = saved_vendor_device;
            }
            {
                const libxl__json_object *saved_ms_vm_genid = x;
                x = libxl__json_map_get("ms_vm_genid", x, JSON_ANY);
                if (x) {
                    rc = libxl__ms_vm_genid_parse_json(gc, x, &p->u.hvm.ms_vm_genid);
                    if (rc)
                        goto out;
                }
                x = saved_ms_vm_genid;
            }
            {
                const libxl__json_object *saved_serial_list = x;
                x = libxl__json_map_get("serial_list", x, JSON_ARRAY);
                if (x) {
                    rc = libxl__string_list_parse_json(gc, x, &p->u.hvm.serial_list);
                    if (rc)
                        goto out;
                }
                x = saved_serial_list;
            }
            {
                const libxl__json_object *saved_rdm = x;
                x = libxl__json_map_get("rdm", x, JSON_MAP);
                if (x) {
                    rc = libxl__rdm_reserve_parse_json(gc, x, &p->u.hvm.rdm);
                    if (rc)
                        goto out;
                }
                x = saved_rdm;
            }
            {
                const libxl__json_object *saved_rdm_mem_boundary_memkb = x;
                x = libxl__json_map_get("rdm_mem_boundary_memkb", x, JSON_INTEGER);
                if (x) {
                    rc = libxl__uint64_parse_json(gc, x, &p->u.hvm.rdm_mem_boundary_memkb);
                    if (rc)
                        goto out;
                }
                x = saved_rdm_mem_boundary_memkb;
            }
            {
                const libxl__json_object *saved_mca_caps = x;
                x = libxl__json_map_get("mca_caps", x, JSON_INTEGER);
                if (x) {
                    rc = libxl__uint64_parse_json(gc, x, &p->u.hvm.mca_caps);
                    if (rc)
                        goto out;
                }
                x = saved_mca_caps;
            }
        }
        x = libxl__json_map_get("type.pv", o, JSON_MAP);
        if (x) {
            libxl_domain_build_info_init_type(p, LIBXL_DOMAIN_TYPE_PV);
            {
                const libxl__json_object *saved_kernel = x;
                x = libxl__json_map_get("kernel", x, JSON_STRING | JSON_NULL);
                if (x) {
                    rc = libxl__string_parse_json(gc, x, &p->u.pv.kernel);
                    if (rc)
                        goto out;
                }
                x = saved_kernel;
            }
            {
                const libxl__json_object *saved_slack_memkb = x;
                x = libxl__json_map_get("slack_memkb", x, JSON_INTEGER);
                if (x) {
                    rc = libxl__uint64_parse_json(gc, x, &p->u.pv.slack_memkb);
                    if (rc)
                        goto out;
                }
                x = saved_slack_memkb;
            }
            {
                const libxl__json_object *saved_bootloader = x;
                x = libxl__json_map_get("bootloader", x, JSON_STRING | JSON_NULL);
                if (x) {
                    rc = libxl__string_parse_json(gc, x, &p->u.pv.bootloader);
                    if (rc)
                        goto out;
                }
                x = saved_bootloader;
            }
            {
                const libxl__json_object *saved_bootloader_args = x;
                x = libxl__json_map_get("bootloader_args", x, JSON_ARRAY);
                if (x) {
                    rc = libxl__string_list_parse_json(gc, x, &p->u.pv.bootloader_args);
                    if (rc)
                        goto out;
                }
                x = saved_bootloader_args;
            }
            {
                const libxl__json_object *saved_cmdline = x;
                x = libxl__json_map_get("cmdline", x, JSON_STRING | JSON_NULL);
                if (x) {
                    rc = libxl__string_parse_json(gc, x, &p->u.pv.cmdline);
                    if (rc)
                        goto out;
                }
                x = saved_cmdline;
            }
            {
                const libxl__json_object *saved_ramdisk = x;
                x = libxl__json_map_get("ramdisk", x, JSON_STRING | JSON_NULL);
                if (x) {
                    rc = libxl__string_parse_json(gc, x, &p->u.pv.ramdisk);
                    if (rc)
                        goto out;
                }
                x = saved_ramdisk;
            }
            {
                const libxl__json_object *saved_e820_host = x;
                x = libxl__json_map_get("e820_host", x, JSON_STRING);
                if (x) {
                    rc = libxl__defbool_parse_json(gc, x, &p->u.pv.e820_host);
                    if (rc)
                        goto out;
                }
                x = saved_e820_host;
            }
        }
        x = libxl__json_map_get("type.pvh", o, JSON_MAP);
        if (x) {
            libxl_domain_build_info_init_type(p, LIBXL_DOMAIN_TYPE_PVH);
        }
        x = libxl__json_map_get("type.invalid", o, JSON_MAP);
        if (x) {
            libxl_domain_build_info_init_type(p, LIBXL_DOMAIN_TYPE_INVALID);
        }
        x = saved_u;
    }
    {
        const libxl__json_object *saved_arch_arm = x;
        x = libxl__json_map_get("arch_arm", o, JSON_MAP);
        if (x) {
            {
                const libxl__json_object *saved_gic_version = x;
                x = libxl__json_map_get("gic_version", x, JSON_STRING);
                if (x) {
                    {
                        const char *enum_str;
                        if (!libxl__json_object_is_string(x)) {
                            rc = -1;
                            goto out;
                        }
                        enum_str = libxl__json_object_get_string(x);
                        rc = libxl_gic_version_from_string(enum_str, &p->arch_arm.gic_version);
                        if (rc)
                            goto out;
                    }
                }
                x = saved_gic_version;
            }
            {
                const libxl__json_object *saved_vuart = x;
                x = libxl__json_map_get("vuart", x, JSON_STRING);
                if (x) {
                    {
                        const char *enum_str;
                        if (!libxl__json_object_is_string(x)) {
                            rc = -1;
                            goto out;
                        }
                        enum_str = libxl__json_object_get_string(x);
                        rc = libxl_vuart_type_from_string(enum_str, &p->arch_arm.vuart);
                        if (rc)
                            goto out;
                    }
                }
                x = saved_vuart;
            }
        }
        x = saved_arch_arm;
    }
    {
        const libxl__json_object *saved_altp2m = x;
        x = libxl__json_map_get("altp2m", o, JSON_STRING);
        if (x) {
            {
                const char *enum_str;
                if (!libxl__json_object_is_string(x)) {
                    rc = -1;
                    goto out;
                }
                enum_str = libxl__json_object_get_string(x);
                rc = libxl_altp2m_mode_from_string(enum_str, &p->altp2m);
                if (rc)
                    goto out;
            }
        }
        x = saved_altp2m;
    }
    out:
    return rc;
}

int libxl_domain_build_info_from_json(libxl_ctx *ctx, libxl_domain_build_info *p, const char *s)
{
    libxl_domain_build_info_init(p);
    return libxl__object_from_json(ctx, "libxl_domain_build_info", (libxl__json_parse_callback)&libxl__domain_build_info_parse_json, p, s);
}

int libxl__device_vfb_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_device_vfb *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const libxl__json_object *saved_backend_domid = x;
        x = libxl__json_map_get("backend_domid", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->backend_domid);
            if (rc)
                goto out;
        }
        x = saved_backend_domid;
    }
    {
        const libxl__json_object *saved_backend_domname = x;
        x = libxl__json_map_get("backend_domname", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->backend_domname);
            if (rc)
                goto out;
        }
        x = saved_backend_domname;
    }
    {
        const libxl__json_object *saved_devid = x;
        x = libxl__json_map_get("devid", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->devid);
            if (rc)
                goto out;
        }
        x = saved_devid;
    }
    {
        const libxl__json_object *saved_vnc = x;
        x = libxl__json_map_get("vnc", o, JSON_MAP);
        if (x) {
            rc = libxl__vnc_info_parse_json(gc, x, &p->vnc);
            if (rc)
                goto out;
        }
        x = saved_vnc;
    }
    {
        const libxl__json_object *saved_sdl = x;
        x = libxl__json_map_get("sdl", o, JSON_MAP);
        if (x) {
            rc = libxl__sdl_info_parse_json(gc, x, &p->sdl);
            if (rc)
                goto out;
        }
        x = saved_sdl;
    }
    {
        const libxl__json_object *saved_keymap = x;
        x = libxl__json_map_get("keymap", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->keymap);
            if (rc)
                goto out;
        }
        x = saved_keymap;
    }
    out:
    return rc;
}

int libxl_device_vfb_from_json(libxl_ctx *ctx, libxl_device_vfb *p, const char *s)
{
    libxl_device_vfb_init(p);
    return libxl__object_from_json(ctx, "libxl_device_vfb", (libxl__json_parse_callback)&libxl__device_vfb_parse_json, p, s);
}

int libxl__device_vkb_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_device_vkb *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const libxl__json_object *saved_backend_domid = x;
        x = libxl__json_map_get("backend_domid", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->backend_domid);
            if (rc)
                goto out;
        }
        x = saved_backend_domid;
    }
    {
        const libxl__json_object *saved_backend_domname = x;
        x = libxl__json_map_get("backend_domname", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->backend_domname);
            if (rc)
                goto out;
        }
        x = saved_backend_domname;
    }
    {
        const libxl__json_object *saved_devid = x;
        x = libxl__json_map_get("devid", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->devid);
            if (rc)
                goto out;
        }
        x = saved_devid;
    }
    out:
    return rc;
}

int libxl_device_vkb_from_json(libxl_ctx *ctx, libxl_device_vkb *p, const char *s)
{
    libxl_device_vkb_init(p);
    return libxl__object_from_json(ctx, "libxl_device_vkb", (libxl__json_parse_callback)&libxl__device_vkb_parse_json, p, s);
}

int libxl__device_disk_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_device_disk *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const libxl__json_object *saved_backend_domid = x;
        x = libxl__json_map_get("backend_domid", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->backend_domid);
            if (rc)
                goto out;
        }
        x = saved_backend_domid;
    }
    {
        const libxl__json_object *saved_backend_domname = x;
        x = libxl__json_map_get("backend_domname", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->backend_domname);
            if (rc)
                goto out;
        }
        x = saved_backend_domname;
    }
    {
        const libxl__json_object *saved_pdev_path = x;
        x = libxl__json_map_get("pdev_path", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->pdev_path);
            if (rc)
                goto out;
        }
        x = saved_pdev_path;
    }
    {
        const libxl__json_object *saved_vdev = x;
        x = libxl__json_map_get("vdev", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->vdev);
            if (rc)
                goto out;
        }
        x = saved_vdev;
    }
    {
        const libxl__json_object *saved_backend = x;
        x = libxl__json_map_get("backend", o, JSON_STRING);
        if (x) {
            {
                const char *enum_str;
                if (!libxl__json_object_is_string(x)) {
                    rc = -1;
                    goto out;
                }
                enum_str = libxl__json_object_get_string(x);
                rc = libxl_disk_backend_from_string(enum_str, &p->backend);
                if (rc)
                    goto out;
            }
        }
        x = saved_backend;
    }
    {
        const libxl__json_object *saved_format = x;
        x = libxl__json_map_get("format", o, JSON_STRING);
        if (x) {
            {
                const char *enum_str;
                if (!libxl__json_object_is_string(x)) {
                    rc = -1;
                    goto out;
                }
                enum_str = libxl__json_object_get_string(x);
                rc = libxl_disk_format_from_string(enum_str, &p->format);
                if (rc)
                    goto out;
            }
        }
        x = saved_format;
    }
    {
        const libxl__json_object *saved_script = x;
        x = libxl__json_map_get("script", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->script);
            if (rc)
                goto out;
        }
        x = saved_script;
    }
    {
        const libxl__json_object *saved_removable = x;
        x = libxl__json_map_get("removable", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->removable);
            if (rc)
                goto out;
        }
        x = saved_removable;
    }
    {
        const libxl__json_object *saved_readwrite = x;
        x = libxl__json_map_get("readwrite", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->readwrite);
            if (rc)
                goto out;
        }
        x = saved_readwrite;
    }
    {
        const libxl__json_object *saved_is_cdrom = x;
        x = libxl__json_map_get("is_cdrom", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->is_cdrom);
            if (rc)
                goto out;
        }
        x = saved_is_cdrom;
    }
    {
        const libxl__json_object *saved_direct_io_safe = x;
        x = libxl__json_map_get("direct_io_safe", o, JSON_BOOL);
        if (x) {
            rc = libxl__bool_parse_json(gc, x, &p->direct_io_safe);
            if (rc)
                goto out;
        }
        x = saved_direct_io_safe;
    }
    {
        const libxl__json_object *saved_discard_enable = x;
        x = libxl__json_map_get("discard_enable", o, JSON_STRING);
        if (x) {
            rc = libxl__defbool_parse_json(gc, x, &p->discard_enable);
            if (rc)
                goto out;
        }
        x = saved_discard_enable;
    }
    {
        const libxl__json_object *saved_colo_enable = x;
        x = libxl__json_map_get("colo_enable", o, JSON_STRING);
        if (x) {
            rc = libxl__defbool_parse_json(gc, x, &p->colo_enable);
            if (rc)
                goto out;
        }
        x = saved_colo_enable;
    }
    {
        const libxl__json_object *saved_colo_restore_enable = x;
        x = libxl__json_map_get("colo_restore_enable", o, JSON_STRING);
        if (x) {
            rc = libxl__defbool_parse_json(gc, x, &p->colo_restore_enable);
            if (rc)
                goto out;
        }
        x = saved_colo_restore_enable;
    }
    {
        const libxl__json_object *saved_colo_host = x;
        x = libxl__json_map_get("colo_host", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->colo_host);
            if (rc)
                goto out;
        }
        x = saved_colo_host;
    }
    {
        const libxl__json_object *saved_colo_port = x;
        x = libxl__json_map_get("colo_port", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->colo_port);
            if (rc)
                goto out;
        }
        x = saved_colo_port;
    }
    {
        const libxl__json_object *saved_colo_export = x;
        x = libxl__json_map_get("colo_export", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->colo_export);
            if (rc)
                goto out;
        }
        x = saved_colo_export;
    }
    {
        const libxl__json_object *saved_active_disk = x;
        x = libxl__json_map_get("active_disk", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->active_disk);
            if (rc)
                goto out;
        }
        x = saved_active_disk;
    }
    {
        const libxl__json_object *saved_hidden_disk = x;
        x = libxl__json_map_get("hidden_disk", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->hidden_disk);
            if (rc)
                goto out;
        }
        x = saved_hidden_disk;
    }
    out:
    return rc;
}

int libxl_device_disk_from_json(libxl_ctx *ctx, libxl_device_disk *p, const char *s)
{
    libxl_device_disk_init(p);
    return libxl__object_from_json(ctx, "libxl_device_disk", (libxl__json_parse_callback)&libxl__device_disk_parse_json, p, s);
}

int libxl__device_nic_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_device_nic *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const libxl__json_object *saved_backend_domid = x;
        x = libxl__json_map_get("backend_domid", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->backend_domid);
            if (rc)
                goto out;
        }
        x = saved_backend_domid;
    }
    {
        const libxl__json_object *saved_backend_domname = x;
        x = libxl__json_map_get("backend_domname", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->backend_domname);
            if (rc)
                goto out;
        }
        x = saved_backend_domname;
    }
    {
        const libxl__json_object *saved_devid = x;
        x = libxl__json_map_get("devid", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->devid);
            if (rc)
                goto out;
        }
        x = saved_devid;
    }
    {
        const libxl__json_object *saved_mtu = x;
        x = libxl__json_map_get("mtu", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->mtu);
            if (rc)
                goto out;
        }
        x = saved_mtu;
    }
    {
        const libxl__json_object *saved_model = x;
        x = libxl__json_map_get("model", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->model);
            if (rc)
                goto out;
        }
        x = saved_model;
    }
    {
        const libxl__json_object *saved_mac = x;
        x = libxl__json_map_get("mac", o, JSON_STRING);
        if (x) {
            rc = libxl__mac_parse_json(gc, x, &p->mac);
            if (rc)
                goto out;
        }
        x = saved_mac;
    }
    {
        const libxl__json_object *saved_ip = x;
        x = libxl__json_map_get("ip", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->ip);
            if (rc)
                goto out;
        }
        x = saved_ip;
    }
    {
        const libxl__json_object *saved_bridge = x;
        x = libxl__json_map_get("bridge", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->bridge);
            if (rc)
                goto out;
        }
        x = saved_bridge;
    }
    {
        const libxl__json_object *saved_ifname = x;
        x = libxl__json_map_get("ifname", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->ifname);
            if (rc)
                goto out;
        }
        x = saved_ifname;
    }
    {
        const libxl__json_object *saved_script = x;
        x = libxl__json_map_get("script", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->script);
            if (rc)
                goto out;
        }
        x = saved_script;
    }
    {
        const libxl__json_object *saved_nictype = x;
        x = libxl__json_map_get("nictype", o, JSON_STRING);
        if (x) {
            {
                const char *enum_str;
                if (!libxl__json_object_is_string(x)) {
                    rc = -1;
                    goto out;
                }
                enum_str = libxl__json_object_get_string(x);
                rc = libxl_nic_type_from_string(enum_str, &p->nictype);
                if (rc)
                    goto out;
            }
        }
        x = saved_nictype;
    }
    {
        const libxl__json_object *saved_rate_bytes_per_interval = x;
        x = libxl__json_map_get("rate_bytes_per_interval", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint64_parse_json(gc, x, &p->rate_bytes_per_interval);
            if (rc)
                goto out;
        }
        x = saved_rate_bytes_per_interval;
    }
    {
        const libxl__json_object *saved_rate_interval_usecs = x;
        x = libxl__json_map_get("rate_interval_usecs", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->rate_interval_usecs);
            if (rc)
                goto out;
        }
        x = saved_rate_interval_usecs;
    }
    {
        const libxl__json_object *saved_gatewaydev = x;
        x = libxl__json_map_get("gatewaydev", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->gatewaydev);
            if (rc)
                goto out;
        }
        x = saved_gatewaydev;
    }
    {
        const libxl__json_object *saved_coloft_forwarddev = x;
        x = libxl__json_map_get("coloft_forwarddev", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->coloft_forwarddev);
            if (rc)
                goto out;
        }
        x = saved_coloft_forwarddev;
    }
    {
        const libxl__json_object *saved_colo_sock_mirror_id = x;
        x = libxl__json_map_get("colo_sock_mirror_id", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->colo_sock_mirror_id);
            if (rc)
                goto out;
        }
        x = saved_colo_sock_mirror_id;
    }
    {
        const libxl__json_object *saved_colo_sock_mirror_ip = x;
        x = libxl__json_map_get("colo_sock_mirror_ip", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->colo_sock_mirror_ip);
            if (rc)
                goto out;
        }
        x = saved_colo_sock_mirror_ip;
    }
    {
        const libxl__json_object *saved_colo_sock_mirror_port = x;
        x = libxl__json_map_get("colo_sock_mirror_port", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->colo_sock_mirror_port);
            if (rc)
                goto out;
        }
        x = saved_colo_sock_mirror_port;
    }
    {
        const libxl__json_object *saved_colo_sock_compare_pri_in_id = x;
        x = libxl__json_map_get("colo_sock_compare_pri_in_id", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->colo_sock_compare_pri_in_id);
            if (rc)
                goto out;
        }
        x = saved_colo_sock_compare_pri_in_id;
    }
    {
        const libxl__json_object *saved_colo_sock_compare_pri_in_ip = x;
        x = libxl__json_map_get("colo_sock_compare_pri_in_ip", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->colo_sock_compare_pri_in_ip);
            if (rc)
                goto out;
        }
        x = saved_colo_sock_compare_pri_in_ip;
    }
    {
        const libxl__json_object *saved_colo_sock_compare_pri_in_port = x;
        x = libxl__json_map_get("colo_sock_compare_pri_in_port", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->colo_sock_compare_pri_in_port);
            if (rc)
                goto out;
        }
        x = saved_colo_sock_compare_pri_in_port;
    }
    {
        const libxl__json_object *saved_colo_sock_compare_sec_in_id = x;
        x = libxl__json_map_get("colo_sock_compare_sec_in_id", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->colo_sock_compare_sec_in_id);
            if (rc)
                goto out;
        }
        x = saved_colo_sock_compare_sec_in_id;
    }
    {
        const libxl__json_object *saved_colo_sock_compare_sec_in_ip = x;
        x = libxl__json_map_get("colo_sock_compare_sec_in_ip", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->colo_sock_compare_sec_in_ip);
            if (rc)
                goto out;
        }
        x = saved_colo_sock_compare_sec_in_ip;
    }
    {
        const libxl__json_object *saved_colo_sock_compare_sec_in_port = x;
        x = libxl__json_map_get("colo_sock_compare_sec_in_port", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->colo_sock_compare_sec_in_port);
            if (rc)
                goto out;
        }
        x = saved_colo_sock_compare_sec_in_port;
    }
    {
        const libxl__json_object *saved_colo_sock_compare_notify_id = x;
        x = libxl__json_map_get("colo_sock_compare_notify_id", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->colo_sock_compare_notify_id);
            if (rc)
                goto out;
        }
        x = saved_colo_sock_compare_notify_id;
    }
    {
        const libxl__json_object *saved_colo_sock_compare_notify_ip = x;
        x = libxl__json_map_get("colo_sock_compare_notify_ip", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->colo_sock_compare_notify_ip);
            if (rc)
                goto out;
        }
        x = saved_colo_sock_compare_notify_ip;
    }
    {
        const libxl__json_object *saved_colo_sock_compare_notify_port = x;
        x = libxl__json_map_get("colo_sock_compare_notify_port", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->colo_sock_compare_notify_port);
            if (rc)
                goto out;
        }
        x = saved_colo_sock_compare_notify_port;
    }
    {
        const libxl__json_object *saved_colo_sock_redirector0_id = x;
        x = libxl__json_map_get("colo_sock_redirector0_id", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->colo_sock_redirector0_id);
            if (rc)
                goto out;
        }
        x = saved_colo_sock_redirector0_id;
    }
    {
        const libxl__json_object *saved_colo_sock_redirector0_ip = x;
        x = libxl__json_map_get("colo_sock_redirector0_ip", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->colo_sock_redirector0_ip);
            if (rc)
                goto out;
        }
        x = saved_colo_sock_redirector0_ip;
    }
    {
        const libxl__json_object *saved_colo_sock_redirector0_port = x;
        x = libxl__json_map_get("colo_sock_redirector0_port", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->colo_sock_redirector0_port);
            if (rc)
                goto out;
        }
        x = saved_colo_sock_redirector0_port;
    }
    {
        const libxl__json_object *saved_colo_sock_redirector1_id = x;
        x = libxl__json_map_get("colo_sock_redirector1_id", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->colo_sock_redirector1_id);
            if (rc)
                goto out;
        }
        x = saved_colo_sock_redirector1_id;
    }
    {
        const libxl__json_object *saved_colo_sock_redirector1_ip = x;
        x = libxl__json_map_get("colo_sock_redirector1_ip", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->colo_sock_redirector1_ip);
            if (rc)
                goto out;
        }
        x = saved_colo_sock_redirector1_ip;
    }
    {
        const libxl__json_object *saved_colo_sock_redirector1_port = x;
        x = libxl__json_map_get("colo_sock_redirector1_port", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->colo_sock_redirector1_port);
            if (rc)
                goto out;
        }
        x = saved_colo_sock_redirector1_port;
    }
    {
        const libxl__json_object *saved_colo_sock_redirector2_id = x;
        x = libxl__json_map_get("colo_sock_redirector2_id", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->colo_sock_redirector2_id);
            if (rc)
                goto out;
        }
        x = saved_colo_sock_redirector2_id;
    }
    {
        const libxl__json_object *saved_colo_sock_redirector2_ip = x;
        x = libxl__json_map_get("colo_sock_redirector2_ip", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->colo_sock_redirector2_ip);
            if (rc)
                goto out;
        }
        x = saved_colo_sock_redirector2_ip;
    }
    {
        const libxl__json_object *saved_colo_sock_redirector2_port = x;
        x = libxl__json_map_get("colo_sock_redirector2_port", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->colo_sock_redirector2_port);
            if (rc)
                goto out;
        }
        x = saved_colo_sock_redirector2_port;
    }
    {
        const libxl__json_object *saved_colo_filter_mirror_queue = x;
        x = libxl__json_map_get("colo_filter_mirror_queue", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->colo_filter_mirror_queue);
            if (rc)
                goto out;
        }
        x = saved_colo_filter_mirror_queue;
    }
    {
        const libxl__json_object *saved_colo_filter_mirror_outdev = x;
        x = libxl__json_map_get("colo_filter_mirror_outdev", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->colo_filter_mirror_outdev);
            if (rc)
                goto out;
        }
        x = saved_colo_filter_mirror_outdev;
    }
    {
        const libxl__json_object *saved_colo_filter_redirector0_queue = x;
        x = libxl__json_map_get("colo_filter_redirector0_queue", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->colo_filter_redirector0_queue);
            if (rc)
                goto out;
        }
        x = saved_colo_filter_redirector0_queue;
    }
    {
        const libxl__json_object *saved_colo_filter_redirector0_indev = x;
        x = libxl__json_map_get("colo_filter_redirector0_indev", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->colo_filter_redirector0_indev);
            if (rc)
                goto out;
        }
        x = saved_colo_filter_redirector0_indev;
    }
    {
        const libxl__json_object *saved_colo_filter_redirector0_outdev = x;
        x = libxl__json_map_get("colo_filter_redirector0_outdev", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->colo_filter_redirector0_outdev);
            if (rc)
                goto out;
        }
        x = saved_colo_filter_redirector0_outdev;
    }
    {
        const libxl__json_object *saved_colo_filter_redirector1_queue = x;
        x = libxl__json_map_get("colo_filter_redirector1_queue", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->colo_filter_redirector1_queue);
            if (rc)
                goto out;
        }
        x = saved_colo_filter_redirector1_queue;
    }
    {
        const libxl__json_object *saved_colo_filter_redirector1_indev = x;
        x = libxl__json_map_get("colo_filter_redirector1_indev", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->colo_filter_redirector1_indev);
            if (rc)
                goto out;
        }
        x = saved_colo_filter_redirector1_indev;
    }
    {
        const libxl__json_object *saved_colo_filter_redirector1_outdev = x;
        x = libxl__json_map_get("colo_filter_redirector1_outdev", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->colo_filter_redirector1_outdev);
            if (rc)
                goto out;
        }
        x = saved_colo_filter_redirector1_outdev;
    }
    {
        const libxl__json_object *saved_colo_compare_pri_in = x;
        x = libxl__json_map_get("colo_compare_pri_in", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->colo_compare_pri_in);
            if (rc)
                goto out;
        }
        x = saved_colo_compare_pri_in;
    }
    {
        const libxl__json_object *saved_colo_compare_sec_in = x;
        x = libxl__json_map_get("colo_compare_sec_in", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->colo_compare_sec_in);
            if (rc)
                goto out;
        }
        x = saved_colo_compare_sec_in;
    }
    {
        const libxl__json_object *saved_colo_compare_out = x;
        x = libxl__json_map_get("colo_compare_out", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->colo_compare_out);
            if (rc)
                goto out;
        }
        x = saved_colo_compare_out;
    }
    {
        const libxl__json_object *saved_colo_compare_notify_dev = x;
        x = libxl__json_map_get("colo_compare_notify_dev", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->colo_compare_notify_dev);
            if (rc)
                goto out;
        }
        x = saved_colo_compare_notify_dev;
    }
    {
        const libxl__json_object *saved_colo_sock_sec_redirector0_id = x;
        x = libxl__json_map_get("colo_sock_sec_redirector0_id", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->colo_sock_sec_redirector0_id);
            if (rc)
                goto out;
        }
        x = saved_colo_sock_sec_redirector0_id;
    }
    {
        const libxl__json_object *saved_colo_sock_sec_redirector0_ip = x;
        x = libxl__json_map_get("colo_sock_sec_redirector0_ip", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->colo_sock_sec_redirector0_ip);
            if (rc)
                goto out;
        }
        x = saved_colo_sock_sec_redirector0_ip;
    }
    {
        const libxl__json_object *saved_colo_sock_sec_redirector0_port = x;
        x = libxl__json_map_get("colo_sock_sec_redirector0_port", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->colo_sock_sec_redirector0_port);
            if (rc)
                goto out;
        }
        x = saved_colo_sock_sec_redirector0_port;
    }
    {
        const libxl__json_object *saved_colo_sock_sec_redirector1_id = x;
        x = libxl__json_map_get("colo_sock_sec_redirector1_id", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->colo_sock_sec_redirector1_id);
            if (rc)
                goto out;
        }
        x = saved_colo_sock_sec_redirector1_id;
    }
    {
        const libxl__json_object *saved_colo_sock_sec_redirector1_ip = x;
        x = libxl__json_map_get("colo_sock_sec_redirector1_ip", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->colo_sock_sec_redirector1_ip);
            if (rc)
                goto out;
        }
        x = saved_colo_sock_sec_redirector1_ip;
    }
    {
        const libxl__json_object *saved_colo_sock_sec_redirector1_port = x;
        x = libxl__json_map_get("colo_sock_sec_redirector1_port", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->colo_sock_sec_redirector1_port);
            if (rc)
                goto out;
        }
        x = saved_colo_sock_sec_redirector1_port;
    }
    {
        const libxl__json_object *saved_colo_filter_sec_redirector0_queue = x;
        x = libxl__json_map_get("colo_filter_sec_redirector0_queue", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->colo_filter_sec_redirector0_queue);
            if (rc)
                goto out;
        }
        x = saved_colo_filter_sec_redirector0_queue;
    }
    {
        const libxl__json_object *saved_colo_filter_sec_redirector0_indev = x;
        x = libxl__json_map_get("colo_filter_sec_redirector0_indev", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->colo_filter_sec_redirector0_indev);
            if (rc)
                goto out;
        }
        x = saved_colo_filter_sec_redirector0_indev;
    }
    {
        const libxl__json_object *saved_colo_filter_sec_redirector0_outdev = x;
        x = libxl__json_map_get("colo_filter_sec_redirector0_outdev", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->colo_filter_sec_redirector0_outdev);
            if (rc)
                goto out;
        }
        x = saved_colo_filter_sec_redirector0_outdev;
    }
    {
        const libxl__json_object *saved_colo_filter_sec_redirector1_queue = x;
        x = libxl__json_map_get("colo_filter_sec_redirector1_queue", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->colo_filter_sec_redirector1_queue);
            if (rc)
                goto out;
        }
        x = saved_colo_filter_sec_redirector1_queue;
    }
    {
        const libxl__json_object *saved_colo_filter_sec_redirector1_indev = x;
        x = libxl__json_map_get("colo_filter_sec_redirector1_indev", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->colo_filter_sec_redirector1_indev);
            if (rc)
                goto out;
        }
        x = saved_colo_filter_sec_redirector1_indev;
    }
    {
        const libxl__json_object *saved_colo_filter_sec_redirector1_outdev = x;
        x = libxl__json_map_get("colo_filter_sec_redirector1_outdev", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->colo_filter_sec_redirector1_outdev);
            if (rc)
                goto out;
        }
        x = saved_colo_filter_sec_redirector1_outdev;
    }
    {
        const libxl__json_object *saved_colo_filter_sec_rewriter0_queue = x;
        x = libxl__json_map_get("colo_filter_sec_rewriter0_queue", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->colo_filter_sec_rewriter0_queue);
            if (rc)
                goto out;
        }
        x = saved_colo_filter_sec_rewriter0_queue;
    }
    {
        const libxl__json_object *saved_colo_checkpoint_host = x;
        x = libxl__json_map_get("colo_checkpoint_host", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->colo_checkpoint_host);
            if (rc)
                goto out;
        }
        x = saved_colo_checkpoint_host;
    }
    {
        const libxl__json_object *saved_colo_checkpoint_port = x;
        x = libxl__json_map_get("colo_checkpoint_port", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->colo_checkpoint_port);
            if (rc)
                goto out;
        }
        x = saved_colo_checkpoint_port;
    }
    out:
    return rc;
}

int libxl_device_nic_from_json(libxl_ctx *ctx, libxl_device_nic *p, const char *s)
{
    libxl_device_nic_init(p);
    return libxl__object_from_json(ctx, "libxl_device_nic", (libxl__json_parse_callback)&libxl__device_nic_parse_json, p, s);
}

int libxl__device_pci_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_device_pci *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const libxl__json_object *saved_func = x;
        x = libxl__json_map_get("func", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint8_parse_json(gc, x, &p->func);
            if (rc)
                goto out;
        }
        x = saved_func;
    }
    {
        const libxl__json_object *saved_dev = x;
        x = libxl__json_map_get("dev", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint8_parse_json(gc, x, &p->dev);
            if (rc)
                goto out;
        }
        x = saved_dev;
    }
    {
        const libxl__json_object *saved_bus = x;
        x = libxl__json_map_get("bus", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint8_parse_json(gc, x, &p->bus);
            if (rc)
                goto out;
        }
        x = saved_bus;
    }
    {
        const libxl__json_object *saved_domain = x;
        x = libxl__json_map_get("domain", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->domain);
            if (rc)
                goto out;
        }
        x = saved_domain;
    }
    {
        const libxl__json_object *saved_vdevfn = x;
        x = libxl__json_map_get("vdevfn", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->vdevfn);
            if (rc)
                goto out;
        }
        x = saved_vdevfn;
    }
    {
        const libxl__json_object *saved_vfunc_mask = x;
        x = libxl__json_map_get("vfunc_mask", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->vfunc_mask);
            if (rc)
                goto out;
        }
        x = saved_vfunc_mask;
    }
    {
        const libxl__json_object *saved_msitranslate = x;
        x = libxl__json_map_get("msitranslate", o, JSON_BOOL);
        if (x) {
            rc = libxl__bool_parse_json(gc, x, &p->msitranslate);
            if (rc)
                goto out;
        }
        x = saved_msitranslate;
    }
    {
        const libxl__json_object *saved_power_mgmt = x;
        x = libxl__json_map_get("power_mgmt", o, JSON_BOOL);
        if (x) {
            rc = libxl__bool_parse_json(gc, x, &p->power_mgmt);
            if (rc)
                goto out;
        }
        x = saved_power_mgmt;
    }
    {
        const libxl__json_object *saved_permissive = x;
        x = libxl__json_map_get("permissive", o, JSON_BOOL);
        if (x) {
            rc = libxl__bool_parse_json(gc, x, &p->permissive);
            if (rc)
                goto out;
        }
        x = saved_permissive;
    }
    {
        const libxl__json_object *saved_seize = x;
        x = libxl__json_map_get("seize", o, JSON_BOOL);
        if (x) {
            rc = libxl__bool_parse_json(gc, x, &p->seize);
            if (rc)
                goto out;
        }
        x = saved_seize;
    }
    {
        const libxl__json_object *saved_rdm_policy = x;
        x = libxl__json_map_get("rdm_policy", o, JSON_STRING);
        if (x) {
            {
                const char *enum_str;
                if (!libxl__json_object_is_string(x)) {
                    rc = -1;
                    goto out;
                }
                enum_str = libxl__json_object_get_string(x);
                rc = libxl_rdm_reserve_policy_from_string(enum_str, &p->rdm_policy);
                if (rc)
                    goto out;
            }
        }
        x = saved_rdm_policy;
    }
    out:
    return rc;
}

int libxl_device_pci_from_json(libxl_ctx *ctx, libxl_device_pci *p, const char *s)
{
    libxl_device_pci_init(p);
    return libxl__object_from_json(ctx, "libxl_device_pci", (libxl__json_parse_callback)&libxl__device_pci_parse_json, p, s);
}

int libxl__device_rdm_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_device_rdm *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const libxl__json_object *saved_start = x;
        x = libxl__json_map_get("start", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint64_parse_json(gc, x, &p->start);
            if (rc)
                goto out;
        }
        x = saved_start;
    }
    {
        const libxl__json_object *saved_size = x;
        x = libxl__json_map_get("size", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint64_parse_json(gc, x, &p->size);
            if (rc)
                goto out;
        }
        x = saved_size;
    }
    {
        const libxl__json_object *saved_policy = x;
        x = libxl__json_map_get("policy", o, JSON_STRING);
        if (x) {
            {
                const char *enum_str;
                if (!libxl__json_object_is_string(x)) {
                    rc = -1;
                    goto out;
                }
                enum_str = libxl__json_object_get_string(x);
                rc = libxl_rdm_reserve_policy_from_string(enum_str, &p->policy);
                if (rc)
                    goto out;
            }
        }
        x = saved_policy;
    }
    out:
    return rc;
}

int libxl_device_rdm_from_json(libxl_ctx *ctx, libxl_device_rdm *p, const char *s)
{
    libxl_device_rdm_init(p);
    return libxl__object_from_json(ctx, "libxl_device_rdm", (libxl__json_parse_callback)&libxl__device_rdm_parse_json, p, s);
}

int libxl__usbctrl_type_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_usbctrl_type *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const char *enum_str;
        if (!libxl__json_object_is_string(o)) {
            rc = -1;
            goto out;
        }
        enum_str = libxl__json_object_get_string(o);
        rc = libxl_usbctrl_type_from_string(enum_str, p);
        if (rc)
            goto out;
    }
    out:
    return rc;
}

int libxl_usbctrl_type_from_json(libxl_ctx *ctx, libxl_usbctrl_type *p, const char *s)
{
    return libxl__object_from_json(ctx, "libxl_usbctrl_type", (libxl__json_parse_callback)&libxl__usbctrl_type_parse_json, p, s);
}

int libxl__usbdev_type_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_usbdev_type *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const char *enum_str;
        if (!libxl__json_object_is_string(o)) {
            rc = -1;
            goto out;
        }
        enum_str = libxl__json_object_get_string(o);
        rc = libxl_usbdev_type_from_string(enum_str, p);
        if (rc)
            goto out;
    }
    out:
    return rc;
}

int libxl_usbdev_type_from_json(libxl_ctx *ctx, libxl_usbdev_type *p, const char *s)
{
    return libxl__object_from_json(ctx, "libxl_usbdev_type", (libxl__json_parse_callback)&libxl__usbdev_type_parse_json, p, s);
}

int libxl__device_usbctrl_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_device_usbctrl *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const libxl__json_object *saved_type = x;
        x = libxl__json_map_get("type", o, JSON_STRING);
        if (x) {
            {
                const char *enum_str;
                if (!libxl__json_object_is_string(x)) {
                    rc = -1;
                    goto out;
                }
                enum_str = libxl__json_object_get_string(x);
                rc = libxl_usbctrl_type_from_string(enum_str, &p->type);
                if (rc)
                    goto out;
            }
        }
        x = saved_type;
    }
    {
        const libxl__json_object *saved_devid = x;
        x = libxl__json_map_get("devid", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->devid);
            if (rc)
                goto out;
        }
        x = saved_devid;
    }
    {
        const libxl__json_object *saved_version = x;
        x = libxl__json_map_get("version", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->version);
            if (rc)
                goto out;
        }
        x = saved_version;
    }
    {
        const libxl__json_object *saved_ports = x;
        x = libxl__json_map_get("ports", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->ports);
            if (rc)
                goto out;
        }
        x = saved_ports;
    }
    {
        const libxl__json_object *saved_backend_domid = x;
        x = libxl__json_map_get("backend_domid", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->backend_domid);
            if (rc)
                goto out;
        }
        x = saved_backend_domid;
    }
    {
        const libxl__json_object *saved_backend_domname = x;
        x = libxl__json_map_get("backend_domname", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->backend_domname);
            if (rc)
                goto out;
        }
        x = saved_backend_domname;
    }
    out:
    return rc;
}

int libxl_device_usbctrl_from_json(libxl_ctx *ctx, libxl_device_usbctrl *p, const char *s)
{
    libxl_device_usbctrl_init(p);
    return libxl__object_from_json(ctx, "libxl_device_usbctrl", (libxl__json_parse_callback)&libxl__device_usbctrl_parse_json, p, s);
}

int libxl__device_usbdev_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_device_usbdev *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const libxl__json_object *saved_ctrl = x;
        x = libxl__json_map_get("ctrl", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->ctrl);
            if (rc)
                goto out;
        }
        x = saved_ctrl;
    }
    {
        const libxl__json_object *saved_port = x;
        x = libxl__json_map_get("port", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->port);
            if (rc)
                goto out;
        }
        x = saved_port;
    }
    {
        const libxl__json_object *saved_u = x;
        x = libxl__json_map_get("type.hostdev", o, JSON_MAP);
        if (x) {
            libxl_device_usbdev_init_type(p, LIBXL_USBDEV_TYPE_HOSTDEV);
            {
                const libxl__json_object *saved_hostbus = x;
                x = libxl__json_map_get("hostbus", x, JSON_INTEGER);
                if (x) {
                    rc = libxl__uint8_parse_json(gc, x, &p->u.hostdev.hostbus);
                    if (rc)
                        goto out;
                }
                x = saved_hostbus;
            }
            {
                const libxl__json_object *saved_hostaddr = x;
                x = libxl__json_map_get("hostaddr", x, JSON_INTEGER);
                if (x) {
                    rc = libxl__uint8_parse_json(gc, x, &p->u.hostdev.hostaddr);
                    if (rc)
                        goto out;
                }
                x = saved_hostaddr;
            }
        }
        x = saved_u;
    }
    out:
    return rc;
}

int libxl_device_usbdev_from_json(libxl_ctx *ctx, libxl_device_usbdev *p, const char *s)
{
    libxl_device_usbdev_init(p);
    return libxl__object_from_json(ctx, "libxl_device_usbdev", (libxl__json_parse_callback)&libxl__device_usbdev_parse_json, p, s);
}

int libxl__device_dtdev_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_device_dtdev *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const libxl__json_object *saved_path = x;
        x = libxl__json_map_get("path", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->path);
            if (rc)
                goto out;
        }
        x = saved_path;
    }
    out:
    return rc;
}

int libxl_device_dtdev_from_json(libxl_ctx *ctx, libxl_device_dtdev *p, const char *s)
{
    libxl_device_dtdev_init(p);
    return libxl__object_from_json(ctx, "libxl_device_dtdev", (libxl__json_parse_callback)&libxl__device_dtdev_parse_json, p, s);
}

int libxl__device_vtpm_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_device_vtpm *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const libxl__json_object *saved_backend_domid = x;
        x = libxl__json_map_get("backend_domid", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->backend_domid);
            if (rc)
                goto out;
        }
        x = saved_backend_domid;
    }
    {
        const libxl__json_object *saved_backend_domname = x;
        x = libxl__json_map_get("backend_domname", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->backend_domname);
            if (rc)
                goto out;
        }
        x = saved_backend_domname;
    }
    {
        const libxl__json_object *saved_devid = x;
        x = libxl__json_map_get("devid", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->devid);
            if (rc)
                goto out;
        }
        x = saved_devid;
    }
    {
        const libxl__json_object *saved_uuid = x;
        x = libxl__json_map_get("uuid", o, JSON_STRING);
        if (x) {
            rc = libxl__uuid_parse_json(gc, x, &p->uuid);
            if (rc)
                goto out;
        }
        x = saved_uuid;
    }
    out:
    return rc;
}

int libxl_device_vtpm_from_json(libxl_ctx *ctx, libxl_device_vtpm *p, const char *s)
{
    libxl_device_vtpm_init(p);
    return libxl__object_from_json(ctx, "libxl_device_vtpm", (libxl__json_parse_callback)&libxl__device_vtpm_parse_json, p, s);
}

int libxl__device_p9_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_device_p9 *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const libxl__json_object *saved_backend_domid = x;
        x = libxl__json_map_get("backend_domid", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->backend_domid);
            if (rc)
                goto out;
        }
        x = saved_backend_domid;
    }
    {
        const libxl__json_object *saved_backend_domname = x;
        x = libxl__json_map_get("backend_domname", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->backend_domname);
            if (rc)
                goto out;
        }
        x = saved_backend_domname;
    }
    {
        const libxl__json_object *saved_tag = x;
        x = libxl__json_map_get("tag", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->tag);
            if (rc)
                goto out;
        }
        x = saved_tag;
    }
    {
        const libxl__json_object *saved_path = x;
        x = libxl__json_map_get("path", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->path);
            if (rc)
                goto out;
        }
        x = saved_path;
    }
    {
        const libxl__json_object *saved_security_model = x;
        x = libxl__json_map_get("security_model", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->security_model);
            if (rc)
                goto out;
        }
        x = saved_security_model;
    }
    {
        const libxl__json_object *saved_devid = x;
        x = libxl__json_map_get("devid", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->devid);
            if (rc)
                goto out;
        }
        x = saved_devid;
    }
    out:
    return rc;
}

int libxl_device_p9_from_json(libxl_ctx *ctx, libxl_device_p9 *p, const char *s)
{
    libxl_device_p9_init(p);
    return libxl__object_from_json(ctx, "libxl_device_p9", (libxl__json_parse_callback)&libxl__device_p9_parse_json, p, s);
}

int libxl__device_channel_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_device_channel *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const libxl__json_object *saved_backend_domid = x;
        x = libxl__json_map_get("backend_domid", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->backend_domid);
            if (rc)
                goto out;
        }
        x = saved_backend_domid;
    }
    {
        const libxl__json_object *saved_backend_domname = x;
        x = libxl__json_map_get("backend_domname", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->backend_domname);
            if (rc)
                goto out;
        }
        x = saved_backend_domname;
    }
    {
        const libxl__json_object *saved_devid = x;
        x = libxl__json_map_get("devid", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->devid);
            if (rc)
                goto out;
        }
        x = saved_devid;
    }
    {
        const libxl__json_object *saved_name = x;
        x = libxl__json_map_get("name", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->name);
            if (rc)
                goto out;
        }
        x = saved_name;
    }
    {
        const libxl__json_object *saved_u = x;
        x = libxl__json_map_get("connection.unknown", o, JSON_MAP);
        if (x) {
            libxl_device_channel_init_connection(p, LIBXL_CHANNEL_CONNECTION_UNKNOWN);
        }
        x = libxl__json_map_get("connection.pty", o, JSON_MAP);
        if (x) {
            libxl_device_channel_init_connection(p, LIBXL_CHANNEL_CONNECTION_PTY);
        }
        x = libxl__json_map_get("connection.socket", o, JSON_MAP);
        if (x) {
            libxl_device_channel_init_connection(p, LIBXL_CHANNEL_CONNECTION_SOCKET);
            {
                const libxl__json_object *saved_path = x;
                x = libxl__json_map_get("path", x, JSON_STRING | JSON_NULL);
                if (x) {
                    rc = libxl__string_parse_json(gc, x, &p->u.socket.path);
                    if (rc)
                        goto out;
                }
                x = saved_path;
            }
        }
        x = saved_u;
    }
    out:
    return rc;
}

int libxl_device_channel_from_json(libxl_ctx *ctx, libxl_device_channel *p, const char *s)
{
    libxl_device_channel_init(p);
    return libxl__object_from_json(ctx, "libxl_device_channel", (libxl__json_parse_callback)&libxl__device_channel_parse_json, p, s);
}

int libxl__connector_param_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_connector_param *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const libxl__json_object *saved_id = x;
        x = libxl__json_map_get("id", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->id);
            if (rc)
                goto out;
        }
        x = saved_id;
    }
    {
        const libxl__json_object *saved_width = x;
        x = libxl__json_map_get("width", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->width);
            if (rc)
                goto out;
        }
        x = saved_width;
    }
    {
        const libxl__json_object *saved_height = x;
        x = libxl__json_map_get("height", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->height);
            if (rc)
                goto out;
        }
        x = saved_height;
    }
    out:
    return rc;
}

int libxl_connector_param_from_json(libxl_ctx *ctx, libxl_connector_param *p, const char *s)
{
    libxl_connector_param_init(p);
    return libxl__object_from_json(ctx, "libxl_connector_param", (libxl__json_parse_callback)&libxl__connector_param_parse_json, p, s);
}

int libxl__device_vdispl_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_device_vdispl *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const libxl__json_object *saved_backend_domid = x;
        x = libxl__json_map_get("backend_domid", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->backend_domid);
            if (rc)
                goto out;
        }
        x = saved_backend_domid;
    }
    {
        const libxl__json_object *saved_backend_domname = x;
        x = libxl__json_map_get("backend_domname", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->backend_domname);
            if (rc)
                goto out;
        }
        x = saved_backend_domname;
    }
    {
        const libxl__json_object *saved_devid = x;
        x = libxl__json_map_get("devid", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->devid);
            if (rc)
                goto out;
        }
        x = saved_devid;
    }
    {
        const libxl__json_object *saved_be_alloc = x;
        x = libxl__json_map_get("be_alloc", o, JSON_BOOL);
        if (x) {
            rc = libxl__bool_parse_json(gc, x, &p->be_alloc);
            if (rc)
                goto out;
        }
        x = saved_be_alloc;
    }
    {
        const libxl__json_object *saved_connectors = x;
        x = libxl__json_map_get("connectors", o, JSON_ARRAY);
        if (x) {
            {
                libxl__json_object *t;
                int i;
                if (!libxl__json_object_is_array(x)) {
                    rc = -1;
                    goto out;
                }
                p->num_connectors = x->u.array->count;
                p->connectors = libxl__calloc(NOGC, p->num_connectors, sizeof(*p->connectors));
                if (!p->connectors && p->num_connectors != 0) {
                    rc = -1;
                    goto out;
                }
                for (i=0; (t=libxl__json_array_get(x,i)); i++) {
                        rc = libxl__connector_param_parse_json(gc, t, &p->connectors[i]);
                        if (rc)
                            goto out;
                }
                if (i != p->num_connectors) {
                    rc = -1;
                    goto out;
                }
            }
        }
        x = saved_connectors;
    }
    out:
    return rc;
}

int libxl_device_vdispl_from_json(libxl_ctx *ctx, libxl_device_vdispl *p, const char *s)
{
    libxl_device_vdispl_init(p);
    return libxl__object_from_json(ctx, "libxl_device_vdispl", (libxl__json_parse_callback)&libxl__device_vdispl_parse_json, p, s);
}

int libxl__domain_config_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_domain_config *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const libxl__json_object *saved_c_info = x;
        x = libxl__json_map_get("c_info", o, JSON_MAP);
        if (x) {
            rc = libxl__domain_create_info_parse_json(gc, x, &p->c_info);
            if (rc)
                goto out;
        }
        x = saved_c_info;
    }
    {
        const libxl__json_object *saved_b_info = x;
        x = libxl__json_map_get("b_info", o, JSON_MAP);
        if (x) {
            rc = libxl__domain_build_info_parse_json(gc, x, &p->b_info);
            if (rc)
                goto out;
        }
        x = saved_b_info;
    }
    {
        const libxl__json_object *saved_disks = x;
        x = libxl__json_map_get("disks", o, JSON_ARRAY);
        if (x) {
            {
                libxl__json_object *t;
                int i;
                if (!libxl__json_object_is_array(x)) {
                    rc = -1;
                    goto out;
                }
                p->num_disks = x->u.array->count;
                p->disks = libxl__calloc(NOGC, p->num_disks, sizeof(*p->disks));
                if (!p->disks && p->num_disks != 0) {
                    rc = -1;
                    goto out;
                }
                for (i=0; (t=libxl__json_array_get(x,i)); i++) {
                        rc = libxl__device_disk_parse_json(gc, t, &p->disks[i]);
                        if (rc)
                            goto out;
                }
                if (i != p->num_disks) {
                    rc = -1;
                    goto out;
                }
            }
        }
        x = saved_disks;
    }
    {
        const libxl__json_object *saved_nics = x;
        x = libxl__json_map_get("nics", o, JSON_ARRAY);
        if (x) {
            {
                libxl__json_object *t;
                int i;
                if (!libxl__json_object_is_array(x)) {
                    rc = -1;
                    goto out;
                }
                p->num_nics = x->u.array->count;
                p->nics = libxl__calloc(NOGC, p->num_nics, sizeof(*p->nics));
                if (!p->nics && p->num_nics != 0) {
                    rc = -1;
                    goto out;
                }
                for (i=0; (t=libxl__json_array_get(x,i)); i++) {
                        rc = libxl__device_nic_parse_json(gc, t, &p->nics[i]);
                        if (rc)
                            goto out;
                }
                if (i != p->num_nics) {
                    rc = -1;
                    goto out;
                }
            }
        }
        x = saved_nics;
    }
    {
        const libxl__json_object *saved_pcidevs = x;
        x = libxl__json_map_get("pcidevs", o, JSON_ARRAY);
        if (x) {
            {
                libxl__json_object *t;
                int i;
                if (!libxl__json_object_is_array(x)) {
                    rc = -1;
                    goto out;
                }
                p->num_pcidevs = x->u.array->count;
                p->pcidevs = libxl__calloc(NOGC, p->num_pcidevs, sizeof(*p->pcidevs));
                if (!p->pcidevs && p->num_pcidevs != 0) {
                    rc = -1;
                    goto out;
                }
                for (i=0; (t=libxl__json_array_get(x,i)); i++) {
                        rc = libxl__device_pci_parse_json(gc, t, &p->pcidevs[i]);
                        if (rc)
                            goto out;
                }
                if (i != p->num_pcidevs) {
                    rc = -1;
                    goto out;
                }
            }
        }
        x = saved_pcidevs;
    }
    {
        const libxl__json_object *saved_rdms = x;
        x = libxl__json_map_get("rdms", o, JSON_ARRAY);
        if (x) {
            {
                libxl__json_object *t;
                int i;
                if (!libxl__json_object_is_array(x)) {
                    rc = -1;
                    goto out;
                }
                p->num_rdms = x->u.array->count;
                p->rdms = libxl__calloc(NOGC, p->num_rdms, sizeof(*p->rdms));
                if (!p->rdms && p->num_rdms != 0) {
                    rc = -1;
                    goto out;
                }
                for (i=0; (t=libxl__json_array_get(x,i)); i++) {
                        rc = libxl__device_rdm_parse_json(gc, t, &p->rdms[i]);
                        if (rc)
                            goto out;
                }
                if (i != p->num_rdms) {
                    rc = -1;
                    goto out;
                }
            }
        }
        x = saved_rdms;
    }
    {
        const libxl__json_object *saved_dtdevs = x;
        x = libxl__json_map_get("dtdevs", o, JSON_ARRAY);
        if (x) {
            {
                libxl__json_object *t;
                int i;
                if (!libxl__json_object_is_array(x)) {
                    rc = -1;
                    goto out;
                }
                p->num_dtdevs = x->u.array->count;
                p->dtdevs = libxl__calloc(NOGC, p->num_dtdevs, sizeof(*p->dtdevs));
                if (!p->dtdevs && p->num_dtdevs != 0) {
                    rc = -1;
                    goto out;
                }
                for (i=0; (t=libxl__json_array_get(x,i)); i++) {
                        rc = libxl__device_dtdev_parse_json(gc, t, &p->dtdevs[i]);
                        if (rc)
                            goto out;
                }
                if (i != p->num_dtdevs) {
                    rc = -1;
                    goto out;
                }
            }
        }
        x = saved_dtdevs;
    }
    {
        const libxl__json_object *saved_vfbs = x;
        x = libxl__json_map_get("vfbs", o, JSON_ARRAY);
        if (x) {
            {
                libxl__json_object *t;
                int i;
                if (!libxl__json_object_is_array(x)) {
                    rc = -1;
                    goto out;
                }
                p->num_vfbs = x->u.array->count;
                p->vfbs = libxl__calloc(NOGC, p->num_vfbs, sizeof(*p->vfbs));
                if (!p->vfbs && p->num_vfbs != 0) {
                    rc = -1;
                    goto out;
                }
                for (i=0; (t=libxl__json_array_get(x,i)); i++) {
                        rc = libxl__device_vfb_parse_json(gc, t, &p->vfbs[i]);
                        if (rc)
                            goto out;
                }
                if (i != p->num_vfbs) {
                    rc = -1;
                    goto out;
                }
            }
        }
        x = saved_vfbs;
    }
    {
        const libxl__json_object *saved_vkbs = x;
        x = libxl__json_map_get("vkbs", o, JSON_ARRAY);
        if (x) {
            {
                libxl__json_object *t;
                int i;
                if (!libxl__json_object_is_array(x)) {
                    rc = -1;
                    goto out;
                }
                p->num_vkbs = x->u.array->count;
                p->vkbs = libxl__calloc(NOGC, p->num_vkbs, sizeof(*p->vkbs));
                if (!p->vkbs && p->num_vkbs != 0) {
                    rc = -1;
                    goto out;
                }
                for (i=0; (t=libxl__json_array_get(x,i)); i++) {
                        rc = libxl__device_vkb_parse_json(gc, t, &p->vkbs[i]);
                        if (rc)
                            goto out;
                }
                if (i != p->num_vkbs) {
                    rc = -1;
                    goto out;
                }
            }
        }
        x = saved_vkbs;
    }
    {
        const libxl__json_object *saved_vtpms = x;
        x = libxl__json_map_get("vtpms", o, JSON_ARRAY);
        if (x) {
            {
                libxl__json_object *t;
                int i;
                if (!libxl__json_object_is_array(x)) {
                    rc = -1;
                    goto out;
                }
                p->num_vtpms = x->u.array->count;
                p->vtpms = libxl__calloc(NOGC, p->num_vtpms, sizeof(*p->vtpms));
                if (!p->vtpms && p->num_vtpms != 0) {
                    rc = -1;
                    goto out;
                }
                for (i=0; (t=libxl__json_array_get(x,i)); i++) {
                        rc = libxl__device_vtpm_parse_json(gc, t, &p->vtpms[i]);
                        if (rc)
                            goto out;
                }
                if (i != p->num_vtpms) {
                    rc = -1;
                    goto out;
                }
            }
        }
        x = saved_vtpms;
    }
    {
        const libxl__json_object *saved_p9s = x;
        x = libxl__json_map_get("p9s", o, JSON_ARRAY);
        if (x) {
            {
                libxl__json_object *t;
                int i;
                if (!libxl__json_object_is_array(x)) {
                    rc = -1;
                    goto out;
                }
                p->num_p9s = x->u.array->count;
                p->p9s = libxl__calloc(NOGC, p->num_p9s, sizeof(*p->p9s));
                if (!p->p9s && p->num_p9s != 0) {
                    rc = -1;
                    goto out;
                }
                for (i=0; (t=libxl__json_array_get(x,i)); i++) {
                        rc = libxl__device_p9_parse_json(gc, t, &p->p9s[i]);
                        if (rc)
                            goto out;
                }
                if (i != p->num_p9s) {
                    rc = -1;
                    goto out;
                }
            }
        }
        x = saved_p9s;
    }
    {
        const libxl__json_object *saved_vdispls = x;
        x = libxl__json_map_get("vdispls", o, JSON_ARRAY);
        if (x) {
            {
                libxl__json_object *t;
                int i;
                if (!libxl__json_object_is_array(x)) {
                    rc = -1;
                    goto out;
                }
                p->num_vdispls = x->u.array->count;
                p->vdispls = libxl__calloc(NOGC, p->num_vdispls, sizeof(*p->vdispls));
                if (!p->vdispls && p->num_vdispls != 0) {
                    rc = -1;
                    goto out;
                }
                for (i=0; (t=libxl__json_array_get(x,i)); i++) {
                        rc = libxl__device_vdispl_parse_json(gc, t, &p->vdispls[i]);
                        if (rc)
                            goto out;
                }
                if (i != p->num_vdispls) {
                    rc = -1;
                    goto out;
                }
            }
        }
        x = saved_vdispls;
    }
    {
        const libxl__json_object *saved_channels = x;
        x = libxl__json_map_get("channels", o, JSON_ARRAY);
        if (x) {
            {
                libxl__json_object *t;
                int i;
                if (!libxl__json_object_is_array(x)) {
                    rc = -1;
                    goto out;
                }
                p->num_channels = x->u.array->count;
                p->channels = libxl__calloc(NOGC, p->num_channels, sizeof(*p->channels));
                if (!p->channels && p->num_channels != 0) {
                    rc = -1;
                    goto out;
                }
                for (i=0; (t=libxl__json_array_get(x,i)); i++) {
                        rc = libxl__device_channel_parse_json(gc, t, &p->channels[i]);
                        if (rc)
                            goto out;
                }
                if (i != p->num_channels) {
                    rc = -1;
                    goto out;
                }
            }
        }
        x = saved_channels;
    }
    {
        const libxl__json_object *saved_usbctrls = x;
        x = libxl__json_map_get("usbctrls", o, JSON_ARRAY);
        if (x) {
            {
                libxl__json_object *t;
                int i;
                if (!libxl__json_object_is_array(x)) {
                    rc = -1;
                    goto out;
                }
                p->num_usbctrls = x->u.array->count;
                p->usbctrls = libxl__calloc(NOGC, p->num_usbctrls, sizeof(*p->usbctrls));
                if (!p->usbctrls && p->num_usbctrls != 0) {
                    rc = -1;
                    goto out;
                }
                for (i=0; (t=libxl__json_array_get(x,i)); i++) {
                        rc = libxl__device_usbctrl_parse_json(gc, t, &p->usbctrls[i]);
                        if (rc)
                            goto out;
                }
                if (i != p->num_usbctrls) {
                    rc = -1;
                    goto out;
                }
            }
        }
        x = saved_usbctrls;
    }
    {
        const libxl__json_object *saved_usbdevs = x;
        x = libxl__json_map_get("usbdevs", o, JSON_ARRAY);
        if (x) {
            {
                libxl__json_object *t;
                int i;
                if (!libxl__json_object_is_array(x)) {
                    rc = -1;
                    goto out;
                }
                p->num_usbdevs = x->u.array->count;
                p->usbdevs = libxl__calloc(NOGC, p->num_usbdevs, sizeof(*p->usbdevs));
                if (!p->usbdevs && p->num_usbdevs != 0) {
                    rc = -1;
                    goto out;
                }
                for (i=0; (t=libxl__json_array_get(x,i)); i++) {
                        rc = libxl__device_usbdev_parse_json(gc, t, &p->usbdevs[i]);
                        if (rc)
                            goto out;
                }
                if (i != p->num_usbdevs) {
                    rc = -1;
                    goto out;
                }
            }
        }
        x = saved_usbdevs;
    }
    {
        const libxl__json_object *saved_on_poweroff = x;
        x = libxl__json_map_get("on_poweroff", o, JSON_STRING);
        if (x) {
            {
                const char *enum_str;
                if (!libxl__json_object_is_string(x)) {
                    rc = -1;
                    goto out;
                }
                enum_str = libxl__json_object_get_string(x);
                rc = libxl_action_on_shutdown_from_string(enum_str, &p->on_poweroff);
                if (rc)
                    goto out;
            }
        }
        x = saved_on_poweroff;
    }
    {
        const libxl__json_object *saved_on_reboot = x;
        x = libxl__json_map_get("on_reboot", o, JSON_STRING);
        if (x) {
            {
                const char *enum_str;
                if (!libxl__json_object_is_string(x)) {
                    rc = -1;
                    goto out;
                }
                enum_str = libxl__json_object_get_string(x);
                rc = libxl_action_on_shutdown_from_string(enum_str, &p->on_reboot);
                if (rc)
                    goto out;
            }
        }
        x = saved_on_reboot;
    }
    {
        const libxl__json_object *saved_on_watchdog = x;
        x = libxl__json_map_get("on_watchdog", o, JSON_STRING);
        if (x) {
            {
                const char *enum_str;
                if (!libxl__json_object_is_string(x)) {
                    rc = -1;
                    goto out;
                }
                enum_str = libxl__json_object_get_string(x);
                rc = libxl_action_on_shutdown_from_string(enum_str, &p->on_watchdog);
                if (rc)
                    goto out;
            }
        }
        x = saved_on_watchdog;
    }
    {
        const libxl__json_object *saved_on_crash = x;
        x = libxl__json_map_get("on_crash", o, JSON_STRING);
        if (x) {
            {
                const char *enum_str;
                if (!libxl__json_object_is_string(x)) {
                    rc = -1;
                    goto out;
                }
                enum_str = libxl__json_object_get_string(x);
                rc = libxl_action_on_shutdown_from_string(enum_str, &p->on_crash);
                if (rc)
                    goto out;
            }
        }
        x = saved_on_crash;
    }
    {
        const libxl__json_object *saved_on_soft_reset = x;
        x = libxl__json_map_get("on_soft_reset", o, JSON_STRING);
        if (x) {
            {
                const char *enum_str;
                if (!libxl__json_object_is_string(x)) {
                    rc = -1;
                    goto out;
                }
                enum_str = libxl__json_object_get_string(x);
                rc = libxl_action_on_shutdown_from_string(enum_str, &p->on_soft_reset);
                if (rc)
                    goto out;
            }
        }
        x = saved_on_soft_reset;
    }
    out:
    return rc;
}

int libxl_domain_config_from_json(libxl_ctx *ctx, libxl_domain_config *p, const char *s)
{
    libxl_domain_config_init(p);
    return libxl__object_from_json(ctx, "libxl_domain_config", (libxl__json_parse_callback)&libxl__domain_config_parse_json, p, s);
}

int libxl__diskinfo_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_diskinfo *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const libxl__json_object *saved_backend = x;
        x = libxl__json_map_get("backend", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->backend);
            if (rc)
                goto out;
        }
        x = saved_backend;
    }
    {
        const libxl__json_object *saved_backend_id = x;
        x = libxl__json_map_get("backend_id", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->backend_id);
            if (rc)
                goto out;
        }
        x = saved_backend_id;
    }
    {
        const libxl__json_object *saved_frontend = x;
        x = libxl__json_map_get("frontend", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->frontend);
            if (rc)
                goto out;
        }
        x = saved_frontend;
    }
    {
        const libxl__json_object *saved_frontend_id = x;
        x = libxl__json_map_get("frontend_id", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->frontend_id);
            if (rc)
                goto out;
        }
        x = saved_frontend_id;
    }
    {
        const libxl__json_object *saved_devid = x;
        x = libxl__json_map_get("devid", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->devid);
            if (rc)
                goto out;
        }
        x = saved_devid;
    }
    {
        const libxl__json_object *saved_state = x;
        x = libxl__json_map_get("state", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->state);
            if (rc)
                goto out;
        }
        x = saved_state;
    }
    {
        const libxl__json_object *saved_evtch = x;
        x = libxl__json_map_get("evtch", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->evtch);
            if (rc)
                goto out;
        }
        x = saved_evtch;
    }
    {
        const libxl__json_object *saved_rref = x;
        x = libxl__json_map_get("rref", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->rref);
            if (rc)
                goto out;
        }
        x = saved_rref;
    }
    out:
    return rc;
}

int libxl_diskinfo_from_json(libxl_ctx *ctx, libxl_diskinfo *p, const char *s)
{
    libxl_diskinfo_init(p);
    return libxl__object_from_json(ctx, "libxl_diskinfo", (libxl__json_parse_callback)&libxl__diskinfo_parse_json, p, s);
}

int libxl__nicinfo_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_nicinfo *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const libxl__json_object *saved_backend = x;
        x = libxl__json_map_get("backend", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->backend);
            if (rc)
                goto out;
        }
        x = saved_backend;
    }
    {
        const libxl__json_object *saved_backend_id = x;
        x = libxl__json_map_get("backend_id", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->backend_id);
            if (rc)
                goto out;
        }
        x = saved_backend_id;
    }
    {
        const libxl__json_object *saved_frontend = x;
        x = libxl__json_map_get("frontend", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->frontend);
            if (rc)
                goto out;
        }
        x = saved_frontend;
    }
    {
        const libxl__json_object *saved_frontend_id = x;
        x = libxl__json_map_get("frontend_id", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->frontend_id);
            if (rc)
                goto out;
        }
        x = saved_frontend_id;
    }
    {
        const libxl__json_object *saved_devid = x;
        x = libxl__json_map_get("devid", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->devid);
            if (rc)
                goto out;
        }
        x = saved_devid;
    }
    {
        const libxl__json_object *saved_state = x;
        x = libxl__json_map_get("state", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->state);
            if (rc)
                goto out;
        }
        x = saved_state;
    }
    {
        const libxl__json_object *saved_evtch = x;
        x = libxl__json_map_get("evtch", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->evtch);
            if (rc)
                goto out;
        }
        x = saved_evtch;
    }
    {
        const libxl__json_object *saved_rref_tx = x;
        x = libxl__json_map_get("rref_tx", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->rref_tx);
            if (rc)
                goto out;
        }
        x = saved_rref_tx;
    }
    {
        const libxl__json_object *saved_rref_rx = x;
        x = libxl__json_map_get("rref_rx", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->rref_rx);
            if (rc)
                goto out;
        }
        x = saved_rref_rx;
    }
    out:
    return rc;
}

int libxl_nicinfo_from_json(libxl_ctx *ctx, libxl_nicinfo *p, const char *s)
{
    libxl_nicinfo_init(p);
    return libxl__object_from_json(ctx, "libxl_nicinfo", (libxl__json_parse_callback)&libxl__nicinfo_parse_json, p, s);
}

int libxl__vtpminfo_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_vtpminfo *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const libxl__json_object *saved_backend = x;
        x = libxl__json_map_get("backend", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->backend);
            if (rc)
                goto out;
        }
        x = saved_backend;
    }
    {
        const libxl__json_object *saved_backend_id = x;
        x = libxl__json_map_get("backend_id", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->backend_id);
            if (rc)
                goto out;
        }
        x = saved_backend_id;
    }
    {
        const libxl__json_object *saved_frontend = x;
        x = libxl__json_map_get("frontend", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->frontend);
            if (rc)
                goto out;
        }
        x = saved_frontend;
    }
    {
        const libxl__json_object *saved_frontend_id = x;
        x = libxl__json_map_get("frontend_id", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->frontend_id);
            if (rc)
                goto out;
        }
        x = saved_frontend_id;
    }
    {
        const libxl__json_object *saved_devid = x;
        x = libxl__json_map_get("devid", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->devid);
            if (rc)
                goto out;
        }
        x = saved_devid;
    }
    {
        const libxl__json_object *saved_state = x;
        x = libxl__json_map_get("state", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->state);
            if (rc)
                goto out;
        }
        x = saved_state;
    }
    {
        const libxl__json_object *saved_evtch = x;
        x = libxl__json_map_get("evtch", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->evtch);
            if (rc)
                goto out;
        }
        x = saved_evtch;
    }
    {
        const libxl__json_object *saved_rref = x;
        x = libxl__json_map_get("rref", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->rref);
            if (rc)
                goto out;
        }
        x = saved_rref;
    }
    {
        const libxl__json_object *saved_uuid = x;
        x = libxl__json_map_get("uuid", o, JSON_STRING);
        if (x) {
            rc = libxl__uuid_parse_json(gc, x, &p->uuid);
            if (rc)
                goto out;
        }
        x = saved_uuid;
    }
    out:
    return rc;
}

int libxl_vtpminfo_from_json(libxl_ctx *ctx, libxl_vtpminfo *p, const char *s)
{
    libxl_vtpminfo_init(p);
    return libxl__object_from_json(ctx, "libxl_vtpminfo", (libxl__json_parse_callback)&libxl__vtpminfo_parse_json, p, s);
}

int libxl__usbctrlinfo_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_usbctrlinfo *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const libxl__json_object *saved_type = x;
        x = libxl__json_map_get("type", o, JSON_STRING);
        if (x) {
            {
                const char *enum_str;
                if (!libxl__json_object_is_string(x)) {
                    rc = -1;
                    goto out;
                }
                enum_str = libxl__json_object_get_string(x);
                rc = libxl_usbctrl_type_from_string(enum_str, &p->type);
                if (rc)
                    goto out;
            }
        }
        x = saved_type;
    }
    {
        const libxl__json_object *saved_devid = x;
        x = libxl__json_map_get("devid", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->devid);
            if (rc)
                goto out;
        }
        x = saved_devid;
    }
    {
        const libxl__json_object *saved_version = x;
        x = libxl__json_map_get("version", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->version);
            if (rc)
                goto out;
        }
        x = saved_version;
    }
    {
        const libxl__json_object *saved_ports = x;
        x = libxl__json_map_get("ports", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->ports);
            if (rc)
                goto out;
        }
        x = saved_ports;
    }
    {
        const libxl__json_object *saved_backend = x;
        x = libxl__json_map_get("backend", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->backend);
            if (rc)
                goto out;
        }
        x = saved_backend;
    }
    {
        const libxl__json_object *saved_backend_id = x;
        x = libxl__json_map_get("backend_id", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->backend_id);
            if (rc)
                goto out;
        }
        x = saved_backend_id;
    }
    {
        const libxl__json_object *saved_frontend = x;
        x = libxl__json_map_get("frontend", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->frontend);
            if (rc)
                goto out;
        }
        x = saved_frontend;
    }
    {
        const libxl__json_object *saved_frontend_id = x;
        x = libxl__json_map_get("frontend_id", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->frontend_id);
            if (rc)
                goto out;
        }
        x = saved_frontend_id;
    }
    {
        const libxl__json_object *saved_state = x;
        x = libxl__json_map_get("state", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->state);
            if (rc)
                goto out;
        }
        x = saved_state;
    }
    {
        const libxl__json_object *saved_evtch = x;
        x = libxl__json_map_get("evtch", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->evtch);
            if (rc)
                goto out;
        }
        x = saved_evtch;
    }
    {
        const libxl__json_object *saved_ref_urb = x;
        x = libxl__json_map_get("ref_urb", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->ref_urb);
            if (rc)
                goto out;
        }
        x = saved_ref_urb;
    }
    {
        const libxl__json_object *saved_ref_conn = x;
        x = libxl__json_map_get("ref_conn", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->ref_conn);
            if (rc)
                goto out;
        }
        x = saved_ref_conn;
    }
    out:
    return rc;
}

int libxl_usbctrlinfo_from_json(libxl_ctx *ctx, libxl_usbctrlinfo *p, const char *s)
{
    libxl_usbctrlinfo_init(p);
    return libxl__object_from_json(ctx, "libxl_usbctrlinfo", (libxl__json_parse_callback)&libxl__usbctrlinfo_parse_json, p, s);
}

int libxl__vcpuinfo_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_vcpuinfo *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const libxl__json_object *saved_vcpuid = x;
        x = libxl__json_map_get("vcpuid", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->vcpuid);
            if (rc)
                goto out;
        }
        x = saved_vcpuid;
    }
    {
        const libxl__json_object *saved_cpu = x;
        x = libxl__json_map_get("cpu", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->cpu);
            if (rc)
                goto out;
        }
        x = saved_cpu;
    }
    {
        const libxl__json_object *saved_online = x;
        x = libxl__json_map_get("online", o, JSON_BOOL);
        if (x) {
            rc = libxl__bool_parse_json(gc, x, &p->online);
            if (rc)
                goto out;
        }
        x = saved_online;
    }
    {
        const libxl__json_object *saved_blocked = x;
        x = libxl__json_map_get("blocked", o, JSON_BOOL);
        if (x) {
            rc = libxl__bool_parse_json(gc, x, &p->blocked);
            if (rc)
                goto out;
        }
        x = saved_blocked;
    }
    {
        const libxl__json_object *saved_running = x;
        x = libxl__json_map_get("running", o, JSON_BOOL);
        if (x) {
            rc = libxl__bool_parse_json(gc, x, &p->running);
            if (rc)
                goto out;
        }
        x = saved_running;
    }
    {
        const libxl__json_object *saved_vcpu_time = x;
        x = libxl__json_map_get("vcpu_time", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint64_parse_json(gc, x, &p->vcpu_time);
            if (rc)
                goto out;
        }
        x = saved_vcpu_time;
    }
    {
        const libxl__json_object *saved_cpumap = x;
        x = libxl__json_map_get("cpumap", o, JSON_ARRAY);
        if (x) {
            rc = libxl__bitmap_parse_json(gc, x, &p->cpumap);
            if (rc)
                goto out;
        }
        x = saved_cpumap;
    }
    {
        const libxl__json_object *saved_cpumap_soft = x;
        x = libxl__json_map_get("cpumap_soft", o, JSON_ARRAY);
        if (x) {
            rc = libxl__bitmap_parse_json(gc, x, &p->cpumap_soft);
            if (rc)
                goto out;
        }
        x = saved_cpumap_soft;
    }
    out:
    return rc;
}

int libxl_vcpuinfo_from_json(libxl_ctx *ctx, libxl_vcpuinfo *p, const char *s)
{
    libxl_vcpuinfo_init(p);
    return libxl__object_from_json(ctx, "libxl_vcpuinfo", (libxl__json_parse_callback)&libxl__vcpuinfo_parse_json, p, s);
}

int libxl__physinfo_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_physinfo *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const libxl__json_object *saved_domain_unpriv = x;
        x = libxl__json_map_get("domain_unpriv", o, JSON_STRING);
        if (x) {
            {
                const char *enum_str;
                if (!libxl__json_object_is_string(x)) {
                    rc = -1;
                    goto out;
                }
                enum_str = libxl__json_object_get_string(x);
                rc = libxl_domain_unpriv_from_string(enum_str, &p->domain_unpriv);
                if (rc)
                    goto out;
            }
        }
        x = saved_domain_unpriv;
    }
    {
        const libxl__json_object *saved_threads_per_core = x;
        x = libxl__json_map_get("threads_per_core", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->threads_per_core);
            if (rc)
                goto out;
        }
        x = saved_threads_per_core;
    }
    {
        const libxl__json_object *saved_cores_per_socket = x;
        x = libxl__json_map_get("cores_per_socket", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->cores_per_socket);
            if (rc)
                goto out;
        }
        x = saved_cores_per_socket;
    }
    {
        const libxl__json_object *saved_max_cpu_id = x;
        x = libxl__json_map_get("max_cpu_id", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->max_cpu_id);
            if (rc)
                goto out;
        }
        x = saved_max_cpu_id;
    }
    {
        const libxl__json_object *saved_nr_cpus = x;
        x = libxl__json_map_get("nr_cpus", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->nr_cpus);
            if (rc)
                goto out;
        }
        x = saved_nr_cpus;
    }
    {
        const libxl__json_object *saved_cpu_khz = x;
        x = libxl__json_map_get("cpu_khz", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->cpu_khz);
            if (rc)
                goto out;
        }
        x = saved_cpu_khz;
    }
    {
        const libxl__json_object *saved_total_pages = x;
        x = libxl__json_map_get("total_pages", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint64_parse_json(gc, x, &p->total_pages);
            if (rc)
                goto out;
        }
        x = saved_total_pages;
    }
    {
        const libxl__json_object *saved_free_pages = x;
        x = libxl__json_map_get("free_pages", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint64_parse_json(gc, x, &p->free_pages);
            if (rc)
                goto out;
        }
        x = saved_free_pages;
    }
    {
        const libxl__json_object *saved_scrub_pages = x;
        x = libxl__json_map_get("scrub_pages", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint64_parse_json(gc, x, &p->scrub_pages);
            if (rc)
                goto out;
        }
        x = saved_scrub_pages;
    }
    {
        const libxl__json_object *saved_outstanding_pages = x;
        x = libxl__json_map_get("outstanding_pages", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint64_parse_json(gc, x, &p->outstanding_pages);
            if (rc)
                goto out;
        }
        x = saved_outstanding_pages;
    }
    {
        const libxl__json_object *saved_sharing_freed_pages = x;
        x = libxl__json_map_get("sharing_freed_pages", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint64_parse_json(gc, x, &p->sharing_freed_pages);
            if (rc)
                goto out;
        }
        x = saved_sharing_freed_pages;
    }
    {
        const libxl__json_object *saved_sharing_used_frames = x;
        x = libxl__json_map_get("sharing_used_frames", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint64_parse_json(gc, x, &p->sharing_used_frames);
            if (rc)
                goto out;
        }
        x = saved_sharing_used_frames;
    }
    {
        const libxl__json_object *saved_max_possible_mfn = x;
        x = libxl__json_map_get("max_possible_mfn", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint64_parse_json(gc, x, &p->max_possible_mfn);
            if (rc)
                goto out;
        }
        x = saved_max_possible_mfn;
    }
    {
        const libxl__json_object *saved_nr_nodes = x;
        x = libxl__json_map_get("nr_nodes", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->nr_nodes);
            if (rc)
                goto out;
        }
        x = saved_nr_nodes;
    }
    {
        const libxl__json_object *saved_hw_cap = x;
        x = libxl__json_map_get("hw_cap", o, JSON_ARRAY);
        if (x) {
            rc = libxl__hwcap_parse_json(gc, x, &p->hw_cap);
            if (rc)
                goto out;
        }
        x = saved_hw_cap;
    }
    {
        const libxl__json_object *saved_cap_hvm = x;
        x = libxl__json_map_get("cap_hvm", o, JSON_BOOL);
        if (x) {
            rc = libxl__bool_parse_json(gc, x, &p->cap_hvm);
            if (rc)
                goto out;
        }
        x = saved_cap_hvm;
    }
    {
        const libxl__json_object *saved_cap_hvm_directio = x;
        x = libxl__json_map_get("cap_hvm_directio", o, JSON_BOOL);
        if (x) {
            rc = libxl__bool_parse_json(gc, x, &p->cap_hvm_directio);
            if (rc)
                goto out;
        }
        x = saved_cap_hvm_directio;
    }
    out:
    return rc;
}

int libxl_physinfo_from_json(libxl_ctx *ctx, libxl_physinfo *p, const char *s)
{
    libxl_physinfo_init(p);
    return libxl__object_from_json(ctx, "libxl_physinfo", (libxl__json_parse_callback)&libxl__physinfo_parse_json, p, s);
}

int libxl__connectorinfo_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_connectorinfo *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const libxl__json_object *saved_id = x;
        x = libxl__json_map_get("id", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->id);
            if (rc)
                goto out;
        }
        x = saved_id;
    }
    {
        const libxl__json_object *saved_width = x;
        x = libxl__json_map_get("width", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->width);
            if (rc)
                goto out;
        }
        x = saved_width;
    }
    {
        const libxl__json_object *saved_height = x;
        x = libxl__json_map_get("height", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->height);
            if (rc)
                goto out;
        }
        x = saved_height;
    }
    {
        const libxl__json_object *saved_req_evtch = x;
        x = libxl__json_map_get("req_evtch", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->req_evtch);
            if (rc)
                goto out;
        }
        x = saved_req_evtch;
    }
    {
        const libxl__json_object *saved_req_rref = x;
        x = libxl__json_map_get("req_rref", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->req_rref);
            if (rc)
                goto out;
        }
        x = saved_req_rref;
    }
    {
        const libxl__json_object *saved_evt_evtch = x;
        x = libxl__json_map_get("evt_evtch", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->evt_evtch);
            if (rc)
                goto out;
        }
        x = saved_evt_evtch;
    }
    {
        const libxl__json_object *saved_evt_rref = x;
        x = libxl__json_map_get("evt_rref", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->evt_rref);
            if (rc)
                goto out;
        }
        x = saved_evt_rref;
    }
    out:
    return rc;
}

int libxl_connectorinfo_from_json(libxl_ctx *ctx, libxl_connectorinfo *p, const char *s)
{
    libxl_connectorinfo_init(p);
    return libxl__object_from_json(ctx, "libxl_connectorinfo", (libxl__json_parse_callback)&libxl__connectorinfo_parse_json, p, s);
}

int libxl__vdisplinfo_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_vdisplinfo *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const libxl__json_object *saved_backend = x;
        x = libxl__json_map_get("backend", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->backend);
            if (rc)
                goto out;
        }
        x = saved_backend;
    }
    {
        const libxl__json_object *saved_backend_id = x;
        x = libxl__json_map_get("backend_id", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->backend_id);
            if (rc)
                goto out;
        }
        x = saved_backend_id;
    }
    {
        const libxl__json_object *saved_frontend = x;
        x = libxl__json_map_get("frontend", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->frontend);
            if (rc)
                goto out;
        }
        x = saved_frontend;
    }
    {
        const libxl__json_object *saved_frontend_id = x;
        x = libxl__json_map_get("frontend_id", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->frontend_id);
            if (rc)
                goto out;
        }
        x = saved_frontend_id;
    }
    {
        const libxl__json_object *saved_devid = x;
        x = libxl__json_map_get("devid", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->devid);
            if (rc)
                goto out;
        }
        x = saved_devid;
    }
    {
        const libxl__json_object *saved_state = x;
        x = libxl__json_map_get("state", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->state);
            if (rc)
                goto out;
        }
        x = saved_state;
    }
    {
        const libxl__json_object *saved_be_alloc = x;
        x = libxl__json_map_get("be_alloc", o, JSON_BOOL);
        if (x) {
            rc = libxl__bool_parse_json(gc, x, &p->be_alloc);
            if (rc)
                goto out;
        }
        x = saved_be_alloc;
    }
    {
        const libxl__json_object *saved_connectors = x;
        x = libxl__json_map_get("connectors", o, JSON_ARRAY);
        if (x) {
            {
                libxl__json_object *t;
                int i;
                if (!libxl__json_object_is_array(x)) {
                    rc = -1;
                    goto out;
                }
                p->num_connectors = x->u.array->count;
                p->connectors = libxl__calloc(NOGC, p->num_connectors, sizeof(*p->connectors));
                if (!p->connectors && p->num_connectors != 0) {
                    rc = -1;
                    goto out;
                }
                for (i=0; (t=libxl__json_array_get(x,i)); i++) {
                        rc = libxl__connectorinfo_parse_json(gc, t, &p->connectors[i]);
                        if (rc)
                            goto out;
                }
                if (i != p->num_connectors) {
                    rc = -1;
                    goto out;
                }
            }
        }
        x = saved_connectors;
    }
    out:
    return rc;
}

int libxl_vdisplinfo_from_json(libxl_ctx *ctx, libxl_vdisplinfo *p, const char *s)
{
    libxl_vdisplinfo_init(p);
    return libxl__object_from_json(ctx, "libxl_vdisplinfo", (libxl__json_parse_callback)&libxl__vdisplinfo_parse_json, p, s);
}

int libxl__numainfo_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_numainfo *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const libxl__json_object *saved_size = x;
        x = libxl__json_map_get("size", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint64_parse_json(gc, x, &p->size);
            if (rc)
                goto out;
        }
        x = saved_size;
    }
    {
        const libxl__json_object *saved_free = x;
        x = libxl__json_map_get("free", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint64_parse_json(gc, x, &p->free);
            if (rc)
                goto out;
        }
        x = saved_free;
    }
    {
        const libxl__json_object *saved_dists = x;
        x = libxl__json_map_get("dists", o, JSON_ARRAY);
        if (x) {
            {
                libxl__json_object *t;
                int i;
                if (!libxl__json_object_is_array(x)) {
                    rc = -1;
                    goto out;
                }
                p->num_dists = x->u.array->count;
                p->dists = libxl__calloc(NOGC, p->num_dists, sizeof(*p->dists));
                if (!p->dists && p->num_dists != 0) {
                    rc = -1;
                    goto out;
                }
                for (i=0; (t=libxl__json_array_get(x,i)); i++) {
                        rc = libxl__uint32_parse_json(gc, t, &p->dists[i]);
                        if (rc)
                            goto out;
                }
                if (i != p->num_dists) {
                    rc = -1;
                    goto out;
                }
            }
        }
        x = saved_dists;
    }
    out:
    return rc;
}

int libxl_numainfo_from_json(libxl_ctx *ctx, libxl_numainfo *p, const char *s)
{
    libxl_numainfo_init(p);
    return libxl__object_from_json(ctx, "libxl_numainfo", (libxl__json_parse_callback)&libxl__numainfo_parse_json, p, s);
}

int libxl__cputopology_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_cputopology *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const libxl__json_object *saved_core = x;
        x = libxl__json_map_get("core", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->core);
            if (rc)
                goto out;
        }
        x = saved_core;
    }
    {
        const libxl__json_object *saved_socket = x;
        x = libxl__json_map_get("socket", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->socket);
            if (rc)
                goto out;
        }
        x = saved_socket;
    }
    {
        const libxl__json_object *saved_node = x;
        x = libxl__json_map_get("node", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->node);
            if (rc)
                goto out;
        }
        x = saved_node;
    }
    out:
    return rc;
}

int libxl_cputopology_from_json(libxl_ctx *ctx, libxl_cputopology *p, const char *s)
{
    libxl_cputopology_init(p);
    return libxl__object_from_json(ctx, "libxl_cputopology", (libxl__json_parse_callback)&libxl__cputopology_parse_json, p, s);
}

int libxl__pcitopology_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_pcitopology *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const libxl__json_object *saved_seg = x;
        x = libxl__json_map_get("seg", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint16_parse_json(gc, x, &p->seg);
            if (rc)
                goto out;
        }
        x = saved_seg;
    }
    {
        const libxl__json_object *saved_bus = x;
        x = libxl__json_map_get("bus", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint8_parse_json(gc, x, &p->bus);
            if (rc)
                goto out;
        }
        x = saved_bus;
    }
    {
        const libxl__json_object *saved_devfn = x;
        x = libxl__json_map_get("devfn", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint8_parse_json(gc, x, &p->devfn);
            if (rc)
                goto out;
        }
        x = saved_devfn;
    }
    {
        const libxl__json_object *saved_node = x;
        x = libxl__json_map_get("node", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->node);
            if (rc)
                goto out;
        }
        x = saved_node;
    }
    out:
    return rc;
}

int libxl_pcitopology_from_json(libxl_ctx *ctx, libxl_pcitopology *p, const char *s)
{
    libxl_pcitopology_init(p);
    return libxl__object_from_json(ctx, "libxl_pcitopology", (libxl__json_parse_callback)&libxl__pcitopology_parse_json, p, s);
}

int libxl__sched_credit_params_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_sched_credit_params *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const libxl__json_object *saved_tslice_ms = x;
        x = libxl__json_map_get("tslice_ms", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->tslice_ms);
            if (rc)
                goto out;
        }
        x = saved_tslice_ms;
    }
    {
        const libxl__json_object *saved_ratelimit_us = x;
        x = libxl__json_map_get("ratelimit_us", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->ratelimit_us);
            if (rc)
                goto out;
        }
        x = saved_ratelimit_us;
    }
    out:
    return rc;
}

int libxl_sched_credit_params_from_json(libxl_ctx *ctx, libxl_sched_credit_params *p, const char *s)
{
    libxl_sched_credit_params_init(p);
    return libxl__object_from_json(ctx, "libxl_sched_credit_params", (libxl__json_parse_callback)&libxl__sched_credit_params_parse_json, p, s);
}

int libxl__sched_credit2_params_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_sched_credit2_params *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const libxl__json_object *saved_ratelimit_us = x;
        x = libxl__json_map_get("ratelimit_us", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->ratelimit_us);
            if (rc)
                goto out;
        }
        x = saved_ratelimit_us;
    }
    out:
    return rc;
}

int libxl_sched_credit2_params_from_json(libxl_ctx *ctx, libxl_sched_credit2_params *p, const char *s)
{
    libxl_sched_credit2_params_init(p);
    return libxl__object_from_json(ctx, "libxl_sched_credit2_params", (libxl__json_parse_callback)&libxl__sched_credit2_params_parse_json, p, s);
}

int libxl__domain_remus_info_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_domain_remus_info *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const libxl__json_object *saved_interval = x;
        x = libxl__json_map_get("interval", o, JSON_INTEGER);
        if (x) {
            rc = libxl__int_parse_json(gc, x, &p->interval);
            if (rc)
                goto out;
        }
        x = saved_interval;
    }
    {
        const libxl__json_object *saved_allow_unsafe = x;
        x = libxl__json_map_get("allow_unsafe", o, JSON_STRING);
        if (x) {
            rc = libxl__defbool_parse_json(gc, x, &p->allow_unsafe);
            if (rc)
                goto out;
        }
        x = saved_allow_unsafe;
    }
    {
        const libxl__json_object *saved_blackhole = x;
        x = libxl__json_map_get("blackhole", o, JSON_STRING);
        if (x) {
            rc = libxl__defbool_parse_json(gc, x, &p->blackhole);
            if (rc)
                goto out;
        }
        x = saved_blackhole;
    }
    {
        const libxl__json_object *saved_compression = x;
        x = libxl__json_map_get("compression", o, JSON_STRING);
        if (x) {
            rc = libxl__defbool_parse_json(gc, x, &p->compression);
            if (rc)
                goto out;
        }
        x = saved_compression;
    }
    {
        const libxl__json_object *saved_netbuf = x;
        x = libxl__json_map_get("netbuf", o, JSON_STRING);
        if (x) {
            rc = libxl__defbool_parse_json(gc, x, &p->netbuf);
            if (rc)
                goto out;
        }
        x = saved_netbuf;
    }
    {
        const libxl__json_object *saved_netbufscript = x;
        x = libxl__json_map_get("netbufscript", o, JSON_STRING | JSON_NULL);
        if (x) {
            rc = libxl__string_parse_json(gc, x, &p->netbufscript);
            if (rc)
                goto out;
        }
        x = saved_netbufscript;
    }
    {
        const libxl__json_object *saved_diskbuf = x;
        x = libxl__json_map_get("diskbuf", o, JSON_STRING);
        if (x) {
            rc = libxl__defbool_parse_json(gc, x, &p->diskbuf);
            if (rc)
                goto out;
        }
        x = saved_diskbuf;
    }
    {
        const libxl__json_object *saved_colo = x;
        x = libxl__json_map_get("colo", o, JSON_STRING);
        if (x) {
            rc = libxl__defbool_parse_json(gc, x, &p->colo);
            if (rc)
                goto out;
        }
        x = saved_colo;
    }
    {
        const libxl__json_object *saved_userspace_colo_proxy = x;
        x = libxl__json_map_get("userspace_colo_proxy", o, JSON_STRING);
        if (x) {
            rc = libxl__defbool_parse_json(gc, x, &p->userspace_colo_proxy);
            if (rc)
                goto out;
        }
        x = saved_userspace_colo_proxy;
    }
    out:
    return rc;
}

int libxl_domain_remus_info_from_json(libxl_ctx *ctx, libxl_domain_remus_info *p, const char *s)
{
    libxl_domain_remus_info_init(p);
    return libxl__object_from_json(ctx, "libxl_domain_remus_info", (libxl__json_parse_callback)&libxl__domain_remus_info_parse_json, p, s);
}

int libxl__event_type_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_event_type *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const char *enum_str;
        if (!libxl__json_object_is_string(o)) {
            rc = -1;
            goto out;
        }
        enum_str = libxl__json_object_get_string(o);
        rc = libxl_event_type_from_string(enum_str, p);
        if (rc)
            goto out;
    }
    out:
    return rc;
}

int libxl_event_type_from_json(libxl_ctx *ctx, libxl_event_type *p, const char *s)
{
    return libxl__object_from_json(ctx, "libxl_event_type", (libxl__json_parse_callback)&libxl__event_type_parse_json, p, s);
}

int libxl__event_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_event *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const libxl__json_object *saved_domid = x;
        x = libxl__json_map_get("domid", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->domid);
            if (rc)
                goto out;
        }
        x = saved_domid;
    }
    {
        const libxl__json_object *saved_domuuid = x;
        x = libxl__json_map_get("domuuid", o, JSON_STRING);
        if (x) {
            rc = libxl__uuid_parse_json(gc, x, &p->domuuid);
            if (rc)
                goto out;
        }
        x = saved_domuuid;
    }
    {
        const libxl__json_object *saved_for_user = x;
        x = libxl__json_map_get("for_user", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint64_parse_json(gc, x, &p->for_user);
            if (rc)
                goto out;
        }
        x = saved_for_user;
    }
    {
        const libxl__json_object *saved_u = x;
        x = libxl__json_map_get("type.domain_shutdown", o, JSON_MAP);
        if (x) {
            libxl_event_init_type(p, LIBXL_EVENT_TYPE_DOMAIN_SHUTDOWN);
            {
                const libxl__json_object *saved_shutdown_reason = x;
                x = libxl__json_map_get("shutdown_reason", x, JSON_INTEGER);
                if (x) {
                    rc = libxl__uint8_parse_json(gc, x, &p->u.domain_shutdown.shutdown_reason);
                    if (rc)
                        goto out;
                }
                x = saved_shutdown_reason;
            }
        }
        x = libxl__json_map_get("type.domain_death", o, JSON_MAP);
        if (x) {
            libxl_event_init_type(p, LIBXL_EVENT_TYPE_DOMAIN_DEATH);
        }
        x = libxl__json_map_get("type.disk_eject", o, JSON_MAP);
        if (x) {
            libxl_event_init_type(p, LIBXL_EVENT_TYPE_DISK_EJECT);
            {
                const libxl__json_object *saved_vdev = x;
                x = libxl__json_map_get("vdev", x, JSON_STRING | JSON_NULL);
                if (x) {
                    rc = libxl__string_parse_json(gc, x, &p->u.disk_eject.vdev);
                    if (rc)
                        goto out;
                }
                x = saved_vdev;
            }
            {
                const libxl__json_object *saved_disk = x;
                x = libxl__json_map_get("disk", x, JSON_MAP);
                if (x) {
                    rc = libxl__device_disk_parse_json(gc, x, &p->u.disk_eject.disk);
                    if (rc)
                        goto out;
                }
                x = saved_disk;
            }
        }
        x = libxl__json_map_get("type.operation_complete", o, JSON_MAP);
        if (x) {
            libxl_event_init_type(p, LIBXL_EVENT_TYPE_OPERATION_COMPLETE);
            {
                const libxl__json_object *saved_rc = x;
                x = libxl__json_map_get("rc", x, JSON_INTEGER);
                if (x) {
                    rc = libxl__int_parse_json(gc, x, &p->u.operation_complete.rc);
                    if (rc)
                        goto out;
                }
                x = saved_rc;
            }
        }
        x = libxl__json_map_get("type.domain_create_console_available", o, JSON_MAP);
        if (x) {
            libxl_event_init_type(p, LIBXL_EVENT_TYPE_DOMAIN_CREATE_CONSOLE_AVAILABLE);
        }
        x = saved_u;
    }
    out:
    return rc;
}

int libxl_event_from_json(libxl_ctx *ctx, libxl_event *p, const char *s)
{
    libxl_event_init(p);
    return libxl__object_from_json(ctx, "libxl_event", (libxl__json_parse_callback)&libxl__event_parse_json, p, s);
}

int libxl__psr_cmt_type_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_psr_cmt_type *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const char *enum_str;
        if (!libxl__json_object_is_string(o)) {
            rc = -1;
            goto out;
        }
        enum_str = libxl__json_object_get_string(o);
        rc = libxl_psr_cmt_type_from_string(enum_str, p);
        if (rc)
            goto out;
    }
    out:
    return rc;
}

int libxl_psr_cmt_type_from_json(libxl_ctx *ctx, libxl_psr_cmt_type *p, const char *s)
{
    return libxl__object_from_json(ctx, "libxl_psr_cmt_type", (libxl__json_parse_callback)&libxl__psr_cmt_type_parse_json, p, s);
}

int libxl__psr_cbm_type_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_psr_cbm_type *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const char *enum_str;
        if (!libxl__json_object_is_string(o)) {
            rc = -1;
            goto out;
        }
        enum_str = libxl__json_object_get_string(o);
        rc = libxl_psr_cbm_type_from_string(enum_str, p);
        if (rc)
            goto out;
    }
    out:
    return rc;
}

int libxl_psr_cbm_type_from_json(libxl_ctx *ctx, libxl_psr_cbm_type *p, const char *s)
{
    return libxl__object_from_json(ctx, "libxl_psr_cbm_type", (libxl__json_parse_callback)&libxl__psr_cbm_type_parse_json, p, s);
}

int libxl__psr_cat_info_parse_json(libxl__gc *gc, const libxl__json_object *o, libxl_psr_cat_info *p)
{
    int rc = 0;
    const libxl__json_object *x __attribute__((__unused__)) = o;
    {
        const libxl__json_object *saved_id = x;
        x = libxl__json_map_get("id", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->id);
            if (rc)
                goto out;
        }
        x = saved_id;
    }
    {
        const libxl__json_object *saved_cos_max = x;
        x = libxl__json_map_get("cos_max", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->cos_max);
            if (rc)
                goto out;
        }
        x = saved_cos_max;
    }
    {
        const libxl__json_object *saved_cbm_len = x;
        x = libxl__json_map_get("cbm_len", o, JSON_INTEGER);
        if (x) {
            rc = libxl__uint32_parse_json(gc, x, &p->cbm_len);
            if (rc)
                goto out;
        }
        x = saved_cbm_len;
    }
    {
        const libxl__json_object *saved_cdp_enabled = x;
        x = libxl__json_map_get("cdp_enabled", o, JSON_BOOL);
        if (x) {
            rc = libxl__bool_parse_json(gc, x, &p->cdp_enabled);
            if (rc)
                goto out;
        }
        x = saved_cdp_enabled;
    }
    out:
    return rc;
}

int libxl_psr_cat_info_from_json(libxl_ctx *ctx, libxl_psr_cat_info *p, const char *s)
{
    libxl_psr_cat_info_init(p);
    return libxl__object_from_json(ctx, "libxl_psr_cat_info", (libxl__json_parse_callback)&libxl__psr_cat_info_parse_json, p, s);
}

